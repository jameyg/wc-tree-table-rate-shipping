!function(t){"use strict";var e=window.define;"function"==typeof e&&e.amd?e(["jquery","jquery-ui/sortable"],t):t(window.jQuery)}((function(t){"use strict";function e(t,e,n){return t>e&&t<e+n}function n(e,n,i,r){r&&(n=[i,i=n][0]),t(e).removeClass(n).addClass(i)}t.widget("mjs.nestedSortable",t.extend({},t.ui.sortable.prototype,{options:{disableParentChange:!1,doNotClear:!1,expandOnHover:700,isAllowed:function(){return!0},isTree:!1,listType:"ol",list:"<ol></ol>",maxLevels:0,protectRoot:!1,rootID:null,rtl:!1,startCollapsed:!1,tabSize:20,tree:{hasChildren:function(e){return t(e).children(this.options.listType).is(":not(:empty)")},expanded:function(e,i){return void 0!==i&&n(e,this.options.expandedClass,this.options.collapsedClass,!i),t(e).hasClass(this.options.expandedClass)}},branchClass:"mjs-nestedSortable-branch",collapsedClass:"mjs-nestedSortable-collapsed",disableNestingClass:"mjs-nestedSortable-no-nesting",errorClass:"mjs-nestedSortable-error",expandedClass:"mjs-nestedSortable-expanded",hoveringClass:"mjs-nestedSortable-hovering",leafClass:"mjs-nestedSortable-leaf",disabledClass:"mjs-nestedSortable-disabled"},_create:function(){var e;if(this.element.data("ui-sortable",this.element.data("mjs-nestedSortable")),!t(this._root()).is(this.options.listType))throw e="nestedSortable: Please check that the listType option is set to your actual list type",new Error(e);if("function"!=typeof this.options.list){var n=this.options.list;this.options.list=function(){return t(n||document.createElement(this.options.listType))}}this.options.isTree&&this.options.expandOnHover&&(this.options.tolerance="intersect"),t.ui.sortable.prototype._create.apply(this,arguments)},_destroy:function(){return this.element.removeData("mjs-nestedSortable").removeData("ui-sortable"),t.ui.sortable.prototype._destroy.apply(this,arguments)},_mouseDrag:function(e){var i,r,o,s,a,l,u,c,h,d,p,f,m,g,v,y=this,b=this.options,w=!1,_=t(document);for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<b.scrollSensitivity?(w=this.scrollParent.scrollTop()+b.scrollSpeed,this.scrollParent.scrollTop(w)):e.pageY-this.overflowOffset.top<b.scrollSensitivity&&(w=this.scrollParent.scrollTop()-b.scrollSpeed,this.scrollParent.scrollTop(w)),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<b.scrollSensitivity?(w=this.scrollParent.scrollLeft()+b.scrollSpeed,this.scrollParent.scrollLeft(w)):e.pageX-this.overflowOffset.left<b.scrollSensitivity&&(w=this.scrollParent.scrollLeft()-b.scrollSpeed,this.scrollParent.scrollLeft(w))):(e.pageY-_.scrollTop()<b.scrollSensitivity?(w=_.scrollTop()-b.scrollSpeed,_.scrollTop(w)):t(window).height()-(e.pageY-_.scrollTop())<b.scrollSensitivity&&(w=_.scrollTop()+b.scrollSpeed,_.scrollTop(w)),e.pageX-_.scrollLeft()<b.scrollSensitivity?(w=_.scrollLeft()-b.scrollSpeed,_.scrollLeft(w)):t(window).width()-(e.pageX-_.scrollLeft())<b.scrollSensitivity&&(w=_.scrollLeft()+b.scrollSpeed,_.scrollLeft(w))),!1!==w&&t.ui.ddmanager&&!b.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),a=this.placeholder.offset().top,this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),this.hovering=this.hovering?this.hovering:null,this.mouseentered=!!this.mouseentered&&this.mouseentered,function(){var t=this.placeholder.parent().parent();t&&t.closest(".ui-sortable").length&&(l=t)}.call(this),u=this._getLevel(this.placeholder),c=this._getChildLevels(this.helper),p=this.options.list(),i=this.items.length-1;i>=0;i--)if(r=this.items[i],o=r.item[0],(s=this._intersectsWithPointer(r))&&r.instance===this.currentContainer){if(-1!==o.className.indexOf(b.disabledClass))if(2===s){if((h=this.items[i+1])&&h.item.hasClass(b.disabledClass))continue}else if(1===s&&(d=this.items[i-1])&&d.item.hasClass(b.disabledClass))continue;if(f=1===s?"next":"prev",!(o===this.currentItem[0]||this.placeholder[f]()[0]===o||t.contains(this.placeholder[0],o)||"semi-dynamic"===this.options.type&&t.contains(this.element[0],o))){if(this.mouseentered||(t(o).mouseenter(),this.mouseentered=!0),b.isTree&&this.options.tree.hasChildren(o)&&b.expandOnHover&&(this.hovering||(t(o).addClass(b.hoveringClass),this.hovering=window.setTimeout((function(){y.options.tree.expanded(o,!0),y.refreshPositions(),y._refreshItems(),y._trigger("expand",e,y._uiHash())}),b.expandOnHover))),this.direction=1===s?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(r))break;t(o).mouseleave(),this.mouseentered=!1,t(o).removeClass(b.hoveringClass),this.hovering&&window.clearTimeout(this.hovering),this.hovering=null,!b.protectRoot||this.currentItem[0].parentNode===this._root()&&o.parentNode!==this._root()?b.protectRoot||this._rearrange(e,r):this.currentItem[0].parentNode!==this._root()&&o.parentNode===this._root()?(t(o).children(b.listType).length||(t(o).append(p),b.isTree&&(b.tree.expanded(o,!0),n(o,b.leafClass,b.branchClass))),void 0!==(m="down"===this.direction?t(o).prev().children(b.listType):t(o).children(b.listType))[0]&&this._rearrange(e,null,m)):this._rearrange(e,r),this._clearEmpty(o),this._trigger("change",e,this._uiHash());break}}if(function(){var t=this.placeholder.prev();g=t.length?t:null}.call(this),null!=g)for(;"li"!==g[0].nodeName.toLowerCase()||-1!==g[0].className.indexOf(b.disabledClass)||g[0]===this.currentItem[0]||g[0]===this.helper[0];){if(!g[0].previousSibling){g=null;break}g=t(g[0].previousSibling)}if(function(){var t=this.placeholder.next();v=t.length?t:null}.call(this),null!=v)for(;"li"!==v[0].nodeName.toLowerCase()||-1!==v[0].className.indexOf(b.disabledClass)||v[0]===this.currentItem[0]||v[0]===this.helper[0];){if(!v[0].nextSibling){v=null;break}v=t(v[0].nextSibling)}return this.beyondMaxLevels=0,null==l||null!=v||b.protectRoot&&l[0].parentNode==this._root()||!(b.rtl&&this.positionAbs.left+this.helper.outerWidth()>l.offset().left+l.outerWidth()||!b.rtl&&this.positionAbs.left<l.offset().left)?null==g||g.hasClass(b.disableNestingClass)||!b.tree.expanded(g)&&b.tree.hasChildren(g)||b.protectRoot&&this.currentItem[0].parentNode===this._root()||!(b.rtl&&this.positionAbs.left+this.helper.outerWidth()<g.offset().left+g.outerWidth()-b.tabSize||!b.rtl&&this.positionAbs.left>g.offset().left+b.tabSize)?this._isAllowed(l,u,u+c):(this._isAllowed(g,u,u+c+1),g.children(b.listType).length||(g.append(p),b.isTree&&(b.tree.expanded(g,!0),n(g,b.leafClass,b.branchClass))),a&&a<=g.offset().top?g.children(b.listType).prepend(this.placeholder):g.children(b.listType)[0].appendChild(this.placeholder[0]),l&&this._clearEmpty(l[0]),this._trigger("change",e,this._uiHash())):(l.after(this.placeholder[0]),b.isTree&&!this.options.tree.hasChildren(l)&&l.removeClass(this.options.branchClass).addClass(this.options.leafClass),this._clearEmpty(l[0]),this._trigger("change",e,this._uiHash())),this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e){this.beyondMaxLevels&&(this.placeholder.removeClass(this.options.errorClass),this.domPosition.prev?t(this.domPosition.prev).after(this.placeholder):t(this.domPosition.parent).prepend(this.placeholder),this._trigger("revert",e,this._uiHash())),t("."+this.options.hoveringClass).mouseleave().removeClass(this.options.hoveringClass),this.mouseentered=!1,this.hovering&&window.clearTimeout(this.hovering),this.hovering=null,this._relocate_event=e,this._pid_current=t(this.domPosition.parent).parent().attr("id"),this._sort_current=this.domPosition.prev?t(this.domPosition.prev).next().index():0,t.ui.sortable.prototype._mouseStop.apply(this,arguments)},_intersectsWithSides:function(t){var n=this.options.isTree?.8:.5,i=e(this.positionAbs.top+this.offset.click.top,t.top+t.height*n,t.height),r=e(this.positionAbs.top+this.offset.click.top,t.top-t.height*n,t.height),o=e(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),s=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return this.floating&&a?"right"===a&&o||"left"===a&&!o:s&&("down"===s&&i||"up"===s&&r)},_contactContainers:function(){this.options.protectRoot&&this.currentItem[0].parentNode===this._root()||t.ui.sortable.prototype._contactContainers.apply(this,arguments)},_clear:function(){var e,n;for(t.ui.sortable.prototype._clear.apply(this,arguments),this._pid_current===this._uiHash().item.parent().parent().attr("id")&&this._sort_current===this._uiHash().item.index()||this._trigger("relocate",this._relocate_event,this._uiHash()),e=this.items.length-1;e>=0;e--)n=this.items[e].item[0],t.contains(document,n)&&this._clearEmpty(n)},clear:function(){return this._clear.apply(this,arguments)},serialize:function(e){var n=t.extend({},this.options,e),i=this._getItemsAsjQuery(n&&n.connected),r=[];return t(i).each((function(){var e=(t(n.item||this).attr(n.attribute||"id")||"").match(n.expression||/(.+)[-=_](.+)/),i=(t(n.item||this).parent(n.listType).parent(n.items).attr(n.attribute||"id")||"").match(n.expression||/(.+)[-=_](.+)/);e&&r.push((n.key||e[1])+"["+(n.key&&n.expression?e[1]:e[2])+"]="+(i?n.key&&n.expression?i[1]:i[2]:n.rootID))})),!r.length&&n.key&&r.push(n.key+"="),r.join("&")},toHierarchy:function(e){var n=t.extend({},this.options,e),i=[];return t(this._root()).children(n.items).each((function(){var t=r(this);i.push(t)})),i;function r(e){var i,o=(t(e).attr(n.attribute||"id")||"").match(n.expression||/(.+)[-=_](.+)/);if(o)return i={id:o[2]},t(e).children(n.listType).children(n.items).length>0&&(i.children=[],t(e).children(n.listType).children(n.items).each((function(){var t=r(this);i.children.push(t)}))),i}},toArray:function(e){var n=t.extend({},this.options,e),i=n.startDepthCount||0,r=[],o=1;return n.excludeRoot||(r.push({item_id:n.rootID,parent_id:null,depth:i,left:o,right:2*(t(n.items,this.element).length+1)}),o++),t(this._root()).children(n.items).each((function(){o=s(this,i+1,o)})),r=r.sort((function(t,e){return t.left-e.left}));function s(e,o,a){var l,u,c=a+1;return t(e).children(n.listType).children(n.items).length>0&&(o++,t(e).children(n.listType).children(n.items).each((function(){c=s(t(this),o,c)})),o--),l=t(e).attr(n.attribute||"id").match(n.expression||/(.+)[-=_](.+)/),u=o===i+1?n.rootID:t(e).parent(n.listType).parent(n.items).attr(n.attribute||"id").match(n.expression||/(.+)[-=_](.+)/)[2],l&&r.push({item_id:l[2],parent_id:u,depth:o,left:a,right:c}),a=c+1}},_clearEmpty:function(e){var i=this.options,r=t(e).children(i.listType),o=this.options.tree.hasChildren(e)||r.is(":not(:empty)"),s=i.doNotClear||o||i.protectRoot&&t(e)[0]===this._root();i.isTree&&n(e,i.branchClass,i.leafClass,s),s||r.remove()},_getLevel:function(t){var e,n=1;if(this.options.listType)for(e=t.closest(this.options.listType);e&&e.length>0&&!e.is(".ui-sortable");)n++,e=e.parent().closest(this.options.listType);return n},_getChildLevels:function(e,n){var i=this,r=this.options,o=0;return n=n||0,t(e).children(r.listType).children(r.items).each((function(t,e){o=Math.max(i._getChildLevels(e,n+1),o)})),n?o+1:o},_isAllowed:function(t,e,n){var i=this.options,r=this.placeholder.closest(".ui-sortable").nestedSortable("option","maxLevels"),o=this.currentItem.parent().parent();i.disableParentChange&&(null!==t&&!o.is(t)||null===t&&o.is("li"))||!i.isAllowed(this.placeholder,t,this.currentItem)?(this.placeholder.addClass(i.errorClass),this.beyondMaxLevels=r<n&&0!==r?n-r:1):r<n&&0!==r?(this.placeholder.addClass(i.errorClass),this.beyondMaxLevels=n-r):(this.placeholder.removeClass(i.errorClass),this.beyondMaxLevels=0)},_root:function(){return this.element[0]}})),t.mjs.nestedSortable.prototype.options=t.extend({},t.ui.sortable.prototype.options,t.mjs.nestedSortable.prototype.options)})),function(t){"use strict";t(["jquery"],(function(t){var e=t.scrollTo=function(e,n,i){return t(window).scrollTo(e,n,i)};function n(e){return t.isFunction(e)||t.isPlainObject(e)?e:{top:e,left:e}}return e.defaults={axis:"xy",duration:0,limit:!0},e.window=function(e){return t(window)._scrollable()},t.fn._scrollable=function(){return this.map((function(){var e=this;if(!(!e.nodeName||-1!=t.inArray(e.nodeName.toLowerCase(),["iframe","#document","html","body"])))return e;var n=(e.contentWindow||e).document||e.ownerDocument||e;return/webkit/i.test(navigator.userAgent)||"BackCompat"==n.compatMode?n.body:n.documentElement}))},t.fn.scrollTo=function(i,r,o){return"object"==typeof r&&(o=r,r=0),"function"==typeof o&&(o={onAfter:o}),"max"==i&&(i=9e9),o=t.extend({},e.defaults,o),r=r||o.duration,o.queue=o.queue&&o.axis.length>1,o.queue&&(r/=2),o.offset=n(o.offset),o.over=n(o.over),this._scrollable().each((function(){if(null!=i){var s,a=this,l=t(a),u=i,c={},h=l.is("html,body");switch(typeof u){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(u)){u=n(u);break}if(!(u=h?t(u):t(u,this)).length)return;case"object":(u.is||u.style)&&(s=(u=t(u)).offset())}var d=t.isFunction(o.offset)&&o.offset(a,u)||o.offset;t.each(o.axis.split(""),(function(t,n){var i="x"==n?"Left":"Top",r=i.toLowerCase(),f="scroll"+i,m=a[f],g=e.max(a,n);if(s)c[f]=s[r]+(h?0:m-l.offset()[r]),o.margin&&(c[f]-=parseInt(u.css("margin"+i))||0,c[f]-=parseInt(u.css("border"+i+"Width"))||0),c[f]+=d[r]||0,o.over[r]&&(c[f]+=u["x"==n?"width":"height"]()*o.over[r]);else{var v=u[r];c[f]=v.slice&&"%"==v.slice(-1)?parseFloat(v)/100*g:v}o.limit&&/^\d+$/.test(c[f])&&(c[f]=c[f]<=0?0:Math.min(c[f],g)),!t&&o.queue&&(m!=c[f]&&p(o.onAfterFirst),delete c[f])})),p(o.onAfter)}function p(t){l.animate(c,r,o.easing,t&&function(){t.call(this,u,o)})}})).end()},e.max=function(e,n){var i="x"==n?"Width":"Height",r="scroll"+i;if(!t(e).is("html,body"))return e[r]-t(e)[i.toLowerCase()]();var o="client"+i,s=e.ownerDocument.documentElement,a=e.ownerDocument.body;return Math.max(s[r],a[r])-Math.min(s[o],a[o])},e}))}("function"==typeof define&&define.amd?define:function(t,e){"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(jQuery)}((function(t){var e=function(){if(t&&t.fn&&t.fn.select2&&t.fn.select2.amd)var e=t.fn.select2.amd;return function(){var t,n,i;e&&e.requirejs||(e?n=e:e={},function(e){var r,o,s,a,l={},u={},c={},h={},d=Object.prototype.hasOwnProperty,p=[].slice,f=/\.js$/;function m(t,e){return d.call(t,e)}function g(t,e){var n,i,r,o,s,a,l,u,h,d,p,m=e&&e.split("/"),g=c.map,v=g&&g["*"]||{};if(t&&"."===t.charAt(0))if(e){for(m=m.slice(0,m.length-1),s=(t=t.split("/")).length-1,c.nodeIdCompat&&f.test(t[s])&&(t[s]=t[s].replace(f,"")),t=m.concat(t),h=0;h<t.length;h+=1)if("."===(p=t[h]))t.splice(h,1),h-=1;else if(".."===p){if(1===h&&(".."===t[2]||".."===t[0]))break;h>0&&(t.splice(h-1,2),h-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((m||v)&&g){for(h=(n=t.split("/")).length;h>0;h-=1){if(i=n.slice(0,h).join("/"),m)for(d=m.length;d>0;d-=1)if((r=g[m.slice(0,d).join("/")])&&(r=r[i])){o=r,a=h;break}if(o)break;!l&&v&&v[i]&&(l=v[i],u=h)}!o&&l&&(o=l,a=u),o&&(n.splice(0,a,o),t=n.join("/"))}return t}function v(t,n){return function(){return o.apply(e,p.call(arguments,0).concat([t,n]))}}function y(t){return function(e){l[t]=e}}function b(t){if(m(u,t)){var n=u[t];delete u[t],h[t]=!0,r.apply(e,n)}if(!m(l,t)&&!m(h,t))throw new Error("No "+t);return l[t]}function w(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function _(t){return function(){return c&&c.config&&c.config[t]||{}}}s=function(t,e){var n,i=w(t),r=i[0];return t=i[1],r&&(n=b(r=g(r,e))),r?t=n&&n.normalize?n.normalize(t,function(t){return function(e){return g(e,t)}}(e)):g(t,e):(r=(i=w(t=g(t,e)))[0],t=i[1],r&&(n=b(r))),{f:r?r+"!"+t:t,n:t,pr:r,p:n}},a={require:function(t){return v(t)},exports:function(t){var e=l[t];return void 0!==e?e:l[t]={}},module:function(t){return{id:t,uri:"",exports:l[t],config:_(t)}}},r=function(t,n,i,r){var o,c,d,p,f,g,w=[],_=typeof i;if(r=r||t,"undefined"===_||"function"===_){for(n=!n.length&&i.length?["require","exports","module"]:n,f=0;f<n.length;f+=1)if("require"===(c=(p=s(n[f],r)).f))w[f]=a.require(t);else if("exports"===c)w[f]=a.exports(t),g=!0;else if("module"===c)o=w[f]=a.module(t);else if(m(l,c)||m(u,c)||m(h,c))w[f]=b(c);else{if(!p.p)throw new Error(t+" missing "+c);p.p.load(p.n,v(r,!0),y(c),{}),w[f]=l[c]}d=i?i.apply(l[t],w):void 0,t&&(o&&o.exports!==e&&o.exports!==l[t]?l[t]=o.exports:d===e&&g||(l[t]=d))}else t&&(l[t]=i)},t=n=o=function(t,n,i,l,u){if("string"==typeof t)return a[t]?a[t](n):b(s(t,n).f);if(!t.splice){if((c=t).deps&&o(c.deps,c.callback),!n)return;n.splice?(t=n,n=i,i=null):t=e}return n=n||function(){},"function"==typeof i&&(i=l,l=u),l?r(e,t,n,i):setTimeout((function(){r(e,t,n,i)}),4),o},o.config=function(t){return o(t)},t._defined=l,(i=function(t,e,n){e.splice||(n=e,e=[]),m(l,t)||m(u,t)||(u[t]=[t,e,n])}).amd={jQuery:!0}}(),e.requirejs=t,e.require=n,e.define=i)}(),e.define("almond",(function(){})),e.define("jquery",[],(function(){var e=t||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e})),e.define("select2/utils",["jquery"],(function(t){var e={};function n(t){var e=t.prototype,n=[];for(var i in e){"function"==typeof e[i]&&("constructor"!==i&&n.push(i))}return n}e.Extend=function(t,e){var n={}.hasOwnProperty;function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},e.Decorate=function(t,e){var i=n(e),r=n(t);function o(){var n=Array.prototype.unshift,i=e.prototype.constructor.length,r=t.prototype.constructor;i>0&&(n.call(arguments,t.prototype.constructor),r=e.prototype.constructor),r.apply(this,arguments)}e.displayName=t.displayName,o.prototype=new function(){this.constructor=o};for(var s=0;s<r.length;s++){var a=r[s];o.prototype[a]=t.prototype[a]}for(var l=function(t){var n=function(){};t in o.prototype&&(n=o.prototype[t]);var i=e.prototype[t];return function(){var t=Array.prototype.unshift;return t.call(arguments,n),i.apply(this,arguments)}},u=0;u<i.length;u++){var c=i[u];o.prototype[c]=l(c)}return o};var i=function(){this.listeners={}};return i.prototype.on=function(t,e){this.listeners=this.listeners||{},t in this.listeners?this.listeners[t].push(e):this.listeners[t]=[e]},i.prototype.trigger=function(t){var e=Array.prototype.slice;this.listeners=this.listeners||{},t in this.listeners&&this.invoke(this.listeners[t],e.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},i.prototype.invoke=function(t,e){for(var n=0,i=t.length;n<i;n++)t[n].apply(this,e)},e.Observable=i,e.generateChars=function(t){for(var e="",n=0;n<t;n++){e+=Math.floor(36*Math.random()).toString(36)}return e},e.bind=function(t,e){return function(){t.apply(e,arguments)}},e._convertData=function(t){for(var e in t){var n=e.split("-"),i=t;if(1!==n.length){for(var r=0;r<n.length;r++){var o=n[r];(o=o.substring(0,1).toLowerCase()+o.substring(1))in i||(i[o]={}),r==n.length-1&&(i[o]=t[e]),i=i[o]}delete t[e]}}return t},e.hasScroll=function(e,n){var i=t(n),r=n.style.overflowX,o=n.style.overflowY;return(r!==o||"hidden"!==o&&"visible"!==o)&&("scroll"===r||"scroll"===o||(i.innerHeight()<n.scrollHeight||i.innerWidth()<n.scrollWidth))},e.escapeMarkup=function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof t?t:String(t).replace(/[&<>"'\/\\]/g,(function(t){return e[t]}))},e.appendMany=function(e,n){if("1.7"===t.fn.jquery.substr(0,3)){var i=t();t.map(n,(function(t){i=i.add(t)})),n=i}e.append(n)},e})),e.define("select2/results",["jquery","./utils"],(function(t,e){function n(t,e,i){this.$element=t,this.data=i,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e,e},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(e){var n=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var i=t('<li role="treeitem" class="select2-results__option"></li>'),r=this.options.get("translations").get(e.message);i.append(n(r(e.args))),this.$results.append(i)},n.prototype.append=function(t){this.hideLoading();var e=[];if(null!=t.results&&0!==t.results.length){t.results=this.sort(t.results);for(var n=0;n<t.results.length;n++){var i=t.results[n],r=this.option(i);e.push(r)}this.$results.append(e)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},n.prototype.position=function(t,e){e.find(".select2-results").append(t)},n.prototype.sort=function(t){return this.options.get("sorter")(t)},n.prototype.setClasses=function(){var e=this;this.data.current((function(n){var i=t.map(n,(function(t){return t.id.toString()})),r=e.$results.find(".select2-results__option[aria-selected]");r.each((function(){var e=t(this),n=t.data(this,"data"),r=""+n.id;null!=n.element&&n.element.selected||null==n.element&&t.inArray(r,i)>-1?e.attr("aria-selected","true"):e.attr("aria-selected","false")}));var o=r.filter("[aria-selected=true]");o.length>0?o.first().trigger("mouseenter"):r.first().trigger("mouseenter")}))},n.prototype.showLoading=function(t){this.hideLoading();var e={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(t)},n=this.option(e);n.className+=" loading-results",this.$results.prepend(n)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(e){var n=document.createElement("li");n.className="select2-results__option";var i={role:"treeitem","aria-selected":"false"};for(var r in e.disabled&&(delete i["aria-selected"],i["aria-disabled"]="true"),null==e.id&&delete i["aria-selected"],null!=e._resultId&&(n.id=e._resultId),e.title&&(n.title=e.title),e.children&&(i.role="group",i["aria-label"]=e.text,delete i["aria-selected"]),i){var o=i[r];n.setAttribute(r,o)}if(e.children){var s=t(n),a=document.createElement("strong");a.className="select2-results__group";t(a);this.template(e,a);for(var l=[],u=0;u<e.children.length;u++){var c=e.children[u],h=this.option(c);l.push(h)}var d=t("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});d.append(l),s.append(a),s.append(d)}else this.template(e,n);return t.data(n,"data",e),n},n.prototype.bind=function(e,n){var i=this,r=e.id+"-results";this.$results.attr("id",r),e.on("results:all",(function(t){i.clear(),i.append(t.data),e.isOpen()&&i.setClasses()})),e.on("results:append",(function(t){i.append(t.data),e.isOpen()&&i.setClasses()})),e.on("query",(function(t){i.showLoading(t)})),e.on("select",(function(){e.isOpen()&&i.setClasses()})),e.on("unselect",(function(){e.isOpen()&&i.setClasses()})),e.on("open",(function(){i.$results.attr("aria-expanded","true"),i.$results.attr("aria-hidden","false"),i.setClasses(),i.ensureHighlightVisible()})),e.on("close",(function(){i.$results.attr("aria-expanded","false"),i.$results.attr("aria-hidden","true"),i.$results.removeAttr("aria-activedescendant")})),e.on("results:toggle",(function(){var t=i.getHighlightedResults();0!==t.length&&t.trigger("mouseup")})),e.on("results:select",(function(){var t=i.getHighlightedResults();if(0!==t.length){var e=t.data("data");"true"==t.attr("aria-selected")?i.trigger("close"):i.trigger("select",{data:e})}})),e.on("results:previous",(function(){var t=i.getHighlightedResults(),e=i.$results.find("[aria-selected]"),n=e.index(t);if(0!==n){var r=n-1;0===t.length&&(r=0);var o=e.eq(r);o.trigger("mouseenter");var s=i.$results.offset().top,a=o.offset().top,l=i.$results.scrollTop()+(a-s);0===r?i.$results.scrollTop(0):a-s<0&&i.$results.scrollTop(l)}})),e.on("results:next",(function(){var t=i.getHighlightedResults(),e=i.$results.find("[aria-selected]"),n=e.index(t)+1;if(!(n>=e.length)){var r=e.eq(n);r.trigger("mouseenter");var o=i.$results.offset().top+i.$results.outerHeight(!1),s=r.offset().top+r.outerHeight(!1),a=i.$results.scrollTop()+s-o;0===n?i.$results.scrollTop(0):s>o&&i.$results.scrollTop(a)}})),e.on("results:focus",(function(t){t.element.addClass("select2-results__option--highlighted")})),e.on("results:message",(function(t){i.displayMessage(t)})),t.fn.mousewheel&&this.$results.on("mousewheel",(function(t){var e=i.$results.scrollTop(),n=i.$results.get(0).scrollHeight-i.$results.scrollTop()+t.deltaY,r=t.deltaY>0&&e-t.deltaY<=0,o=t.deltaY<0&&n<=i.$results.height();r?(i.$results.scrollTop(0),t.preventDefault(),t.stopPropagation()):o&&(i.$results.scrollTop(i.$results.get(0).scrollHeight-i.$results.height()),t.preventDefault(),t.stopPropagation())})),this.$results.on("mouseup",".select2-results__option[aria-selected]",(function(e){var n=t(this),r=n.data("data");"true"!==n.attr("aria-selected")?i.trigger("select",{originalEvent:e,data:r}):i.options.get("multiple")?i.trigger("unselect",{originalEvent:e,data:r}):i.trigger("close")})),this.$results.on("mouseenter",".select2-results__option[aria-selected]",(function(e){var n=t(this).data("data");i.getHighlightedResults().removeClass("select2-results__option--highlighted"),i.trigger("results:focus",{data:n,element:t(this)})}))},n.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var t=this.getHighlightedResults();if(0!==t.length){var e=this.$results.find("[aria-selected]").index(t),n=this.$results.offset().top,i=t.offset().top,r=this.$results.scrollTop()+(i-n),o=i-n;r-=2*t.outerHeight(!1),e<=2?this.$results.scrollTop(0):(o>this.$results.outerHeight()||o<0)&&this.$results.scrollTop(r)}},n.prototype.template=function(e,n){var i=this.options.get("templateResult"),r=this.options.get("escapeMarkup"),o=i(e);null==o?n.style.display="none":"string"==typeof o?n.innerHTML=r(o):t(n).append(o)},n})),e.define("select2/keys",[],(function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}})),e.define("select2/selection/base",["jquery","../utils","../keys"],(function(t,e,n){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=t('<span class="select2-selection" role="combobox" aria-autocomplete="list" aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),e.attr("title",this.$element.attr("title")),e.attr("tabindex",this._tabindex),this.$selection=e,e},i.prototype.bind=function(t,e){var i=this,r=(t.id,t.id+"-results");this.container=t,this.$selection.on("focus",(function(t){i.trigger("focus",t)})),this.$selection.on("blur",(function(t){i.trigger("blur",t)})),this.$selection.on("keydown",(function(t){i.trigger("keypress",t),t.which===n.SPACE&&t.preventDefault()})),t.on("results:focus",(function(t){i.$selection.attr("aria-activedescendant",t.data._resultId)})),t.on("selection:update",(function(t){i.update(t.data)})),t.on("open",(function(){i.$selection.attr("aria-expanded","true"),i.$selection.attr("aria-owns",r),i._attachCloseHandler(t)})),t.on("close",(function(){i.$selection.attr("aria-expanded","false"),i.$selection.removeAttr("aria-activedescendant"),i.$selection.removeAttr("aria-owns"),i.$selection.focus(),i._detachCloseHandler(t)})),t.on("enable",(function(){i.$selection.attr("tabindex",i._tabindex)})),t.on("disable",(function(){i.$selection.attr("tabindex","-1")}))},i.prototype._attachCloseHandler=function(e){t(document.body).on("mousedown.select2."+e.id,(function(e){var n=t(e.target).closest(".select2");t(".select2.select2-container--open").each((function(){var e=t(this);this!=n[0]&&e.data("element").select2("close")}))}))},i.prototype._detachCloseHandler=function(e){t(document.body).off("mousedown.select2."+e.id)},i.prototype.position=function(t,e){e.find(".selection").append(t)},i.prototype.destroy=function(){this._detachCloseHandler(this.container)},i.prototype.update=function(t){throw new Error("The `update` method must be defined in child classes.")},i})),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],(function(t,e,n,i){function r(){r.__super__.constructor.apply(this,arguments)}return n.Extend(r,e),r.prototype.render=function(){var t=r.__super__.render.call(this);return t.addClass("select2-selection--single"),t.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),t},r.prototype.bind=function(t,e){var n=this;r.__super__.bind.apply(this,arguments);var i=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i),this.$selection.attr("aria-labelledby",i),this.$selection.on("mousedown",(function(t){1===t.which&&n.trigger("toggle",{originalEvent:t})})),this.$selection.on("focus",(function(t){})),this.$selection.on("blur",(function(t){})),t.on("selection:update",(function(t){n.update(t.data)}))},r.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},r.prototype.display=function(t){var e=this.options.get("templateSelection");return this.options.get("escapeMarkup")(e(t))},r.prototype.selectionContainer=function(){return t("<span></span>")},r.prototype.update=function(t){if(0!==t.length){var e=t[0],n=this.display(e),i=this.$selection.find(".select2-selection__rendered");i.empty().append(n),i.prop("title",this.$element.data("select2-selected-title")||e.title||e.text)}else this.clear()},r})),e.define("select2/selection/multiple",["jquery","./base","../utils"],(function(t,e,n){function i(t,e){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,e),i.prototype.render=function(){var t=i.__super__.render.call(this);return t.addClass("select2-selection--multiple"),t.html('<ul class="select2-selection__rendered"></ul>'),t},i.prototype.bind=function(e,n){var r=this;i.__super__.bind.apply(this,arguments),this.$selection.on("click",(function(t){r.trigger("toggle",{originalEvent:t})})),this.$selection.on("click",".select2-selection__choice__remove",(function(e){var n=t(this).parent().data("data");r.trigger("unselect",{originalEvent:e,data:n})}))},i.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},i.prototype.display=function(t){var e=this.options.get("templateSelection");return this.options.get("escapeMarkup")(e(t))},i.prototype.selectionContainer=function(){return t('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},i.prototype.update=function(t){if(this.clear(),0!==t.length){for(var e=[],i=0;i<t.length;i++){var r=t[i],o=this.display(r),s=this.selectionContainer();s.append(o),s.prop("title",this.$element.data("select2-selected-title")||r.title||r.text),s.data("data",r),e.push(s)}var a=this.$selection.find(".select2-selection__rendered");n.appendMany(a,e)}},i})),e.define("select2/selection/placeholder",["../utils"],(function(t){function e(t,e,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),t.call(this,e,n)}return e.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},e.prototype.createPlaceholder=function(t,e){var n=this.selectionContainer();return n.html(this.display(e)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},e.prototype.update=function(t,e){var n=1==e.length&&e[0].id!=this.placeholder.id;if(e.length>1||n)return t.call(this,e);this.clear();var i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},e})),e.define("select2/selection/allowClear",["jquery","../keys"],(function(t,e){function n(){}return n.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",(function(t){i._handleClear(t)})),e.on("keypress",(function(t){i._handleKeyboardClear(t,e)}))},n.prototype._handleClear=function(t,e){if(!this.options.get("disabled")){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){e.stopPropagation();for(var i=n.data("data"),r=0;r<i.length;r++){var o={data:i[r]};if(this.trigger("unselect",o),o.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle")}}},n.prototype._handleKeyboardClear=function(t,n,i){i.isOpen()||n.which!=e.DELETE&&n.which!=e.BACKSPACE||this._handleClear(n)},n.prototype.update=function(e,n){if(e.call(this,n),!(this.$selection.find(".select2-selection__placeholder").length>0||0===n.length)){var i=t('<span class="select2-selection__clear">&times;</span>');i.data("data",n),this.$selection.find(".select2-selection__rendered").prepend(i)}},n})),e.define("select2/isChrome",[],(function(){const t=window.chrome,e=window.navigator,n=e.vendor,i=void 0!==window.opr,r=e.userAgent.indexOf("Edge")>-1,o=e.userAgent.indexOf("Edg/")>-1;return!!e.userAgent.match("CriOS")||null!=t&&"Google Inc."===n&&!1===i&&!1===r&&!1===o})),e.define("select2/selection/search",["jquery","../utils","../keys","select2/isChrome"],(function(t,e,n,i){function r(t,e,n){t.call(this,e,n)}return r.prototype.render=function(e){var n=t('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="'+(i?"chrome-off":"off")+'" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></li>');return this.$searchContainer=n,this.$search=n.find("input"),e.call(this)},r.prototype.bind=function(t,e,i){var r=this;t.call(this,e,i),e.on("open",(function(){r.$search.attr("tabindex",0),r.$search.focus()})),e.on("close",(function(){r.$search.attr("tabindex",-1),r.$search.val(""),r.$search.focus()})),e.on("enable",(function(){r.$search.prop("disabled",!1)})),e.on("disable",(function(){r.$search.prop("disabled",!0)})),this.$selection.on("focusin",".select2-search--inline",(function(t){r.trigger("focus",t)})),this.$selection.on("focusout",".select2-search--inline",(function(t){r.trigger("blur",t)})),this.$selection.on("keydown",".select2-search--inline",(function(t){if(t.stopPropagation(),r.trigger("keypress",t),r._keyUpPrevented=t.isDefaultPrevented(),t.which===n.BACKSPACE&&""===r.$search.val()){var e=r.$searchContainer.prev(".select2-selection__choice");if(e.length>0){var i=e.data("data");r.searchRemoveChoice(i),t.preventDefault()}}})),this.$selection.on("input",".select2-search--inline",(function(t){r.$selection.off("keyup.search")})),this.$selection.on("keyup.search input",".select2-search--inline",(function(t){r.handleSearch(t)}))},r.prototype.createPlaceholder=function(t,e){this.$search.attr("placeholder",e.text)},r.prototype.update=function(t,e){this.$search.attr("placeholder",""),t.call(this,e),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch()},r.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},r.prototype.searchRemoveChoice=function(t,e){this.trigger("unselect",{data:e}),this.trigger("open"),this.$search.val(e.text+" ")},r.prototype.resizeSearch=function(){const t=this.$search.val()||this.$search.attr("placeholder")||"";this.$search.css("min-width",.51*(t.length+1)+"em")},r})),e.define("select2/selection/eventRelay",["jquery"],(function(t){function e(){}return e.prototype.bind=function(e,n,i){var r=this,o=["open","opening","close","closing","select","selecting","unselect","unselecting"],s=["opening","closing","selecting","unselecting"];e.call(this,n,i),n.on("*",(function(e,n){if(-1!==t.inArray(e,o)){n=n||{};var i=t.Event("select2:"+e,{params:n});r.$element.trigger(i),-1!==t.inArray(e,s)&&(n.prevented=i.isDefaultPrevented())}}))},e})),e.define("select2/translation",["jquery","require"],(function(t,e){function n(t){this.dict=t||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(t){return this.dict[t]},n.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},n._cache={},n.loadPath=function(t){if(!(t in n._cache)){var i=e(t);n._cache[t]=i}return new n(n._cache[t])},n})),e.define("select2/diacritics",[],(function(){return{"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"}})),e.define("select2/data/base",["../utils"],(function(t){function e(t,n){e.__super__.constructor.call(this)}return t.Extend(e,t.Observable),e.prototype.current=function(t){throw new Error("The `current` method must be defined in child classes.")},e.prototype.query=function(t,e){throw new Error("The `query` method must be defined in child classes.")},e.prototype.bind=function(t,e){},e.prototype.destroy=function(){},e.prototype.generateResultId=function(e,n){var i=e.id+"-result-";return i+=t.generateChars(4),null!=n.id?i+="-"+n.id.toString():i+="-"+t.generateChars(4),i},e})),e.define("select2/data/select",["./base","../utils","jquery"],(function(t,e,n){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,t),i.prototype.current=function(t){var e=[],i=this;this.$element.find(":selected").each((function(){var t=n(this),r=i.item(t);e.push(r)})),t(e)},i.prototype.select=function(t){var e=this;if(t.selected=!0,n(t.element).is("option"))return t.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current((function(i){var r=[];(t=[t]).push.apply(t,i);for(var o=0;o<t.length;o++){var s=t[o].id;-1===n.inArray(s,r)&&r.push(s)}e.$element.val(r),e.$element.trigger("change")}));else{var i=t.id;this.$element.val(i),this.$element.trigger("change")}},i.prototype.unselect=function(t){var e=this;if(this.$element.prop("multiple")){if(t.selected=!1,n(t.element).is("option"))return t.element.selected=!1,void this.$element.trigger("change");this.current((function(i){for(var r=[],o=0;o<i.length;o++){var s=i[o].id;s!==t.id&&-1===n.inArray(s,r)&&r.push(s)}e.$element.val(r),e.$element.trigger("change")}))}},i.prototype.bind=function(t,e){var n=this;this.container=t,t.on("select",(function(t){n.select(t.data)})),t.on("unselect",(function(t){n.unselect(t.data)}))},i.prototype.destroy=function(){this.$element.find("*").each((function(){n.removeData(this,"data")}))},i.prototype.query=function(t,e){var i=[],r=this;this.$element.children().each((function(){var e=n(this);if(e.is("option")||e.is("optgroup")){var o=r.item(e),s=r.matches(t,o);null!==s&&i.push(s)}})),e({results:i})},i.prototype.addOptions=function(t){e.appendMany(this.$element,t)},i.prototype.option=function(t){var e;t.children?(e=document.createElement("optgroup")).label=t.text:void 0!==(e=document.createElement("option")).textContent?e.textContent=t.text:e.innerText=t.text,t.id&&(e.value=t.id),t.disabled&&(e.disabled=!0),t.selected&&(e.selected=!0),t.title&&(e.title=t.title);var i=n(e),r=this._normalizeItem(t);return r.element=e,n.data(e,"data",r),i},i.prototype.item=function(t){var e={};if(null!=(e=n.data(t[0],"data")))return e;if(t.is("option"))e={id:t.val(),text:t.text(),disabled:t.prop("disabled"),selected:t.prop("selected"),title:t.prop("title")};else if(t.is("optgroup")){e={text:t.prop("label"),children:[],title:t.prop("title")};for(var i=t.children("option"),r=[],o=0;o<i.length;o++){var s=n(i[o]),a=this.item(s);r.push(a)}e.children=r}return(e=this._normalizeItem(e)).element=t[0],n.data(t[0],"data",e),e},i.prototype._normalizeItem=function(t){n.isPlainObject(t)||(t={id:t,text:t});return null!=(t=n.extend({},{text:""},t)).id&&(t.id=t.id.toString()),null!=t.text&&(t.text=t.text.toString()),null==t._resultId&&t.id&&null!=this.container&&(t._resultId=this.generateResultId(this.container,t)),n.extend({},{selected:!1,disabled:!1},t)},i.prototype.matches=function(t,e){return this.options.get("matcher")(t,e)},i})),e.define("select2/data/array",["./select","../utils","jquery"],(function(t,e,n){function i(t,e){var n=e.get("data")||[];i.__super__.constructor.call(this,t,e),this.addOptions(this.convertToOptions(n))}return e.Extend(i,t),i.prototype.select=function(t){var e=this.$element.find("option").filter((function(e,n){return n.value==t.id.toString()}));0===e.length&&(e=this.option(t),this.addOptions(e)),i.__super__.select.call(this,t)},i.prototype.convertToOptions=function(t){var i=this,r=this.$element.find("option"),o=r.map((function(){return i.item(n(this)).id})).get(),s=[];function a(t){return function(){return n(this).val()==t.id}}for(var l=0;l<t.length;l++){var u=this._normalizeItem(t[l]);if(n.inArray(u.id,o)>=0){var c=r.filter(a(u)),h=this.item(c),d=(n.extend(!0,{},h,u),this.option(h));c.replaceWith(d)}else{var p=this.option(u);if(u.children){var f=this.convertToOptions(u.children);e.appendMany(p,f)}s.push(p)}}return s},i})),e.define("select2/data/ajax",["./array","../utils","jquery"],(function(t,e,n){function i(e,n){this.ajaxOptions=this._applyDefaults(n.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),t.__super__.constructor.call(this,e,n)}return e.Extend(i,t),i.prototype._applyDefaults=function(t){var e={data:function(t){return{q:t.term}},transport:function(t,e,i){var r=n.ajax(t);return r.then(e),r.fail(i),r}};return n.extend({},e,t,!0)},i.prototype.processResults=function(t){return t},i.prototype.query=function(t,e){var i=this;null!=this._request&&(n.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var r=n.extend({type:"GET"},this.ajaxOptions);function o(){var o=r.transport(r,(function(r){var o=i.processResults(r,t);i.options.get("debug")&&window.console&&console.error&&(o&&o.results&&n.isArray(o.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),e(o)}),(function(){}));i._request=o}"function"==typeof r.url&&(r.url=r.url(t)),"function"==typeof r.data&&(r.data=r.data(t)),this.ajaxOptions.delay&&""!==t.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(o,this.ajaxOptions.delay)):o()},i})),e.define("select2/data/tags",["jquery"],(function(t){function e(e,n,i){var r=i.get("tags"),o=i.get("createTag");if(void 0!==o&&(this.createTag=o),e.call(this,n,i),t.isArray(r))for(var s=0;s<r.length;s++){var a=r[s],l=this._normalizeItem(a),u=this.option(l);this.$element.append(u)}}return e.prototype.query=function(t,e,n){var i=this;this._removeOldTags(),null!=e.term&&null==e.page?t.call(this,e,(function t(r,o){for(var s=r.results,a=0;a<s.length;a++){var l=s[a],u=null!=l.children&&!t({results:l.children},!0);if(l.text===e.term||u)return!o&&(r.data=s,void n(r))}if(o)return!0;var c=i.createTag(e);if(null!=c){var h=i.option(c);h.attr("data-select2-tag",!0),i.addOptions([h]),i.insertTag(s,c)}r.results=s,n(r)})):t.call(this,e,n)},e.prototype.createTag=function(e,n){var i=t.trim(n.term);return""===i?null:{id:i,text:i}},e.prototype.insertTag=function(t,e,n){e.unshift(n)},e.prototype._removeOldTags=function(e){this._lastTag;this.$element.find("option[data-select2-tag]").each((function(){this.selected||t(this).remove()}))},e})),e.define("select2/data/tokenizer",["jquery"],(function(t){function e(t,e,n){var i=n.get("tokenizer");void 0!==i&&(this.tokenizer=i),t.call(this,e,n)}return e.prototype.bind=function(t,e,n){t.call(this,e,n),this.$search=e.dropdown.$search||e.selection.$search||n.find(".select2-search__field")},e.prototype.query=function(t,e,n){var i=this;e.term=e.term||"";var r=this.tokenizer(e,this.options,(function(t){i.select(t)}));r.term!==e.term&&(this.$search.length&&(this.$search.val(r.term),this.$search.focus()),e.term=r.term),t.call(this,e,n)},e.prototype.tokenizer=function(e,n,i,r){for(var o=i.get("tokenSeparators")||[],s=n.term,a=0,l=this.createTag||function(t){return{id:t.term,text:t.term}};a<s.length;){var u=s[a];if(-1!==t.inArray(u,o)){var c=s.substr(0,a);r(l(t.extend({},n,{term:c}))),s=s.substr(a+1)||"",a=0}else a++}return{term:s}},e})),e.define("select2/data/minimumInputLength",[],(function(){function t(t,e,n){this.minimumInputLength=n.get("minimumInputLength"),t.call(this,e,n)}return t.prototype.query=function(t,e,n){e.term=e.term||"",e.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:e.term,params:e}}):t.call(this,e,n)},t})),e.define("select2/data/maximumInputLength",[],(function(){function t(t,e,n){this.maximumInputLength=n.get("maximumInputLength"),t.call(this,e,n)}return t.prototype.query=function(t,e,n){e.term=e.term||"",this.maximumInputLength>0&&e.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:e.term,params:e}}):t.call(this,e,n)},t})),e.define("select2/data/maximumSelectionLength",[],(function(){function t(t,e,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),t.call(this,e,n)}return t.prototype.query=function(t,e,n){var i=this;this.current((function(r){var o=null!=r?r.length:0;i.maximumSelectionLength>0&&o>=i.maximumSelectionLength?i.trigger("results:message",{message:"maximumSelected",args:{maximum:i.maximumSelectionLength}}):t.call(i,e,n)}))},t})),e.define("select2/dropdown",["jquery","./utils"],(function(t,e){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e,e},n.prototype.position=function(t,e){},n.prototype.destroy=function(){this.$dropdown.remove()},n})),e.define("select2/dropdown/search",["jquery","../utils"],(function(t,e){function n(){}return n.prototype.render=function(e){var n=e.call(this),i=t('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=i,this.$search=i.find("input"),n.prepend(i),n},n.prototype.bind=function(e,n,i){var r=this;e.call(this,n,i),this.$search.on("keydown",(function(t){r.trigger("keypress",t),r._keyUpPrevented=t.isDefaultPrevented()})),this.$search.on("input",(function(e){t(this).off("keyup")})),this.$search.on("keyup input",(function(t){r.handleSearch(t)})),n.on("open",(function(){r.$search.attr("tabindex",0),r.$search.focus(),window.setTimeout((function(){r.$search.focus()}),0)})),n.on("close",(function(){r.$search.attr("tabindex",-1),r.$search.val("")})),n.on("results:all",(function(t){null!=t.query.term&&""!==t.query.term||(r.showSearch(t)?r.$searchContainer.removeClass("select2-search--hide"):r.$searchContainer.addClass("select2-search--hide"))}))},n.prototype.handleSearch=function(t){if(!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},n.prototype.showSearch=function(t,e){return!0},n})),e.define("select2/dropdown/hidePlaceholder",[],(function(){function t(t,e,n,i){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),t.call(this,e,n,i)}return t.prototype.append=function(t,e){e.results=this.removePlaceholder(e.results),t.call(this,e)},t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.removePlaceholder=function(t,e){for(var n=e.slice(0),i=e.length-1;i>=0;i--){var r=e[i];this.placeholder.id===r.id&&n.splice(i,1)}return n},t})),e.define("select2/dropdown/infiniteScroll",["jquery"],(function(t){function e(t,e,n,i){this.lastParams={},t.call(this,e,n,i),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(t,e){this.$loadingMore.remove(),this.loading=!1,t.call(this,e),this.showLoadingMore(e)&&this.$results.append(this.$loadingMore)},e.prototype.bind=function(e,n,i){var r=this;e.call(this,n,i),n.on("query",(function(t){r.lastParams=t,r.loading=!0})),n.on("query:append",(function(t){r.lastParams=t,r.loading=!0})),this.$results.on("scroll",(function(){var e=t.contains(document.documentElement,r.$loadingMore[0]);!r.loading&&e&&(r.$results.offset().top+r.$results.outerHeight(!1)+50>=r.$loadingMore.offset().top+r.$loadingMore.outerHeight(!1)&&r.loadMore())}))},e.prototype.loadMore=function(){this.loading=!0;var e=t.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(t,e){return e.pagination&&e.pagination.more},e.prototype.createLoadingMore=function(){var e=t('<li class="option load-more" role="treeitem"></li>'),n=this.options.get("translations").get("loadingMore");return e.html(n(this.lastParams)),e},e})),e.define("select2/dropdown/attachBody",["jquery","../utils"],(function(t,e){function n(t,e,n){this.$dropdownParent=n.get("dropdownParent")||document.body,t.call(this,e,n)}return n.prototype.bind=function(t,e,n){var i=this,r=!1;t.call(this,e,n),e.on("open",(function(){i._showDropdown(),i._attachPositioningHandler(e),r||(r=!0,e.on("results:all",(function(){i._positionDropdown(),i._resizeDropdown()})),e.on("results:append",(function(){i._positionDropdown(),i._resizeDropdown()})))})),e.on("close",(function(){i._hideDropdown(),i._detachPositioningHandler(e)})),this.$dropdownContainer.on("mousedown",(function(t){t.stopPropagation()}))},n.prototype.position=function(t,e,n){e.attr("class",n.attr("class")),e.removeClass("select2"),e.addClass("select2-container--open"),e.css({position:"absolute",top:-999999}),this.$container=n},n.prototype.render=function(e){var n=t("<span></span>"),i=e.call(this);return n.append(i),this.$dropdownContainer=n,n},n.prototype._hideDropdown=function(t){this.$dropdownContainer.detach()},n.prototype._attachPositioningHandler=function(n){var i=this,r="scroll.select2."+n.id,o="resize.select2."+n.id,s="orientationchange.select2."+n.id,a=this.$container.parents().filter(e.hasScroll);a.each((function(){t(this).data("select2-scroll-position",{x:t(this).scrollLeft(),y:t(this).scrollTop()})})),a.on(r,(function(e){var n=t(this).data("select2-scroll-position");t(this).scrollTop(n.y)})),t(window).on(r+" "+o+" "+s,(function(t){i._positionDropdown(),i._resizeDropdown()}))},n.prototype._detachPositioningHandler=function(n){var i="scroll.select2."+n.id,r="resize.select2."+n.id,o="orientationchange.select2."+n.id;this.$container.parents().filter(e.hasScroll).off(i),t(window).off(i+" "+r+" "+o)},n.prototype._positionDropdown=function(){var e=t(window),n=this.$dropdown.hasClass("select2-dropdown--above"),i=this.$dropdown.hasClass("select2-dropdown--below"),r=null,o=(this.$container.position(),this.$container.offset());o.bottom=o.top+this.$container.outerHeight(!1);var s={height:this.$container.outerHeight(!1)};s.top=o.top,s.bottom=o.top+s.height;var a=this.$dropdown.outerHeight(!1),l=e.scrollTop(),u=e.scrollTop()+e.height(),c=l<o.top-a,h=u>o.bottom+a,d={left:o.left,top:s.bottom};n||i||(r="below"),h||!c||n?!c&&h&&n&&(r="below"):r="above",("above"==r||n&&"below"!==r)&&(d.top=s.top-a),null!=r&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+r),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+r)),this.$dropdownContainer.css(d)},n.prototype._resizeDropdown=function(){this.$dropdownContainer.width();var t={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(t.minWidth=t.width,t.width="auto"),this.$dropdown.css(t)},n.prototype._showDropdown=function(t){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},n})),e.define("select2/dropdown/minimumResultsForSearch",[],(function(){function t(e){for(var n=0,i=0;i<e.length;i++){var r=e[i];r.children?n+=t(r.children):n++}return n}function e(t,e,n,i){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),t.call(this,e,n,i)}return e.prototype.showSearch=function(e,n){return!(t(n.data.results)<this.minimumResultsForSearch)&&e.call(this,n)},e})),e.define("select2/dropdown/selectOnClose",[],(function(){function t(){this._closeRecursionLock=!1}return t.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),e.on("close",(function(){i._handleSelectOnClose()}))},t.prototype._handleSelectOnClose=function(){if(!this.__closeRecursionLock){var t=this.getHighlightedResults();if(!(t.length<1)){var e=t.data("data");e.element||(this.__closeRecursionLock=!0,this.trigger("select",{data:e}),this.__closeRecursionLock=!1)}}},t})),e.define("select2/dropdown/closeOnSelect",[],(function(){function t(){}return t.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),e.on("select",(function(t){i._selectTriggered(t)})),e.on("unselect",(function(t){i._selectTriggered(t)}))},t.prototype._selectTriggered=function(t,e){var n=e.originalEvent;n&&n.ctrlKey||this.trigger("close")},t})),e.define("select2/i18n/en",[],(function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(t){var e=t.input.length-t.maximum,n="Please delete "+e+" character";return 1!=e&&(n+="s"),n},inputTooShort:function(t){return"Please enter "+(t.minimum-t.input.length)+" or more characters"},loadingMore:function(){return"Loading more results…"},maximumSelected:function(t){var e="You can only select "+t.maximum+" item";return 1!=t.maximum&&(e+="s"),e},noResults:function(){return"No results found"},searching:function(){return"Searching…"}}})),e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],(function(t,e,n,i,r,o,s,a,l,u,c,h,d,p,f,m,g,v,y,b,w,_,x,k,E,A,C,S,O){function T(){this.reset()}return T.prototype.apply=function(h){if(null==(h=t.extend({},this.defaults,h)).dataAdapter){if(null!=h.ajax?h.dataAdapter=f:null!=h.data?h.dataAdapter=p:h.dataAdapter=d,h.minimumInputLength>0&&(h.dataAdapter=u.Decorate(h.dataAdapter,v)),h.maximumInputLength>0&&(h.dataAdapter=u.Decorate(h.dataAdapter,y)),h.maximumSelectionLength>0&&(h.dataAdapter=u.Decorate(h.dataAdapter,b)),h.tags&&(h.dataAdapter=u.Decorate(h.dataAdapter,m)),null==h.tokenSeparators&&null==h.tokenizer||(h.dataAdapter=u.Decorate(h.dataAdapter,g)),null!=h.query){var O=e(h.amdBase+"compat/query");h.dataAdapter=u.Decorate(h.dataAdapter,O)}if(null!=h.initSelection){var T=e(h.amdBase+"compat/initSelection");h.dataAdapter=u.Decorate(h.dataAdapter,T)}}if(null==h.resultsAdapter&&(h.resultsAdapter=n,null!=h.ajax&&(h.resultsAdapter=u.Decorate(h.resultsAdapter,k)),null!=h.placeholder&&(h.resultsAdapter=u.Decorate(h.resultsAdapter,x)),h.selectOnClose&&(h.resultsAdapter=u.Decorate(h.resultsAdapter,C))),null==h.dropdownAdapter){if(h.multiple)h.dropdownAdapter=w;else{var P=u.Decorate(w,_);h.dropdownAdapter=P}if(0!==h.minimumResultsForSearch&&(h.dropdownAdapter=u.Decorate(h.dropdownAdapter,A)),h.closeOnSelect&&(h.dropdownAdapter=u.Decorate(h.dropdownAdapter,S)),null!=h.dropdownCssClass||null!=h.dropdownCss||null!=h.adaptDropdownCssClass){var $=e(h.amdBase+"compat/dropdownCss");h.dropdownAdapter=u.Decorate(h.dropdownAdapter,$)}h.dropdownAdapter=u.Decorate(h.dropdownAdapter,E)}if(null==h.selectionAdapter){if(h.multiple?h.selectionAdapter=r:h.selectionAdapter=i,null!=h.placeholder&&(h.selectionAdapter=u.Decorate(h.selectionAdapter,o)),h.allowClear&&(h.selectionAdapter=u.Decorate(h.selectionAdapter,s)),h.multiple&&(h.selectionAdapter=u.Decorate(h.selectionAdapter,a)),null!=h.containerCssClass||null!=h.containerCss||null!=h.adaptContainerCssClass){var j=e(h.amdBase+"compat/containerCss");h.selectionAdapter=u.Decorate(h.selectionAdapter,j)}h.selectionAdapter=u.Decorate(h.selectionAdapter,l)}if("string"==typeof h.language)if(h.language.indexOf("-")>0){var R=h.language.split("-")[0];h.language=[h.language,R]}else h.language=[h.language];if(t.isArray(h.language)){var D=new c;h.language.push("en");for(var L=h.language,I=0;I<L.length;I++){var N=L[I],F={};try{F=c.loadPath(N)}catch(t){try{N=this.defaults.amdLanguageBase+N,F=c.loadPath(N)}catch(t){h.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+N+'" could not be automatically loaded. A fallback will be used instead.');continue}}D.extend(F)}h.translations=D}else{var q=c.loadPath(this.defaults.amdLanguageBase+"en"),M=new c(h.language);M.extend(q),h.translations=M}return h},T.prototype.reset=function(){function e(t){return t.replace(/[^\u0000-\u007E]/g,(function(t){return h[t]||t}))}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:u.escapeMarkup,language:O,matcher:function n(i,r){if(""===t.trim(i.term))return r;if(r.children&&r.children.length>0){for(var o=t.extend(!0,{},r),s=r.children.length-1;s>=0;s--){null==n(i,r.children[s])&&o.children.splice(s,1)}return o.children.length>0?o:n(i,o)}var a=e(r.text).toUpperCase(),l=e(i.term).toUpperCase();return a.indexOf(l)>-1?r:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(t){return t},templateResult:function(t){return t.text},templateSelection:function(t){return t.text},theme:"default",width:"resolve"}},T.prototype.set=function(e,n){var i={};i[t.camelCase(e)]=n;var r=u._convertData(i);t.extend(this.defaults,r)},new T})),e.define("select2/options",["require","jquery","./defaults","./utils"],(function(t,e,n,i){function r(e,r){if(this.options=e,null!=r&&this.fromElement(r),this.options=n.apply(this.options),r&&r.is("input")){var o=t(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=i.Decorate(this.options.dataAdapter,o)}}return r.prototype.fromElement=function(t){var n=["select2"];null==this.options.multiple&&(this.options.multiple=t.prop("multiple")),null==this.options.disabled&&(this.options.disabled=t.prop("disabled")),null==this.options.language&&(t.prop("lang")?this.options.language=t.prop("lang").toLowerCase():t.closest("[lang]").prop("lang")&&(this.options.language=t.closest("[lang]").prop("lang"))),null==this.options.dir&&(t.prop("dir")?this.options.dir=t.prop("dir"):t.closest("[dir]").prop("dir")?this.options.dir=t.closest("[dir]").prop("dir"):this.options.dir="ltr"),t.prop("disabled",this.options.disabled),t.prop("multiple",this.options.multiple),t.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),t.data("data",t.data("select2Tags")),t.data("tags",!0)),t.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),t.attr("ajax--url",t.data("ajaxUrl")),t.data("ajax--url",t.data("ajaxUrl")));var r={};r=e.fn.jquery&&"1."==e.fn.jquery.substr(0,2)&&t[0].dataset?e.extend(!0,{},t[0].dataset,t.data()):t.data();var o=e.extend(!0,{},r);for(var s in o=i._convertData(o))e.inArray(s,n)>-1||(e.isPlainObject(this.options[s])?e.extend(this.options[s],o[s]):this.options[s]=o[s]);return this},r.prototype.get=function(t){return this.options[t]},r.prototype.set=function(t,e){this.options[t]=e},r})),e.define("select2/core",["jquery","./options","./utils","./keys"],(function(t,e,n,i){var r=function(t,n){null!=t.data("select2")&&t.data("select2").destroy(),this.$element=t,this.id=this._generateId(t),n=n||{},this.options=new e(n,t),r.__super__.constructor.call(this);var i=t.attr("tabindex")||0;t.data("old-tabindex",i),t.attr("tabindex","-1");var o=this.options.get("dataAdapter");this.dataAdapter=new o(t,this.options);var s=this.render();this._placeContainer(s);var a=this.options.get("selectionAdapter");this.selection=new a(t,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,s);var l=this.options.get("dropdownAdapter");this.dropdown=new l(t,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,s);var u=this.options.get("resultsAdapter");this.results=new u(t,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var c=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current((function(t){c.trigger("selection:update",{data:t})})),t.addClass("select2-hidden-accessible"),t.attr("aria-hidden","true"),this._syncAttributes(),t.data("select2",this)};return n.Extend(r,n.Observable),r.prototype._generateId=function(t){return"select2-"+(null!=t.attr("id")?t.attr("id"):null!=t.attr("name")?t.attr("name")+"-"+n.generateChars(2):n.generateChars(4))},r.prototype._placeContainer=function(t){t.insertAfter(this.$element);var e=this._resolveWidth(this.$element,this.options.get("width"));null!=e&&t.css("width",e)},r.prototype._resolveWidth=function(t,e){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==e){var i=this._resolveWidth(t,"style");return null!=i?i:this._resolveWidth(t,"element")}if("element"==e){var r=t.outerWidth(!1);return r<=0?"auto":r+"px"}if("style"==e){var o=t.attr("style");if("string"!=typeof o)return null;for(var s=o.split(";"),a=0,l=s.length;a<l;a+=1){var u=s[a].replace(/\s/g,"").match(n);if(null!==u&&u.length>=1)return u[1]}return null}return e},r.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},r.prototype._registerDomEvents=function(){var e=this;this.$element.on("change.select2",(function(){e.dataAdapter.current((function(t){e.trigger("selection:update",{data:t})}))})),this._sync=n.bind(this._syncAttributes,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._sync);var i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=i?(this._observer=new i((function(n){t.each(n,e._sync)})),this._observer.observe(this.$element[0],{attributes:!0,subtree:!1})):this.$element[0].addEventListener&&this.$element[0].addEventListener("DOMAttrModified",e._sync,!1)},r.prototype._registerDataEvents=function(){var t=this;this.dataAdapter.on("*",(function(e,n){t.trigger(e,n)}))},r.prototype._registerSelectionEvents=function(){var e=this,n=["toggle"];this.selection.on("toggle",(function(){e.toggleDropdown()})),this.selection.on("*",(function(i,r){-1===t.inArray(i,n)&&e.trigger(i,r)}))},r.prototype._registerDropdownEvents=function(){var t=this;this.dropdown.on("*",(function(e,n){t.trigger(e,n)}))},r.prototype._registerResultsEvents=function(){var t=this;this.results.on("*",(function(e,n){t.trigger(e,n)}))},r.prototype._registerEvents=function(){var t=this;this.on("open",(function(){t.$container.addClass("select2-container--open")})),this.on("close",(function(){t.$container.removeClass("select2-container--open")})),this.on("enable",(function(){t.$container.removeClass("select2-container--disabled")})),this.on("disable",(function(){t.$container.addClass("select2-container--disabled")})),this.on("focus",(function(){t.$container.addClass("select2-container--focus")})),this.on("blur",(function(){t.$container.removeClass("select2-container--focus")})),this.on("query",(function(e){t.isOpen()||t.trigger("open"),this.dataAdapter.query(e,(function(n){t.trigger("results:all",{data:n,query:e})}))})),this.on("query:append",(function(e){this.dataAdapter.query(e,(function(n){t.trigger("results:append",{data:n,query:e})}))})),this.on("keypress",(function(e){var n=e.which;t.isOpen()?n===i.ENTER?(t.trigger("results:select"),e.preventDefault()):n===i.SPACE&&e.ctrlKey?(t.trigger("results:toggle"),e.preventDefault()):n===i.UP?(t.trigger("results:previous"),e.preventDefault()):n===i.DOWN?(t.trigger("results:next"),e.preventDefault()):n!==i.ESC&&n!==i.TAB||(t.close(),e.preventDefault()):(n===i.ENTER||n===i.SPACE||(n===i.DOWN||n===i.UP)&&e.altKey)&&(t.open(),e.preventDefault())}))},r.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable")):this.trigger("enable")},r.prototype.trigger=function(t,e){var n=r.__super__.trigger,i={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(t in i){var o=i[t],s={prevented:!1,name:t,args:e};if(n.call(this,o,s),s.prevented)return void(e.prevented=!0)}n.call(this,t,e)},r.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},r.prototype.open=function(){this.isOpen()||(this.trigger("query",{}),this.trigger("open"))},r.prototype.close=function(){this.isOpen()&&this.trigger("close")},r.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},r.prototype.enable=function(t){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=t&&0!==t.length||(t=[!0]);var e=!t[0];this.$element.prop("disabled",e)},r.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current((function(e){t=e})),t},r.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();var n=e[0];t.isArray(n)&&(n=t.map(n,(function(t){return t.toString()}))),this.$element.val(n).trigger("change")},r.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._sync),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&this.$element[0].removeEventListener("DOMAttrModified",this._sync,!1),this._sync=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},r.prototype.render=function(){var e=t('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container.addClass("select2-container--"+this.options.get("theme")),e.data("element",this.$element),e},r})),e.define("jquery.select2",["jquery","require","./select2/core","./select2/defaults"],(function(t,e,n,i){if(e("jquery.mousewheel"),null==t.fn.select2){var r=["open","close","destroy"];t.fn.select2=function(e){if("object"==typeof(e=e||{}))return this.each((function(){var i=t.extend({},e,!0);new n(t(this),i)})),this;if("string"==typeof e){var i=this.data("select2");null==i&&window.console&&console.error&&console.error("The select2('"+e+"') method was called on an element that is not using Select2.");var o=Array.prototype.slice.call(arguments,1),s=i[e](o);return t.inArray(e,r)>-1?this:s}throw new Error("Invalid arguments for Select2: "+e)}}return null==t.fn.select2.defaults&&(t.fn.select2.defaults=i),n})),e.define("jquery.mousewheel",["jquery"],(function(t){return t})),{define:e.define,require:e.require}}(),n=e.require("jquery.select2");return t.fn.select2.amd=e,n})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Ractive=e()}(this,(function(){"use strict";var t,e,n,i,r,o,s,a,l,u,c,h,d,p,f,m,g={el:void 0,append:!1,template:{v:3,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],interpolate:!1,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1},v={linear:function(t){return t},easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}};t="object"==typeof document,e="undefined"!=typeof navigator&&/jsDom/.test(navigator.appName),n="undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply;try{Object.defineProperty({},"test",{value:0}),i=!0}catch(t){i=!1}function y(t){var e;if(t&&"boolean"!=typeof t)return"undefined"!=typeof window&&document&&t?t.nodeType?t:"string"==typeof t&&(!(e=document.getElementById(t))&&document.querySelector&&(e=document.querySelector(t)),e&&e.nodeType)?e:t[0]&&t[0].nodeType?t[0]:null:null}if(r={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},o="undefined"!=typeof document&&(document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")),s=["o","ms","moz","webkit"],a=o?function(t,e){return e&&e!==r.html?document.createElementNS(e,t):document.createElement(t)}:function(t,e){if(e&&e!==r.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(t)},t){for(u=a("div"),m=function(t){return function(e,n){return e[t](n)}},p=(c=["matches","matchesSelector"]).length;p--&&!l;)if(u[h=c[p]])l=m(h);else for(f=s.length;f--;)if(d=s[p]+h.substr(0,1).toUpperCase()+h.substring(1),u[d]){l=m(d);break}l||(l=function(t,e){var n,i,r;for((i=t.parentNode)||(u.innerHTML="",i=u,t=t.cloneNode(),u.appendChild(t)),r=(n=i.querySelectorAll(e)).length;r--;)if(n[r]===t)return!0;return!1})}else l=null;function b(t){return t&&"unknown"!=typeof t.parentNode&&t.parentNode&&t.parentNode.removeChild(t),t}function w(t){return null!=t&&t.toString?t:""}var _,x,k,E;try{Object.defineProperty({},"test",{value:0}),t&&Object.defineProperty(document.createElement("div"),"test",{value:0}),x=Object.defineProperty}catch(t){x=function(t,e,n){t[e]=n.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(t){throw t}t&&Object.defineProperties(a("div"),{test:{value:0}}),k=Object.defineProperties}catch(t){k=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&x(t,n,e[n])}}try{Object.create(null),_=Object.create}catch(t){E=function(){},_=function(t,e){var n;return null===t?{}:(E.prototype=t,n=new E,e&&Object.defineProperties(n,e),n)}}function A(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(var r,o;o=n.shift();)for(r in o)C.call(o,r)&&(t[r]=o[r]);return t}var C=Object.prototype.hasOwnProperty,S=Object.prototype.toString,O=/^\[object (?:Array|FileList)\]$/;function T(t){return"[object Array]"===S.call(t)}function P(t){return O.test(S.call(t))}function $(t,e){return null===t&&null===e||"object"!=typeof t&&"object"!=typeof e&&t===e}function j(t){return!isNaN(parseFloat(t))&&isFinite(t)}function R(t){return t&&"[object Object]"===S.call(t)}var D,L,I,N,F=function(){},q={};function M(t,e){return t.replace(/%s/g,(function(){return e.shift()}))}function U(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];throw t=M(t,n),new Error(t)}function z(){fd.DEBUG&&D.apply(null,arguments)}function W(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];t=M(t,n),L(t,n)}function V(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];t=M(t,n),q[t]||(q[t]=!0,L(t,n))}function B(){fd.DEBUG&&W.apply(null,arguments)}function H(){fd.DEBUG&&V.apply(null,arguments)}n?(N=["%cRactive.js %c0.7.3 %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"],I=function(){var t=!!console.groupCollapsed;console[t?"groupCollapsed":"log"].apply(console,N),console.log("You're running Ractive 0.7.3 in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n"),t&&console.groupEnd(N),I=F},L=function(t,e){if(I(),"object"==typeof e[e.length-1]){var n=e.pop(),i=n?n.ractive:null;if(i){var r,o=void 0;i.component&&(o=i.component.name)&&(t="<"+o+"> "+t),(r=n.node||i.fragment&&i.fragment.rendered&&i.find("*"))&&e.push(r)}}console.warn.apply(console,["%cRactive.js: %c"+t,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(e))},D=function(){console.log.apply(console,arguments)}):L=D=I=F;var Z='A function was specified for "%s" %s, but no %s was returned',G=function(t,e){return'Missing "'+t+'" '+e+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+e+"s"};function K(t,e,n){var i=Q(t,e,n);return i?i[t][n]:null}function Q(t,e,n){for(;e;){if(n in e[t])return e;if(e.isolated)return null;e=e.parent}}var Y=function(t,e,n,i){if(t===e)return J(e);if(i){var r=K("interpolators",n,i);if(r)return r(t,e)||J(e);U(G(i,"interpolator"))}return X.number(t,e)||X.array(t,e)||X.object(t,e)||J(e)};function J(t){return function(){return t}}var X={number:function(t,e){var n;return j(t)&&j(e)?(n=(e=+e)-(t=+t))?function(e){return t+e*n}:function(){return t}:null},array:function(t,e){var n,i,r,o;if(!T(t)||!T(e))return null;for(n=[],i=[],o=r=Math.min(t.length,e.length);o--;)i[o]=Y(t[o],e[o]);for(o=r;o<t.length;o+=1)n[o]=t[o];for(o=r;o<e.length;o+=1)n[o]=e[o];return function(t){for(var e=r;e--;)n[e]=i[e](t);return n}},object:function(t,e){var n,i,r,o,s;if(!R(t)||!R(e))return null;for(s in n=[],o={},r={},t)C.call(t,s)&&(C.call(e,s)?(n.push(s),r[s]=Y(t[s],e[s])):o[s]=t[s]);for(s in e)C.call(e,s)&&!C.call(t,s)&&(o[s]=e[s]);return i=n.length,function(t){for(var e,s=i;s--;)e=n[s],o[e]=r[e](t);return o}}},tt=function(t){var e,n,i,r,o,s;e=t.split("."),(n=et[e.length])||(n=function(t){var e,n,i,r,o,s,a,l,u="";if(!et[t]){for(i=[];u.length<t;)u+=1;for(e=parseInt(u,2),r=function(t){return"1"===t},o=0;o<=e;o+=1){for(n=o.toString(2);n.length<t;)n="0"+n;for(l=[],a=n.length,s=0;s<a;s++)l.push(r(n[s]));i[o]=l}et[t]=i}return et[t]}(e.length));o=[],i=function(t,n){return t?"*":e[n]},r=n.length;for(;r--;)s=n[r].map(i).join("."),o.hasOwnProperty(s)||(o.push(s),o[s]=!0);return o},et={};var nt=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,it=/\*/,rt={},ot=function(t){var e,n,i=t.split(".");this.str=t,"@"===t[0]&&(this.isSpecial=!0,this.value=(n=(e=t).slice(2),"i"===e[1]&&j(n)?+n:n)),this.firstKey=i[0],this.lastKey=i.pop(),this.isPattern=it.test(t),this.parent=""===t?null:at(i.join(".")),this.isRoot=!t};function st(t,e,n,i){var r=t[e];if(!r||!r.equalsOrStartsWith(i)&&r.equalsOrStartsWith(n))return t[e]=r?r.replace(n,i):i,!0}function at(t){return null==t?t:(rt.hasOwnProperty(t)||(rt[t]=new ot(t)),rt[t])}function lt(t,e){var n,i,r;for(n=e.str.split("."),r=[ht];i=n.shift();)"*"===i?r=r.reduce(o,[]):r[0]===ht?r[0]=at(i):r=r.map(ut(i));return r;function o(e,n){var i,r,o;return n.isRoot?o=[].concat(Object.keys(t.viewmodel.data),Object.keys(t.viewmodel.mappings),Object.keys(t.viewmodel.computations)):(i=t.viewmodel.wrapped[n.str],o=(r=i?i.get():t.viewmodel.get(n))?Object.keys(r):null),o&&o.forEach((function(t){"_ractive"===t&&T(r)||e.push(n.join(t))})),e}}function ut(t){return function(e){return e.join(t)}}function ct(t){return t?t.replace(nt,".$1"):""}ot.prototype={equalsOrStartsWith:function(t){return t===this||this.startsWith(t)},join:function(t){return at(this.isRoot?String(t):this.str+"."+t)},replace:function(t,e){return this===t?e:this.startsWith(t)?null===e?e:at(this.str.replace(t.str+".",e.str+".")):void 0},startsWith:function(t){return!!t&&(t&&this.str.substr(0,t.str.length+1)===t.str+".")},toString:function(){throw new Error("Bad coercion")},valueOf:function(){throw new Error("Bad coercion")},wildcardMatches:function(){return this._wildcardMatches||(this._wildcardMatches=tt(this.str))}};var ht=at(""),dt=function(t,e,n){if("string"!=typeof e||!j(n))throw new Error("Bad arguments");var i,r=void 0;if(/\*/.test(e))return r={},lt(t,at(ct(e))).forEach((function(e){var i=t.viewmodel.get(e);if(!j(i))throw new Error(pt);r[e.str]=i+n})),t.set(r);if(!j(i=t.get(e)))throw new Error(pt);return t.set(e,+i+n)},pt="Cannot add to a non-numeric value";var ft,mt=function(t,e){return dt(this,t,void 0===e?1:+e)};"undefined"==typeof window?ft=null:(!function(t,e,n){var i,r;if(!n.requestAnimationFrame){for(i=0;i<t.length&&!n.requestAnimationFrame;++i)n.requestAnimationFrame=n[t[i]+"RequestAnimationFrame"];n.requestAnimationFrame||(r=n.setTimeout,n.requestAnimationFrame=function(t){var n,i,o;return n=Date.now(),i=Math.max(0,16-(n-e)),o=r((function(){t(n+i)}),i),e=n+i,o})}}(s,0,window),ft=window.requestAnimationFrame);var gt=ft,vt="undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()},yt={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},complete:{deprecated:"complete",replacement:"oncomplete"}};function bt(t){this.event=t,this.method="on"+t,this.deprecate=yt[t]}bt.prototype.fire=function(t,e){function n(n){if(t[n])return e?t[n](e):t[n](),!0}n(this.method),!t[this.method]&&this.deprecate&&n(this.deprecate.deprecated)&&(this.deprecate.message?B(this.deprecate.message):B('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',this.deprecate.deprecated,this.deprecate.replacement)),e?t.fire(this.event,e):t.fire(this.event)};var wt=bt;function _t(t,e){-1===t.indexOf(e)&&t.push(e)}function xt(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]==e)return!0;return!1}function kt(t,e){var n;if(!T(t)||!T(e))return!1;if(t.length!==e.length)return!1;for(n=t.length;n--;)if(t[n]!==e[n])return!1;return!0}function Et(t){return"string"==typeof t?[t]:void 0===t?[]:t}function At(t){return t[t.length-1]}function Ct(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}function St(t){for(var e=[],n=t.length;n--;)e[n]=t[n];return e}var Ot,Tt={},Pt={},$t={};"function"==typeof Promise?Ot=Promise:((Ot=function(t){var e,n,i,r,o,s=[],a=[],l=Tt;i=(n=function(t){return function(n){l===Tt&&Rt(e=function(t,e){return function(){for(var n;n=t.shift();)n(e)}}((l=t)===Pt?s:a,n))}})(Pt),r=n($t);try{t(i,r)}catch(t){r(t)}return(o={then:function(t,n){var i=new Ot((function(r,o){var u=function(t,e,n){"function"==typeof t?e.push((function(e){var n;try{n=t(e),Dt(i,n,r,o)}catch(t){o(t)}})):e.push(n)};u(t,s,r),u(n,a,o),l!==Tt&&Rt(e)}));return i}}).catch=function(t){return this.then(null,t)},o}).all=function(t){return new Ot((function(e,n){var i,r,o,s=[];if(t.length)for(o=function(t,r){t&&"function"==typeof t.then?t.then((function(t){s[r]=t,--i||e(s)}),n):(s[r]=t,--i||e(s))},i=r=t.length;r--;)o(t[r],r);else e(s)}))},Ot.resolve=function(t){return new Ot((function(e){e(t)}))},Ot.reject=function(t){return new Ot((function(e,n){n(t)}))});var jt=Ot;function Rt(t){setTimeout(t,0)}function Dt(t,e,n,i){var r;if(e===t)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(e instanceof Ot)e.then(n,i);else if(!e||"object"!=typeof e&&"function"!=typeof e)n(e);else{try{r=e.then}catch(t){return void i(t)}if("function"==typeof r){var o,s,a;s=function(e){o||(o=!0,Dt(t,e,n,i))},a=function(t){o||(o=!0,i(t))};try{r.call(e,s,a)}catch(t){if(!o)return i(t),void(o=!0)}}else n(e)}}var Lt=function(t){do{if(void 0!==t.context)return t.context}while(t=t.parent);return ht},It=function(t,e,n){var i;"~/"===(e=ct(e)).substr(0,2)?(i=at(e.substring(2)),Ft(t,i.firstKey)):"."===e[0]?(i=function(t,e){var n;null!=t&&"string"!=typeof t&&(t=t.str);if("."===e)return at(t);if(n=t?t.split("."):[],"../"===e.substr(0,3)){for(;"../"===e.substr(0,3);){if(!n.length)throw new Error('Could not resolve reference - too many "../" prefixes');n.pop(),e=e.substring(3)}return n.push(e),at(n.join("."))}if(!t)return at(e.replace(/^\.\/?/,""));return at(t+e.replace(/^\.\//,"."))}(Lt(n),e))&&Ft(t,i.firstKey):i=Nt(t,at(e),n);return i};function Nt(t,e,n,i){var r,o,s,a,l;if(e.isRoot)return e;for(o=e.firstKey;n;)if(r=n.context,n=n.parent,r&&(a=!0,(s=t.viewmodel.get(r))&&("object"==typeof s||"function"==typeof s)&&o in s))return r.join(e.str);return qt(t.viewmodel,o)?e:t.parent&&!t.isolated&&(a=!0,n=t.component.parentFragment,o=at(o),l=Nt(t.parent,o,n,!0))?(t.viewmodel.map(o,{origin:t.parent.viewmodel,keypath:l}),e):i||a?void 0:(t.viewmodel.set(e,void 0),e)}function Ft(t,e){var n;!t.parent||t.isolated||qt(t.viewmodel,e)||(e=at(e),(n=Nt(t.parent,e,t.component.parentFragment,!0))&&t.viewmodel.map(e,{origin:t.parent.viewmodel,keypath:n}))}function qt(t,e){return""===e||e in t.data||e in t.computations||e in t.mappings}function Mt(t){t.teardown()}function Ut(t){t.unbind()}function zt(t){t.unrender()}function Wt(t){t.cancel()}var Vt=function(t,e){this.callback=t,this.parent=e,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.decoratorQueue=[],this.outrosComplete=!1,e&&e.addChild(this)};function Bt(t){t.detach()}function Ht(t){t.detachNodes()}function Zt(t){!t.ready||t.outros.length||t.outroChildren||(t.outrosComplete||(t.parent?t.parent.decrementOutros(t):t.detachNodes(),t.outrosComplete=!0),t.intros.length||t.totalChildren||("function"==typeof t.callback&&t.callback(),t.parent&&t.parent.decrementTotal()))}Vt.prototype={addChild:function(t){this.children.push(t),this.totalChildren+=1,this.outroChildren+=1},decrementOutros:function(){this.outroChildren-=1,Zt(this)},decrementTotal:function(){this.totalChildren-=1,Zt(this)},add:function(t){(t.isIntro?this.intros:this.outros).push(t)},addDecorator:function(t){this.decoratorQueue.push(t)},remove:function(t){Ct(t.isIntro?this.intros:this.outros,t),Zt(this)},init:function(){this.ready=!0,Zt(this)},detachNodes:function(){this.decoratorQueue.forEach(Mt),this.detachQueue.forEach(Bt),this.children.forEach(Ht)}};var Gt,Kt=Vt,Qt=[],Yt=new wt("change"),Jt={start:function(t,e){var n,i;return e&&(n=new jt((function(t){return i=t}))),Gt={previousBatch:Gt,transitionManager:new Kt(i,Gt&&Gt.transitionManager),views:[],tasks:[],ractives:[],instance:t},t&&Gt.ractives.push(t),n},end:function(){Xt(),Gt.transitionManager.init(),!Gt.previousBatch&&Gt.instance&&(Gt.instance.viewmodel.changes=[]),Gt=Gt.previousBatch},addRactive:function(t){Gt&&_t(Gt.ractives,t)},registerTransition:function(t){t._manager=Gt.transitionManager,Gt.transitionManager.add(t)},registerDecorator:function(t){Gt.transitionManager.addDecorator(t)},addView:function(t){Gt.views.push(t)},addUnresolved:function(t){Qt.push(t)},removeUnresolved:function(t){Ct(Qt,t)},detachWhenReady:function(t){Gt.transitionManager.detachQueue.push(t)},scheduleTask:function(t,e){var n;if(Gt){for(n=Gt;e&&n.previousBatch;)n=n.previousBatch;n.tasks.push(t)}else t()}};function Xt(){for(var t,e,n;Gt.ractives.length;)(n=(e=Gt.ractives.pop()).viewmodel.applyChanges())&&Yt.fire(e,n);for(function(){var t,e,n,i;t=Qt.length;for(;t--;)(e=Qt[t]).keypath?Qt.splice(t,1):(n=It(e.root,e.ref,e.parentFragment))&&((i||(i=[])).push({item:e,keypath:n}),Qt.splice(t,1));i&&i.forEach(te)}(),t=0;t<Gt.views.length;t+=1)Gt.views[t].update();for(Gt.views.length=0,t=0;t<Gt.tasks.length;t+=1)Gt.tasks[t]();if(Gt.tasks.length=0,Gt.ractives.length)return Xt()}function te(t){t.item.resolve(t.keypath)}var ee=[],ne={tick:function(){var t,e;for(e=vt(),Jt.start(),t=0;t<ee.length;t+=1)ee[t].tick(e)||ee.splice(t--,1);Jt.end(),ee.length?gt(ne.tick):ne.running=!1},add:function(t){ee.push(t),ne.running||(ne.running=!0,gt(ne.tick))},abort:function(t,e){for(var n,i=ee.length;i--;)(n=ee[i]).root===e&&n.keypath===t&&n.stop()}},ie=ne,re=function(t){var e;for(e in this.startTime=Date.now(),t)t.hasOwnProperty(e)&&(this[e]=t[e]);this.interpolator=Y(this.from,this.to,this.root,this.interpolator),this.running=!0,this.tick()};re.prototype={tick:function(){var t,e,n,i,r;return r=this.keypath,!!this.running&&((t=Date.now()-this.startTime)>=this.duration?(null!==r&&(Jt.start(this.root),this.root.viewmodel.set(r,this.to),Jt.end()),this.step&&this.step(1,this.to),this.complete(this.to),-1===(i=this.root._animations.indexOf(this))&&B("Animation was not found"),this.root._animations.splice(i,1),this.running=!1,!1):(e=this.easing?this.easing(t/this.duration):t/this.duration,null!==r&&(n=this.interpolator(e),Jt.start(this.root),this.root.viewmodel.set(r,n),Jt.end()),this.step&&this.step(e,n),!0))},stop:function(){var t;this.running=!1,-1===(t=this.root._animations.indexOf(this))&&B("Animation was not found"),this.root._animations.splice(t,1)}};var oe=re,se=function(t,e,n){var i,r,o,s,a,l,u,c,h,d,p,f,m,g;if(i=new jt((function(t){return r=t})),"object"==typeof t){for(o in l=(n=e||{}).easing,u=n.duration,a=[],c=n.step,h=n.complete,(c||h)&&(p={},n.step=null,n.complete=null,d=function(t){return function(e,n){p[t]=n}}),t)t.hasOwnProperty(o)&&((c||h)&&(f=d(o),n={easing:l,duration:u},c&&(n.step=f)),n.complete=h?f:F,a.push(le(this,o,t[o],n)));return g={easing:l,duration:u},c&&(g.step=function(t){return c(t,p)}),h&&i.then((function(t){return h(t,p)})),g.complete=r,m=le(this,null,null,g),a.push(m),i.stop=function(){for(var t;t=a.pop();)t.stop();m&&m.stop()},i}(n=n||{}).complete&&i.then(n.complete);return n.complete=r,s=le(this,t,e,n),i.stop=function(){return s.stop()},i},ae={stop:F};function le(t,e,n,i){var r,o,s,a;return e&&(e=at(ct(e))),null!==e&&(a=t.viewmodel.get(e)),ie.abort(e,t),$(a,n)?(i.complete&&i.complete(i.to),ae):(i.easing&&"function"!=typeof(r="function"==typeof i.easing?i.easing:t.easing[i.easing])&&(r=null),o=void 0===i.duration?400:i.duration,s=new oe({keypath:e,from:a,to:n,root:t,duration:o,easing:r,interpolator:i.interpolator,step:i.step,complete:i.complete}),ie.add(s),t._animations.push(s),s)}var ue=function(){if(this.detached)return this.detached;this.el&&Ct(this.el.__ractive_instances__,this);return this.detached=this.fragment.detach(),ce.fire(this),this.detached},ce=new wt("detach");var he=function(t){if(!this.el)return null;return this.fragment.find(t)};var de=function(t,e){var n;n=this._isComponentQuery?!this.selector||t.name===this.selector:t.node?l(t.node,this.selector):null;if(n)return this.push(t.node||t.instance),e||this._makeDirty(),!0};var pe=function(){var t,e,n;t=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],e=this.selector,-1!==(n=t.indexOf(e))&&(t.splice(n,1),t[e]=null)},fe=function(t,e){var n,i,r,o,s,a,l,u;for(n=ge(t.component||t._ractive.proxy),i=ge(e.component||e._ractive.proxy),r=At(n),o=At(i);r&&r===o;)n.pop(),i.pop(),s=r,r=At(n),o=At(i);if(r=r.component||r,o=o.component||o,(l=r.parentFragment)===(u=o.parentFragment))return l.items.indexOf(r)-u.items.indexOf(o)||n.length-i.length;if(a=s.fragments)return a.indexOf(l)-a.indexOf(u)||n.length-i.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")};function me(t){var e;return(e=t.parentFragment)||t.component&&(e=t.component.parentFragment)?e.owner:void 0}function ge(t){var e,n;for(e=[t],n=me(t);n;)e.push(n),n=me(n);return e}var ve=function(t,e){return t.compareDocumentPosition?2&t.compareDocumentPosition(e)?1:-1:fe(t,e)},ye=function(){this.sort(this._isComponentQuery?fe:ve),this._dirty=!1},be=function(){var t=this;this._dirty||(this._dirty=!0,Jt.scheduleTask((function(){t._sort()})))},we=function(t){var e=this.indexOf(this._isComponentQuery?t.instance:t);-1!==e&&this.splice(e,1)},_e=function(t,e,n,i){var r=[];if(k(r,{selector:{value:e},live:{value:n},_isComponentQuery:{value:i},_test:{value:de}}),!n)return r;return k(r,{cancel:{value:pe},_root:{value:t},_sort:{value:ye},_makeDirty:{value:be},_remove:{value:we},_dirty:{value:!1,writable:!0}}),r};var xe=function(t,e){var n,i;if(!this.el)return[];if(e=e||{},n=this._liveQueries,i=n[t])return e&&e.live?i:i.slice();(i=_e(this,t,!!e.live,!1)).live&&(n.push(t),n["_"+t]=i);return this.fragment.findAll(t,i),i};var ke=function(t,e){var n,i;if(e=e||{},n=this._liveComponentQueries,i=n[t])return e&&e.live?i:i.slice();(i=_e(this,t,!!e.live,!0)).live&&(n.push(t),n["_"+t]=i);return this.fragment.findAllComponents(t,i),i};var Ee=function(t){return this.fragment.findComponent(t)};var Ae=function(t){if(this.container)return this.container.component&&this.container.component.name===t?this.container:this.container.findContainer(t);return null};var Ce=function(t){if(this.parent)return this.parent.component&&this.parent.component.name===t?this.parent:this.parent.findParent(t);return null};var Se={enqueue:function(t,e){t.event&&(t._eventQueue=t._eventQueue||[],t._eventQueue.push(t.event)),t.event=e},dequeue:function(t){t._eventQueue&&t._eventQueue.length?t.event=t._eventQueue.pop():delete t.event}},Oe=function(t,e){var n=void 0===arguments[2]?{}:arguments[2];if(!e)return;n.event?n.event.name=e:n.event={name:e,_noArg:!0};var i=at(e).wildcardMatches();Te(t,i,n.event,n.args,!0)};function Te(t,e,n,i){var r,o,s=void 0!==arguments[4]&&arguments[4],a=!0;for(Se.enqueue(t,n),o=e.length;o>=0;o--)(r=t._subs[e[o]])&&(a=Pe(t,r,n,i)&&a);if(Se.dequeue(t),t.parent&&a){if(s&&t.component){var l=t.component.name+"."+e[e.length-1];e=at(l).wildcardMatches(),n&&(n.component=t)}Te(t.parent,e,n,i)}}function Pe(t,e,n,i){var r=null,o=!1;n&&!n._noArg&&(i=[n].concat(i));for(var s=0,a=(e=e.slice()).length;s<a;s+=1)!1===e[s].apply(t,i)&&(o=!0);return n&&!n._noArg&&o&&(r=n.original)&&(r.preventDefault&&r.preventDefault(),r.stopPropagation&&r.stopPropagation()),!o}var $e=function(t){var e={args:Array.prototype.slice.call(arguments,1)};Oe(this,t,e)};var je=function(t){var e;t=at(ct(t)),void 0===(e=this.viewmodel.get(t,Re))&&this.parent&&!this.isolated&&It(this,t.str,this.component.parentFragment)&&(e=this.viewmodel.get(t));return e},Re={capture:!0,noUnwrap:!0,fullRootGet:!0};var De=function(t,e){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(t=y(t),e=y(e)||null,!t)throw new Error("You must specify a valid target to insert into");t.insertBefore(this.detach(),e),this.el=t,(t.__ractive_instances__||(t.__ractive_instances__=[])).push(this),this.detached=null,Ie(this)},Le=new wt("insert");function Ie(t){Le.fire(t),t.findAllComponents("*").forEach((function(t){Ie(t.instance)}))}var Ne=function(t,e,n){var i,r;if(t=at(ct(t)),!T(i=this.viewmodel.get(t))||!T(e))return this.set(t,e,n&&n.complete);return r=Jt.start(this,!0),this.viewmodel.merge(t,i,e,n),Jt.end(),r};var Fe=function(t,e,n,i){this.root=t,this.keypath=e,this.callback=n,this.defer=i.defer,this.context=i&&i.context?i.context:t};Fe.prototype={init:function(t){this.value=this.root.get(this.keypath.str),!1!==t?this.update():this.oldValue=this.value},setValue:function(t){var e=this;$(t,this.value)||(this.value=t,this.defer&&this.ready?Jt.scheduleTask((function(){return e.update()})):this.update())},update:function(){this.updating||(this.updating=!0,this.callback.call(this.context,this.value,this.oldValue,this.keypath.str),this.oldValue=this.value,this.updating=!1)}};var qe=Fe,Me=function(t,e){var n,i;return n=lt(t,e),i={},n.forEach((function(e){i[e.str]=t.get(e.str)})),i};var Ue,ze=Array.prototype.slice;(Ue=function(t,e,n,i){this.root=t,this.callback=n,this.defer=i.defer,this.keypath=e,this.regex=new RegExp("^"+e.str.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$"),this.values={},this.defer&&(this.proxies=[]),this.context=i&&i.context?i.context:t}).prototype={init:function(t){var e,n;if(e=Me(this.root,this.keypath),!1!==t)for(n in e)e.hasOwnProperty(n)&&this.update(at(n));else this.values=e},update:function(t){var e,n=this;if(t.isPattern)for(t in e=Me(this.root,t))e.hasOwnProperty(t)&&this.update(at(t));else this.root.viewmodel.implicitChanges[t.str]||(this.defer&&this.ready?Jt.scheduleTask((function(){return n.getProxy(t).update()})):this.reallyUpdate(t))},reallyUpdate:function(t){var e,n,i,r;e=t.str,n=this.root.viewmodel.get(t),this.updating?this.values[e]=n:(this.updating=!0,$(n,this.values[e])&&this.ready||(i=ze.call(this.regex.exec(e),1),r=[n,this.values[e],e].concat(i),this.values[e]=n,this.callback.apply(this.context,r)),this.updating=!1)},getProxy:function(t){var e=this;return this.proxies[t.str]||(this.proxies[t.str]={update:function(){return e.reallyUpdate(t)}}),this.proxies[t.str]}};var We=Ue,Ve=function(t,e,n,i){var r,o,s;e=at(ct(e)),i=i||Be,e.isPattern?(r=new We(t,e,n,i),t.viewmodel.patternObservers.push(r),o=!0):r=new qe(t,e,n,i);r.init(i.init),t.viewmodel.register(e,r,o?"patternObservers":"observers"),r.ready=!0;var a={cancel:function(){var n;s||(o?(n=t.viewmodel.patternObservers.indexOf(r),t.viewmodel.patternObservers.splice(n,1),t.viewmodel.unregister(e,r,"patternObservers")):t.viewmodel.unregister(e,r,"observers"),s=!0)}};return t._observers.push(a),a},Be={};var He=function(t,e,n){var i,r,o,s;if(R(t)){for(t in n=e,i=[],r=t)r.hasOwnProperty(t)&&(e=r[t],i.push(this.observe(t,e,n)));return{cancel:function(){for(;i.length;)i.pop().cancel()}}}if("function"==typeof t)return n=e,e=t,Ve(this,t="",e,n);if(1===(o=t.split(" ")).length)return Ve(this,t,e,n);i=[],s=o.length;for(;s--;)(t=o[s])&&i.push(Ve(this,t,e,n));return{cancel:function(){for(;i.length;)i.pop().cancel()}}};var Ze=function(t,e,n){var i=this.observe(t,(function(){e.apply(this,arguments),i.cancel()}),{init:!1,defer:n&&n.defer});return i};var Ge=function(t){return t.trim()},Ke=function(t){return""!==t},Qe=function(t,e){var n=this;if(t)t.split(" ").map(Ge).filter(Ke).forEach((function(t){var i,r;(i=n._subs[t])&&(e?-1!==(r=i.indexOf(e))&&i.splice(r,1):n._subs[t]=[])}));else for(t in this._subs)delete this._subs[t];return this};var Ye=function(t,e){var n,i,r=this;if("object"==typeof t){for(i in n=[],t)t.hasOwnProperty(i)&&n.push(this.on(i,t[i]));return{cancel:function(){for(var t;t=n.pop();)t.cancel()}}}return t.split(" ").map(Ge).filter(Ke).forEach((function(t){(r._subs[t]||(r._subs[t]=[])).push(e)})),{cancel:function(){return r.off(t,e)}}};var Je=function(t,e){var n=this.on(t,(function(){e.apply(this,arguments),n.cancel()}));return n};var Xe=function(t,e,n){var i,r,o,s,a,l,u=[];if(!(i=function(t,e,n){switch(e){case"splice":for(void 0!==n[0]&&n[0]<0&&(n[0]=t.length+Math.max(n[0],-t.length));n.length<2;)n.push(0);return n[1]=Math.min(n[1],t.length-n[0]),n;case"sort":case"reverse":return null;case"pop":return t.length?[t.length-1,1]:[0,0];case"push":return[t.length,0].concat(n);case"shift":return[0,t.length?1:0];case"unshift":return[0,0].concat(n)}}(t,e,n)))return null;for(r=t.length,a=i.length-2-i[1],o=Math.min(r,i[0]),s=o+i[1],l=0;l<o;l+=1)u.push(l);for(;l<s;l+=1)u.push(-1);for(;l<r;l+=1)u.push(l+a);u.touchedFrom=0!==a?i[0]:t.length;return u};var tn,en,nn,rn,on,sn,an=Array.prototype,ln=function(t){return function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var o,s,a,l=[];if(e=at(ct(e)),(o=this.viewmodel.get(e)).length,!T(o))throw new Error("Called ractive."+t+"('"+e.str+"'), but '"+e.str+"' does not refer to an array");return l=Xe(o,t,i),a=an[t].apply(o,i),s=Jt.start(this,!0).then((function(){return a})),l?this.viewmodel.smartUpdate(e,o,l):this.viewmodel.mark(e),Jt.end(),s}},un=ln("pop"),cn=ln("push"),hn=[],dn=!1;t?((nn=document.createElement("style")).type="text/css",rn=document.getElementsByTagName("head")[0],sn=!1,on=nn.styleSheet,en=function(){var t="/* Ractive.js component styles */\n"+hn.map((function(t){return"\n/* {"+t.id+"} */\n"+t.styles})).join("\n");on?on.cssText=t:nn.innerHTML=t,sn||(rn.appendChild(nn),sn=!0)},tn={add:function(t){hn.push(t),dn=!0},apply:function(){dn&&(en(),dn=!1)}}):tn={add:F,apply:F};var pn=tn,fn=function(t,e){var n,i,r,o=this;r=this.transitionsEnabled,this.noIntro&&(this.transitionsEnabled=!1);if(n=Jt.start(this,!0),Jt.scheduleTask((function(){return mn.fire(o)}),!0),this.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");if(t=y(t)||this.el,e=y(e)||this.anchor,this.el=t,this.anchor=e,!this.append&&t){var s=t.__ractive_instances__;s&&s.length&&function(t){t.splice(0,t.length).forEach(Mt)}(s),t.innerHTML=""}this.cssId&&pn.apply();t&&((i=t.__ractive_instances__)?i.push(this):t.__ractive_instances__=[this],e?t.insertBefore(this.fragment.render(),e):t.appendChild(this.fragment.render()));return Jt.end(),this.transitionsEnabled=r,n.then((function(){return gn.fire(o)}))},mn=new wt("render"),gn=new wt("complete");var vn={extend:function(t,e,n){e.adapt=function(t,e){var n=t.slice(),i=e.length;for(;i--;)~n.indexOf(e[i])||n.push(e[i]);return n}(e.adapt,Et(n.adapt))},init:function(){}};var yn=function(t,e){var n,i,r;i='[data-ractive-css~="{'+e+'}"]',r=function(t){var e,n,r,o,s,a,l,u=[];for(e=[];n=_n.exec(t);)e.push({str:n[0],base:n[1],modifiers:n[2]});for(o=e.map(An),l=e.length;l--;)a=o.slice(),r=e[l],a[l]=r.base+i+r.modifiers||"",(s=o.slice())[l]=i+" "+s[l],u.push(a.join(" "),s.join(" "));return u.join(", ")},n=kn.test(t)?t.replace(kn,i):t.replace(wn,"").replace(bn,(function(t,e){var n;return xn.test(e)?t:(n=e.split(",").map(En).map(r).join(", ")+" ",t.replace(e,n))}));return n},bn=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,wn=/\/\*.*?\*\//g,_n=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g,xn=/^@media/,kn=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g;function En(t){return t.trim?t.trim():t.replace(/^\s+/,"").replace(/\s+$/,"")}function An(t){return t.str}var Cn=1,Sn={name:"css",extend:function(t,e,n){if(n.css){var i=Cn++,r=n.noCssTransform?n.css:yn(n.css,i);e.cssId=i,pn.add({id:i,styles:r})}},init:function(){}};var On={name:"data",extend:function(t,e,n){var i=void 0,r=void 0;if(n.data&&R(n.data))for(i in n.data)(r=n.data[i])&&"object"==typeof r&&(R(r)||T(r))&&B("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }");e.data=Tn(e.data,n.data)},init:function(t,e,n){var i=Tn(t.prototype.data,n.data);return"function"==typeof i&&(i=i.call(e)),i||{}},reset:function(t){var e=this.init(t.constructor,t,t.viewmodel);return t.viewmodel.reset(e),!0}};function Tn(t,e){var n;(n=e)&&n.constructor!==Object&&("function"==typeof n||("object"!=typeof n?U("data option must be an object or a function, `"+n+"` is not valid"):B("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged")));var i="function"==typeof t,r="function"==typeof e;return e||i||(e={}),i||r?function(){return $n(r?Pn(e,this):e,i?Pn(t,this):t)}:$n(e,t)}function Pn(t,e){var n=t.call(e);if(n)return"object"!=typeof n&&U("Data function must return an object"),n.constructor!==Object&&H("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged"),n}function $n(t,e){if(t&&e){for(var n in e)n in t||(t[n]=e[n]);return t}return t||e}var jn,Rn,Dn=/^\s+/;(Rn=function(t){this.name="ParseError",this.message=t;try{throw new Error(t)}catch(t){this.stack=t.stack}}).prototype=Error.prototype,(jn=function(t,e){var n,i,r=0;for(this.str=t,this.options=e||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map((function(t){var e=r+t.length+1;return r=e,e}),0),this.init&&this.init(t,e),n=[];this.pos<this.str.length&&(i=this.read());)n.push(i);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(n,e):n}).prototype={read:function(t){var e,n,i,r;for(t||(t=this.converters),e=this.pos,i=t.length,n=0;n<i;n+=1)if(this.pos=e,r=t[n](this))return r;return null},getLinePos:function(t){for(var e=0,n=0;t>=this.lineEnds[e];)n=this.lineEnds[e],e+=1;return[e+1,t-n+1,t]},error:function(t){var e=this.getLinePos(this.pos),n=e[0],i=e[1],r=this.lines[e[0]-1],o=0,s=r.replace(/\t/g,(function(t,n){return n<e[1]&&(o+=1),"  "}))+"\n"+new Array(e[1]+o).join(" ")+"^----",a=new Rn(t+" at line "+n+" character "+i+":\n"+s);throw a.line=e[0],a.character=e[1],a.shortMessage=t,a},matchString:function(t){if(this.str.substr(this.pos,t.length)===t)return this.pos+=t.length,t},matchPattern:function(t){var e;if(e=t.exec(this.remaining()))return this.pos+=e[0].length,e[1]||e[0]},allowWhitespace:function(){this.matchPattern(Dn)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},jn.extend=function(t){var e,n;for(n in(e=function(t,e){jn.call(this,t,e)}).prototype=_(this.prototype),t)C.call(t,n)&&(e.prototype[n]=t[n]);return e.extend=jn.extend,e};var Ln=jn,In=30,Nn=50,Fn=51,qn=52,Mn=53,Un=function(t){var e,n,i;if(!t.matchString("="))return null;if(e=t.pos,t.allowWhitespace(),!(n=t.matchPattern(zn)))return t.pos=e,null;if(!t.matchPattern(Wn))return null;if(!(i=t.matchPattern(zn)))return t.pos=e,null;if(t.allowWhitespace(),!t.matchString("="))return t.pos=e,null;return[n,i]},zn=/^[^\s=]+/,Wn=/^\s+/;var Vn=function(t){var e;if(e=t.matchPattern(Bn))return{t:25,v:e};return null},Bn=/^(\/(?:[^\n\r\u2028\u2029/\\[]|\\.|\[(?:[^\n\r\u2028\u2029\]\\]|\\.)*])+\/(?:([gimuy])(?![a-z]*\2))*(?![a-zA-Z_$0-9]))/;var Hn=function(t){var e,n;if(!1===t.interpolate[t.inside])return null;for(n=0;n<t.tags.length;n+=1)if(e=Gn(t,t.tags[n]))return e},Zn={t:10,exclude:!0};function Gn(t,e){var n,i,r;if(n=t.pos,t.matchString("\\"+e.open)){if(0===n||"\\"!==t.str[n-1])return e.open}else if(!t.matchString(e.open))return null;if(i=Un(t))return t.matchString(e.close)?(e.open=i[0],e.close=i[1],t.sortMustacheTags(),Zn):null;if(t.allowWhitespace(),t.matchString("/")){t.pos-=1;var o=t.pos;Vn(t)?t.pos=o:(t.pos=o-e.close.length,t.error("Attempted to close a section that wasn't open"))}for(r=0;r<e.readers.length;r+=1)if(i=(0,e.readers[r])(t,e))return e.isStatic&&(i.s=!0),t.includeLinePositions&&(i.p=t.getLinePos(n)),i;return t.pos=n,null}var Kn="Expected a JavaScript expression",Qn="Expected closing paren",Yn=function(t){var e;if(e=t.matchPattern(Jn))return{t:20,v:e};return null},Jn=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;var Xn,ti,ei,ni=function(t){var e=t.remaining();if("true"===e.substr(0,4))return t.pos+=4,{t:24,v:"true"};if("false"===e.substr(0,5))return t.pos+=5,{t:24,v:"false"};return null};Xn=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,ti=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,ei=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var ii=function(t){return function(e){var n,i,r;for(e.pos,n='"',i=!1;!i;)(r=e.matchPattern(Xn)||e.matchPattern(ti)||e.matchString(t))?n+='"'===r?'\\"':"\\'"===r?"'":r:(r=e.matchPattern(ei))?n+="\\u"+("000"+r.charCodeAt(1).toString(16)).slice(-4):i=!0;return n+='"',JSON.parse(n)}},ri=ii('"'),oi=ii("'"),si=function(t){var e,n;return e=t.pos,t.matchString('"')?(n=oi(t),t.matchString('"')?{t:21,v:n}:(t.pos=e,null)):t.matchString("'")?(n=ri(t),t.matchString("'")?{t:21,v:n}:(t.pos=e,null)):null},ai=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,li=function(t){var e;if(e=si(t))return ui.test(e.v)?e.v:'"'+e.v.replace(/"/g,'\\"')+'"';if(e=Yn(t))return e.v;if(e=t.matchPattern(ai))return e},ui=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;var ci=function(t){var e,n,i;if(e=t.pos,t.allowWhitespace(),null===(n=li(t)))return t.pos=e,null;if(t.allowWhitespace(),!t.matchString(":"))return t.pos=e,null;if(t.allowWhitespace(),null===(i=Pi(t)))return t.pos=e,null;return{t:27,k:n,v:i}};var hi=function t(e){var n,i,r,o;if(n=e.pos,null===(r=ci(e)))return null;if(i=[r],e.matchString(","))return(o=t(e))?i.concat(o):(e.pos=n,null);return i};var di=function t(e){var n,i,r;if(e.pos,e.allowWhitespace(),null===(i=Pi(e)))return null;n=[i],e.allowWhitespace(),e.matchString(",")&&(null===(r=t(e))&&e.error(Kn),r.forEach((function(t){n.push(t)})));return n};var pi=function(t){return Yn(t)||ni(t)||si(t)||function(t){var e,n;return e=t.pos,t.allowWhitespace(),t.matchString("{")?(n=hi(t),t.allowWhitespace(),t.matchString("}")?{t:23,m:n}:(t.pos=e,null)):(t.pos=e,null)}(t)||function(t){var e,n;return e=t.pos,t.allowWhitespace(),t.matchString("[")?(n=di(t),t.matchString("]")?{t:22,m:n}:(t.pos=e,null)):(t.pos=e,null)}(t)||Vn(t)};var fi,mi,gi=function(t){var e,n,i,r,o,s;e=t.pos,(i=t.matchPattern(/^@(?:keypath|index|key)/))||(n=t.matchPattern(vi)||"",(i=!n&&t.relaxedNames&&t.matchPattern(bi)||t.matchPattern(yi))||"."!==n||(n="",i="."));if(!i)return null;if(!n&&!t.relaxedNames&&mi.test(i))return t.pos=e,null;if(!n&&fi.test(i))return r=fi.exec(i)[0],t.pos=e+r.length,{t:26,v:r};o=(n||"")+ct(i),t.matchString("(")&&(-1!==(s=o.lastIndexOf("."))?(o=o.substr(0,s),t.pos=e+o.length):t.pos-=1);return{t:In,n:o.replace(/^this\./,"./").replace(/^this$/,".")}},vi=/^(?:~\/|(?:\.\.\/)+|\.\/(?:\.\.\/)*|\.)/;fi=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)\b/,mi=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;var yi=/^[a-zA-Z$_0-9]+(?:(?:\.[a-zA-Z$_0-9]+)|(?:\[[0-9]+\]))*/,bi=/^[a-zA-Z_$][-a-zA-Z_$0-9]*/;var wi=function(t){var e;if(t.pos,!t.matchString("("))return null;t.allowWhitespace(),(e=Pi(t))||t.error(Kn);t.allowWhitespace(),t.matchString(")")||t.error(Qn);return{t:34,x:e}};var _i=function(t){var e,n;if(t.pos,t.allowWhitespace(),t.matchString(".")){if(t.allowWhitespace(),e=t.matchPattern(ai))return{t:31,n:e};t.error("Expected a property name")}if(t.matchString("["))return t.allowWhitespace(),(n=Pi(t))||t.error(Kn),t.allowWhitespace(),t.matchString("]")||t.error("Expected ']'"),{t:31,x:n};return null};var xi,ki,Ei=function(t){var e,n,i;if(!(e=function(t){return pi(t)||gi(t)||wi(t)}(t)))return null;for(;e;)if(t.pos,n=_i(t))e={t:32,x:e,r:n};else{if(!t.matchString("("))break;t.allowWhitespace(),i=di(t),t.allowWhitespace(),t.matchString(")")||t.error(Qn),e={t:40,x:e},i&&(e.o=i)}return e};ki=function(t,e){return function(n){var i;return(i=e(n))?i:n.matchString(t)?(n.allowWhitespace(),(i=Pi(n))||n.error(Kn),{s:t,o:i,t:33}):null}},function(){var t,e,n,i;for(n="! ~ + - typeof".split(" "),i=Ei,t=0,e=n.length;t<e;t+=1)i=ki(n[t],i);xi=i}();var Ai,Ci,Si=xi;Ci=function(t,e){return function(n){var i,r,o;if(!(r=e(n)))return null;for(;;){if(i=n.pos,n.allowWhitespace(),!n.matchString(t))return n.pos=i,r;if("in"===t&&/[a-zA-Z_$0-9]/.test(n.remaining().charAt(0)))return n.pos=i,r;if(n.allowWhitespace(),!(o=e(n)))return n.pos=i,r;r={t:36,s:t,o:[r,o]}}}},function(){var t,e,n,i;for(n="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),i=Si,t=0,e=n.length;t<e;t+=1)i=Ci(n[t],i);Ai=i}();var Oi=Ai,Ti=function(t){var e,n,i,r;if(!(n=Oi(t)))return null;if(e=t.pos,t.allowWhitespace(),!t.matchString("?"))return t.pos=e,n;t.allowWhitespace(),(i=Pi(t))||t.error(Kn);t.allowWhitespace(),t.matchString(":")||t.error('Expected ":"');t.allowWhitespace(),(r=Pi(t))||t.error(Kn);return{t:35,o:[n,i,r]}};var Pi=function(t){return Ti(t)};var $i=function(t){var e;return ji(t,e=[]),{r:e,s:n(t)};function n(t){switch(t.t){case 24:case 26:case 20:case 25:return t.v;case 21:return JSON.stringify(String(t.v));case 22:return"["+(t.m?t.m.map(n).join(","):"")+"]";case 23:return"{"+(t.m?t.m.map(n).join(","):"")+"}";case 27:return t.k+":"+n(t.v);case 33:return("typeof"===t.s?"typeof ":t.s)+n(t.o);case 36:return n(t.o[0])+("in"===t.s.substr(0,2)?" "+t.s+" ":t.s)+n(t.o[1]);case 40:return n(t.x)+"("+(t.o?t.o.map(n).join(","):"")+")";case 34:return"("+n(t.x)+")";case 32:return n(t.x)+n(t.r);case 31:return t.n?"."+t.n:"["+n(t.x)+"]";case 35:return n(t.o[0])+"?"+n(t.o[1])+":"+n(t.o[2]);case In:return"_"+e.indexOf(t.n);default:throw new Error("Expected legal JavaScript")}}};function ji(t,e){var n,i;if(t.t===In&&-1===e.indexOf(t.n)&&e.unshift(t.n),i=t.o||t.m)if(R(i))ji(i,e);else for(n=i.length;n--;)ji(i[n],e);t.x&&ji(t.x,e),t.r&&ji(t.r,e),t.v&&ji(t.v,e)}var Ri=function(t,e){var n;if(t){for(;34===t.t&&t.x;)t=t.x;return t.t===In?e.r=t.n:20===t.t&&Di.test(t.v)?e.r=t.v:(n=function(t){var e,n=[];for(;32===t.t&&31===t.r.t;)(e=t.r).x?e.x.t===In?n.unshift(e.x):n.unshift($i(e.x)):n.unshift(e.n),t=t.x;if(t.t!==In)return null;return{r:t.n,m:n}}(t))?e.rx=n:e.x=$i(t),e}},Di=/^[0-9][1-9]*$/;var Li=function(t,e){var n,i=Pi(t);if(!i)return null;t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'");return Ri(i,n={t:3}),n};var Ii=function(t,e){var n,i;if(!t.matchString("&"))return null;if(t.allowWhitespace(),!(n=Pi(t)))return null;t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'");return Ri(n,i={t:3}),i};var Ni=function(t,e){var n,i,r;if(t.pos,!t.matchString(">"))return null;if(t.allowWhitespace(),t.pos,t.relaxedNames=!0,n=Pi(t),t.relaxedNames=!1,t.allowWhitespace(),i=Pi(t),t.allowWhitespace(),!n)return null;Ri(n,r={t:8}),t.allowWhitespace(),i&&Ri(i,r={t:4,n:Mn,f:[r]});t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'");return r};var Fi=function(t,e){var n;if(!t.matchString("!"))return null;if(-1!==(n=t.remaining().indexOf(e.close)))return t.pos+=n+e.close.length,{t:9}};var qi=function(t,e){var n,i,r;if(n=t.pos,!(i=Pi(t)))return null;for(r=0;r<e.length;r+=1)if(t.remaining().substr(0,e[r].length)===e[r])return i;return t.pos=n,gi(t)};var Mi=function(t,e){var n,i,r,o;n=t.pos;try{i=qi(t,[e.close])}catch(t){o=t}if(!i){if("!"===t.str.charAt(n))return t.pos=n,null;if(o)throw o}if(!t.matchString(e.close)&&(t.error("Expected closing delimiter '"+e.close+"' after reference"),!i)){if("!"===t.nextChar())return null;t.error("Expected expression or legal reference")}return Ri(i,r={t:2}),r};var Ui=function(t,e){var n,i;if(!t.matchPattern(zi))return null;t.pos,n=t.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/),t.allowWhitespace(),t.matchString(e.close)||t.error("expected legal partial name");i={t:16},n&&(i.n=n);return i},zi=/^yield\s*/;var Wi=function(t,e){var n,i,r,o;if(n=t.pos,!t.matchString(e.open))return null;if(t.allowWhitespace(),!t.matchString("/"))return t.pos=n,null;if(t.allowWhitespace(),i=t.remaining(),-1!==(r=i.indexOf(e.close)))return o={t:6,r:i.substr(0,r).split(" ")[0]},t.pos+=r,t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),o;return t.pos=n,null};var Vi=function(t,e){var n=t.pos;if(!t.matchString(e.open))return null;if(!t.matchPattern(Bi))return t.pos=n,null;t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'");return{t:60}},Bi=/^\s*else\s*/;var Hi=function(t,e){var n,i=t.pos;if(!t.matchString(e.open))return null;if(!t.matchPattern(Zi))return t.pos=i,null;n=Pi(t),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'");return{t:61,x:n}},Zi=/^\s*elseif\s+/;var Gi={each:qn,if:Nn,"if-with":54,with:Mn,unless:Fn},Ki=function(t,e){var n,i,r,o,s,a,l,u,c,h,d,p;if(n=t.pos,t.matchString("^"))r={t:4,f:[],n:Fn};else{if(!t.matchString("#"))return null;r={t:4,f:[]},t.matchString("partial")&&(t.pos=n-t.standardDelimiters[0].length,t.error("Partial definitions can only be at the top level of the template, or immediately inside components")),(l=t.matchPattern(Ji))&&(p=l,r.n=Gi[l])}t.allowWhitespace(),(i=Pi(t))||t.error("Expected expression");if(d=t.matchPattern(Qi)){var f;(f=t.matchPattern(Yi))?r.i=d+","+f:r.i=d}t.allowWhitespace(),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'");t.sectionDepth+=1,s=r.f,c=[];do{if(o=Wi(t,e))p&&o.r!==p&&t.error("Expected "+e.open+"/"+p+e.close),t.sectionDepth-=1,h=!0;else if(o=Hi(t,e))r.n===Fn&&t.error("{{else}} not allowed in {{#unless}}"),a&&t.error("illegal {{elseif...}} after {{else}}"),u||(u=Xi(i,r.n)),u.f.push({t:4,n:Nn,x:$i(er(c.concat(o.x))),f:s=[]}),c.push(tr(o.x));else if(o=Vi(t,e))r.n===Fn&&t.error("{{else}} not allowed in {{#unless}}"),a&&t.error("there can only be one {{else}} block, at the end of a section"),a=!0,u?u.f.push({t:4,n:Nn,x:$i(er(c)),f:s=[]}):(u=Xi(i,r.n),s=u.f);else{if(!(o=t.read(wo)))break;s.push(o)}}while(!h);u&&(r.n===Mn&&(r.n=54),r.l=u);Ri(i,r),r.f.length||delete r.f;return r},Qi=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,Yi=/^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,Ji=new RegExp("^("+Object.keys(Gi).join("|")+")\\b");function Xi(t,e){var n;return e===Mn?(n={t:4,n:Nn,f:[]},Ri(tr(t),n)):Ri(t,n={t:4,n:Fn,f:[]}),n}function tr(t){return 33===t.t&&"!"===t.s?t.o:{t:33,s:"!",o:nr(t)}}function er(t){return 1===t.length?t[0]:{t:36,s:"&&",o:[nr(t[0]),nr(er(t.slice(1)))]}}function nr(t){return{t:34,x:t}}var ir,rr,or,sr,ar,lr,ur,cr,hr=function(t){var e,n,i,r,o;if(e=t.pos,!t.matchString("\x3c!--"))return null;i=t.remaining(),-1===(r=i.indexOf("--\x3e"))&&t.error("Illegal HTML - expected closing comment sequence ('--\x3e')");n=i.substr(0,r),t.pos+=r+3,o={t:9,c:n},t.includeLinePositions&&(o.p=t.getLinePos(e));return o};function dr(t){return t.replace(ar,(function(t,e){var n;return(n="#"!==e[0]?or[e]:"x"===e[1]?parseInt(e.substring(2),16):parseInt(e.substring(1),10))?String.fromCharCode(function(t){if(!t)return 65533;if(10===t)return 32;if(t<128)return t;if(t<=159)return sr[t-128];if(t<55296)return t;if(t<=57343)return 65533;if(t<=65535)return t;return 65533}(n)):t}))}function pr(t){return t.replace(cr,"&amp;").replace(lr,"&lt;").replace(ur,"&gt;")}ir=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,rr=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,or={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},sr=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],ar=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(or).join("|")+"));?","g"),lr=/</g,ur=/>/g,cr=/&/g;var fr=/^\s*\r?\n/,mr=/\r?\n\s*$/;function gr(t){return"string"==typeof t}function vr(t){return(4===t.t||5===t.t)&&t.f}var yr=function(t,e,n){var i;e&&"string"==typeof(i=t[0])&&((i=i.replace(e,""))?t[0]=i:t.shift()),n&&"string"==typeof(i=At(t))&&((i=i.replace(n,""))?t[t.length-1]=i:t.pop())},br=function t(e,n,i,r,o){var s,a,l,u,c,h,d,p;(function(t){var e,n,i,r,o,s;for(e=1;e<t.length;e+=1)n=t[e],i=t[e-1],r=t[e-2],gr(n)&&(9===(s=i).t||10===s.t)&&gr(r)&&mr.test(r)&&fr.test(n)&&(t[e-2]=r.replace(mr,"\n"),t[e]=n.replace(fr,"")),vr(n)&&gr(i)&&mr.test(i)&&gr(n.f[0])&&fr.test(n.f[0])&&(t[e-1]=i.replace(mr,"\n"),n.f[0]=n.f[0].replace(fr,"")),gr(n)&&vr(i)&&gr(o=At(i.f))&&mr.test(o)&&fr.test(n)&&(i.f[i.f.length-1]=o.replace(mr,"\n"),t[e]=n.replace(fr,""))})(e),s=e.length;for(;s--;)((a=e[s]).exclude||n&&9===a.t)&&e.splice(s,1);yr(e,r?xr:null,o?kr:null),s=e.length;for(;s--;){if((a=e[s]).f){var f=7===a.t&&_r.test(a.e);c=i||f,!i&&f&&yr(a.f,Er,Ar),c||(l=e[s-1],u=e[s+1],(!l||"string"==typeof l&&kr.test(l))&&(h=!0),(!u||"string"==typeof u&&xr.test(u))&&(d=!0)),t(a.f,n,c,h,d)}if(a.l&&(t(a.l.f,n,i,h,d),e.splice(s+1,0,a.l),delete a.l),a.a)for(p in a.a)a.a.hasOwnProperty(p)&&"string"!=typeof a.a[p]&&t(a.a[p],n,i,h,d);if(a.m&&t(a.m,n,i,h,d),a.v)for(p in a.v)a.v.hasOwnProperty(p)&&(T(a.v[p].n)&&t(a.v[p].n,n,i,h,d),T(a.v[p].d)&&t(a.v[p].d,n,i,h,d))}s=e.length;for(;s--;)"string"==typeof e[s]&&("string"==typeof e[s+1]&&(e[s]=e[s]+e[s+1],e.splice(s+1,1)),i||(e[s]=e[s].replace(wr," ")),""===e[s]&&e.splice(s,1))},wr=/[ \t\f\r\n]+/g,_r=/^(?:pre|script|style|textarea)$/i,xr=/^[ \t\f\r\n]+/,kr=/[ \t\f\r\n]+$/,Er=/^(?:\r\n|\r|\n)/,Ar=/(?:\r\n|\r|\n)$/;var Cr=function(t){var e,n;if(e=t.pos,!t.matchString("</"))return null;if(n=t.matchPattern(Sr))return t.inside&&n!==t.inside?(t.pos=e,null):{t:14,e:n};t.pos-=2,t.error("Illegal closing tag")},Sr=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/;var Or,Tr,Pr,$r,jr,Rr,Dr,Lr=function(t,e){var n,i,r;for(n=e.length;n--;){if(!(i=t.indexOf(e[n])))return 0;-1!==i&&((!r||i<r)&&(r=i))}return r||-1},Ir=function(t){var e,n,i;if(t.allowWhitespace(),!(n=t.matchPattern(Nr)))return null;e={name:n},null!=(i=function(t){var e,n,i,r;e=t.pos,/[=\/>\s]/.test(t.nextChar())||t.error("Expected `=`, `/`, `>` or whitespace");if(t.allowWhitespace(),!t.matchString("="))return t.pos=e,null;t.allowWhitespace(),n=t.pos,i=t.sectionDepth,null===(r=Mr(t,"'")||Mr(t,'"')||function(t){var e,n;t.inAttribute=!0,e=[],n=Hn(t)||qr(t);for(;null!==n;)e.push(n),n=Hn(t)||qr(t);if(!e.length)return null;return t.inAttribute=!1,e}(t))&&t.error("Expected valid attribute value");t.sectionDepth!==i&&(t.pos=n,t.error("An attribute value must contain as many opening section tags as closing section tags"));if(!r.length)return"";if(1===r.length&&"string"==typeof r[0])return dr(r[0]);return r}(t))&&(e.value=i);return e},Nr=/^[^\s"'>\/=]+/,Fr=/^[^\s"'=<>`]+/;function qr(t){var e,n,i,r,o;return e=t.pos,(n=t.matchPattern(Fr))?(i=n,r=t.tags.map((function(t){return t.open})),-1!==(o=Lr(i,r))&&(n=n.substr(0,o),t.pos=e+n.length),n):null}function Mr(t,e){var n,i,r;if(n=t.pos,!t.matchString(e))return null;for(t.inAttribute=e,i=[],r=Hn(t)||Ur(t,e);null!==r;)i.push(r),r=Hn(t)||Ur(t,e);return t.matchString(e)?(t.inAttribute=!1,i):(t.pos=n,null)}function Ur(t,e){var n,i,r;return t.pos,i=t.remaining(),(r=t.tags.map((function(t){return t.open}))).push(e),-1===(n=Lr(i,r))&&t.error("Quoted attribute value must have a closing quote"),n?(t.pos+=n,i.substr(0,n)):null}function zr(t){var e,n,i;return t.allowWhitespace(),(e=li(t))?(i={key:e},t.allowWhitespace(),t.matchString(":")?(t.allowWhitespace(),(n=t.read())?(i.value=n.v,i):null):null):null}Tr={true:!0,false:!1,undefined:void 0,null:null},Pr=new RegExp("^(?:"+Object.keys(Tr).join("|")+")"),$r=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,jr=/\$\{([^\}]+)\}/g,Rr=/^\$\{([^\}]+)\}/,Dr=/^\s*$/,Or=Ln.extend({init:function(t,e){this.values=e.values,this.allowWhitespace()},postProcess:function(t){return 1===t.length&&Dr.test(this.leftover)?{value:t[0].v}:null},converters:[function(t){var e;return t.values?(e=t.matchPattern(Rr))&&t.values.hasOwnProperty(e)?{v:t.values[e]}:void 0:null},function(t){var e;if(e=t.matchPattern(Pr))return{v:Tr[e]}},function(t){var e;if(e=t.matchPattern($r))return{v:+e}},function(t){var e,n=si(t);return n&&(e=t.values)?{v:n.v.replace(jr,(function(t,n){return n in e?e[n]:n}))}:n},function(t){var e,n;if(!t.matchString("{"))return null;if(e={},t.allowWhitespace(),t.matchString("}"))return{v:e};for(;n=zr(t);){if(e[n.key]=n.value,t.allowWhitespace(),t.matchString("}"))return{v:e};if(!t.matchString(","))return null}return null},function(t){var e,n;if(!t.matchString("["))return null;if(e=[],t.allowWhitespace(),t.matchString("]"))return{v:e};for(;n=t.read();){if(e.push(n.v),t.allowWhitespace(),t.matchString("]"))return{v:e};if(!t.matchString(","))return null;t.allowWhitespace()}return null}]});var Wr,Vr=function(t,e){return new Or(t,{values:e}).result},Br=function(t,e){var n,i,r,o,s,a,l,u,c;if("string"==typeof t){if(i=Hr.exec(t)){var h=t.lastIndexOf(")");return Zr.test(t)||e.error("Invalid input after method call expression '"+t.slice(h+1)+"'"),n={m:i[1]},o="["+t.slice(n.m.length+1,h)+"]",r=new Wr(o),n.a=$i(r.result[0]),n}if(-1===t.indexOf(":"))return t.trim();t=[t]}if(n={},l=[],u=[],t){for(;t.length;)if("string"==typeof(s=t.shift())){if(-1!==(a=s.indexOf(":"))){a&&l.push(s.substr(0,a)),s.length>a+1&&(u[0]=s.substring(a+1));break}l.push(s)}else l.push(s);u=u.concat(t)}l.length?u.length||"string"!=typeof l?(n={n:1===l.length&&"string"==typeof l[0]?l[0]:l},1===u.length&&"string"==typeof u[0]?(c=Vr("["+u[0]+"]"),n.a=c?c.value:u[0].trim()):n.d=u):n=l:n="";return n},Hr=/^([a-zA-Z_$][a-zA-Z_$0-9]*)\(/,Zr=/\)\s*$/;Wr=Ln.extend({converters:[Pi]});var Gr,Kr=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,Qr=/^[\s\n\/>]/,Yr=/^on/,Jr=/^on-([a-zA-Z\\*\\.$_][a-zA-Z\\*\\.$_0-9\-]+)$/,Xr=/^(?:change|reset|teardown|update|construct|config|init|render|unrender|detach|insert)$/,to={"intro-outro":"t0",intro:"t1",outro:"t2",decorator:"o"},eo={exclude:!0};Gr={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rt","rp"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tfoot:["tbody"],tr:["tr","tbody"],td:["td","th","tr"],th:["td","th","tr"]};var no=function(t){var e,n,i,r,o,s,a,l,u,c,h,d,p,f,m,g;if(e=t.pos,t.inside||t.inAttribute)return null;if(!t.matchString("<"))return null;if("/"===t.nextChar())return null;n={},t.includeLinePositions&&(n.p=t.getLinePos(e));if(t.matchString("!"))return n.t=18,t.matchPattern(/^doctype/i)||t.error("Expected DOCTYPE declaration"),n.a=t.matchPattern(/^(.+?)>/),n;if(n.t=7,n.e=t.matchPattern(Kr),!n.e)return null;Qr.test(t.nextChar())||t.error("Illegal tag name");o=function(e,i){var r=i.n||i;Xr.test(r)&&(t.pos-=r.length,t.error("Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, detach, insert)")),n.v[e]=i},t.allowWhitespace();for(;s=Hn(t)||Ir(t);)s.name?(i=to[s.name])?n[i]=Br(s.value,t):(r=Jr.exec(s.name))?(n.v||(n.v={}),a=Br(s.value,t),o(r[1],a)):t.sanitizeEventAttributes&&Yr.test(s.name)||(n.a||(n.a={}),n.a[s.name]=s.value||(""===s.value?"":0)):(n.m||(n.m=[]),n.m.push(s)),t.allowWhitespace();t.allowWhitespace(),t.matchString("/")&&(l=!0);if(!t.matchString(">"))return null;var v=n.e.toLowerCase(),y=t.preserveWhitespace;if(!l&&!rr.test(n.e)){t.elementStack.push(v),"script"!==v&&"style"!==v||(t.inside=v),u=[],c=_(null);do{if(f=t.pos,m=t.remaining(),io(v,m))if(g=Cr(t)){p=!0;var b=g.e.toLowerCase();if(b!==v&&(t.pos=f,!~t.elementStack.indexOf(b))){var w="Unexpected closing tag";rr.test(b)&&(w+=" (<"+b+"> is a void element - it cannot contain children)"),t.error(w)}}else(d=Wi(t,{open:t.standardDelimiters[0],close:t.standardDelimiters[1]}))?(p=!0,t.pos=f):(d=t.read(_o))?(c[d.n]&&(t.pos=f,t.error("Duplicate partial definition")),br(d.f,t.stripComments,y,!y,!y),c[d.n]=d.f,h=!0):(d=t.read(wo))?u.push(d):p=!0;else p=!0}while(!p);u.length&&(n.f=u),h&&(n.p=c),t.elementStack.pop()}if(t.inside=null,t.sanitizeElements&&-1!==t.sanitizeElements.indexOf(v))return eo;return n};function io(t,e){var n,i;return n=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(e),i=Gr[t],!n||!i||!~i.indexOf(n[1].toLowerCase())}var ro=function(t){return t.replace(oo,"\\$&")},oo=/[-/\\^$*+?.()|[\]{}]/g;var so,ao=function(t){var e=t.pos,n=t.standardDelimiters[0],i=t.standardDelimiters[1],r=void 0,o=void 0;if(!t.matchPattern(lo)||!t.matchString(n))return t.pos=e,null;var s=t.matchPattern(uo);if(H("Inline partial comments are deprecated.\nUse this...\n  {{#partial "+s+"}} ... {{/partial}}\n\n...instead of this:\n  \x3c!-- {{>"+s+"}} --\x3e ... \x3c!-- {{/"+s+"}} --\x3e'"),!t.matchString(i)||!t.matchPattern(co))return t.pos=e,null;r=[];var a=new RegExp("^\x3c!--\\s*"+ro(n)+"\\s*\\/\\s*"+s+"\\s*"+ro(i)+"\\s*--\x3e");do{t.matchPattern(a)?o=!0:((so=t.read(wo))||t.error("expected closing comment ('\x3c!-- "+n+"/"+s+i+" --\x3e')"),r.push(so))}while(!o);return{t:17,f:r,n:s}},lo=/^<!--\s*/,uo=/s*>\s*([a-zA-Z_$][-a-zA-Z_$0-9]*)\s*/,co=/\s*-->/;var ho=function(t){var e,n,i,r,o;e=t.pos;var s=t.standardDelimiters;if(!t.matchString(s[0]))return null;if(!t.matchPattern(po))return t.pos=e,null;(n=t.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/))||t.error("expected legal partial name");t.matchString(s[1])||t.error("Expected closing delimiter '"+s[1]+"'");i=[];do{(r=Wi(t,{open:t.standardDelimiters[0],close:t.standardDelimiters[1]}))?("partial"===!r.r&&t.error("Expected "+s[0]+"/partial"+s[1]),o=!0):((r=t.read(wo))||t.error("Expected "+s[0]+"/partial"+s[1]),i.push(r))}while(!o);return{t:17,n:n,f:i}},po=/^#\s*partial\s+/;var fo=function(t){var e=[],n=_(null),i=!1,r=t.preserveWhitespace;for(;t.pos<t.str.length;){var o,s=t.pos,a=void 0;(o=t.read(_o))?(n[o.n]&&(t.pos=s,t.error("Duplicated partial definition")),br(o.f,t.stripComments,r,!r,!r),n[o.n]=o.f,i=!0):(a=t.read(wo))?e.push(a):t.error("Unexpected template content")}var l={v:3,t:e};i&&(l.p=n);return l};var mo=function(t,e){return new bo(t,e||{}).result},go=[Ni,Ii,Ki,Ui,Mi,Fi],vo=[Li],yo=[Ii,Ki,Mi],bo=void 0;var wo=[Hn,hr,no,function(t){var e,n,i,r;n=t.remaining(),r=t.inside?"</"+t.inside:"<",t.inside&&!t.interpolate[t.inside]?e=n.indexOf(r):(i=(i=t.tags.map((function(t){return t.open}))).concat(t.tags.map((function(t){return"\\"+t.open}))),!0===t.inAttribute?i.push('"',"'","=","<",">","`"):t.inAttribute?i.push(t.inAttribute):i.push(r),e=Lr(n,i));if(!e)return null;-1===e&&(e=n.length);return t.pos+=e,t.inside?n.substr(0,e):dr(n.substr(0,e))}],_o=[ao,ho];bo=Ln.extend({init:function(t,e){var n=e.tripleDelimiters||["{{{","}}}"],i=e.staticDelimiters||["[[","]]"],r=e.staticTripleDelimiters||["[[[","]]]"];this.standardDelimiters=e.delimiters||["{{","}}"],this.tags=[{isStatic:!1,isTriple:!1,open:this.standardDelimiters[0],close:this.standardDelimiters[1],readers:go},{isStatic:!1,isTriple:!0,open:n[0],close:n[1],readers:vo},{isStatic:!0,isTriple:!1,open:i[0],close:i[1],readers:yo},{isStatic:!0,isTriple:!0,open:r[0],close:r[1],readers:vo}],this.sortMustacheTags(),this.sectionDepth=0,this.elementStack=[],this.interpolate={script:!e.interpolate||!1!==e.interpolate.script,style:!e.interpolate||!1!==e.interpolate.style},!0===e.sanitize&&(e.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),this.stripComments=!1!==e.stripComments,this.preserveWhitespace=e.preserveWhitespace,this.sanitizeElements=e.sanitize&&e.sanitize.elements,this.sanitizeEventAttributes=e.sanitize&&e.sanitize.eventAttributes,this.includeLinePositions=e.includeLinePositions},postProcess:function(t){return t.length?(this.sectionDepth>0&&this.error("A section was left open"),br(t[0].t,this.stripComments,this.preserveWhitespace,!this.preserveWhitespace,!this.preserveWhitespace),t[0]):{t:[],v:3}},converters:[fo],sortMustacheTags:function(){this.tags.sort((function(t,e){return e.open.length-t.open.length}))}});var xo=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","interpolate"],ko={fromId:function(e,n){var i;if(!t){if(n&&n.noThrow)return;throw new Error("Cannot retrieve template #"+e+" as Ractive is not running in a browser.")}Ao(e)&&(e=e.substring(1));if(!(i=document.getElementById(e))){if(n&&n.noThrow)return;throw new Error("Could not find template element with id #"+e)}if("SCRIPT"!==i.tagName.toUpperCase()){if(n&&n.noThrow)return;throw new Error("Template element with id #"+e+", must be a <script> element")}return"textContent"in i?i.textContent:i.innerHTML},isHashedId:Ao,isParsed:function(t){return!("string"==typeof t)},getParseOptions:function(t){t.defaults&&(t=t.defaults);return xo.reduce((function(e,n){return e[n]=t[n],e}),{})},createHelper:function(t){var e=_(ko);return e.parse=function(e,n){return Eo(e,n||t)},e},parse:Eo};function Eo(t,e){if(!mo)throw new Error("Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser");return mo(t,e||this.options)}function Ao(t){return t&&"#"===t[0]}var Co=ko;function So(t,e){var n=function(t){var e=_(Co);return e.parse=function(e,n){return Co.parse(e,n||t)},e}(Co.getParseOptions(t));return e.call(t,n)}function Oo(t,e){if("string"==typeof t)"#"===t[0]&&(t=Co.fromId(t)),t=mo(t,Co.getParseOptions(e));else{if(null==t)throw new Error("The template cannot be "+t+".");if("number"!=typeof t.v)throw new Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");if(3!==t.v)throw new Error("Mismatched template version (expected 3, got "+t.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app")}return t}function To(t,e,n){if(e)for(var i in e)!n&&t.hasOwnProperty(i)||(t[i]=e[i])}var Po,$o,jo={name:"template",extend:function(t,e,n){var i;"template"in n&&(i=n.template,e.template="function"==typeof i?i:Oo(i,e))},init:function(t,e,n){var i,r;"function"==typeof(i="template"in n?n.template:t.prototype.template)&&(i=So(e,r=i),e._config.template={fn:r,result:i}),i=Oo(i,e),e.template=i.t,i.p&&To(e.partials,i.p)},reset:function(t){var e,n=function(t){var e,n=t._config.template;if(!n||!n.fn)return;if((e=So(t,n.fn))!==n.result)return n.result=e,e=Oo(e,t)}(t);if(n)return e=Oo(n,t),t.template=e.t,To(t.partials,e.p,!0),!0}};Po=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],($o=function(t,e){this.name=t,this.useDefaults=e}).prototype={constructor:$o,extend:function(t,e,n){this.configure(this.useDefaults?t.defaults:t,this.useDefaults?e:e.constructor,n)},init:function(){},configure:function(t,e,n){var i,r=this.name,o=n[r];for(var s in i=_(t[r]),o)i[s]=o[s];e[r]=i},reset:function(t){var e=t[this.name],n=!1;return Object.keys(e).forEach((function(t){var i=e[t];i._fn&&(i._fn.isOwner?e[t]=i._fn:delete e[t],n=!0)})),n}};var Ro=Po.map((function(t){return new $o(t,"computed"===t)})),Do=function(t,e,n){if(!/_super/.test(n))return n;var i=function(){var t,r=Lo(i._parent,e),o="_super"in this,s=this._super;return this._super=r,t=n.apply(this,arguments),o?this._super=s:delete this._super,t};return i._parent=t,i._method=n,i};function Lo(t,e){var n;return e in t?"function"==typeof(n=t[e])?n:function(){return n}:F}var Io,No,Fo,qo,Mo,Uo=function(t){Wo(t,"beforeInit","onconstruct"),Wo(t,"init","onrender"),Wo(t,"complete","oncomplete"),Wo(t,"eventDefinitions","events"),T(t.adaptors)&&Wo(t,"adaptors","adapt")};function zo(t,e,n){return"options."+t+" has been deprecated in favour of options."+e+"."+(n?" You cannot specify both options, please use options."+e+".":"")}function Wo(t,e,n){if(e in t){if(n in t)throw new Error(zo(e,n,!0));B(zo(e,n)),t[n]=t[e]}}function Vo(t,e,n,i){for(var r in Uo(i),i)if(Mo.hasOwnProperty(r)){var o=i[r];"el"!==r&&"function"==typeof o?B(r+" is a Ractive option that does not expect a function and will be ignored","init"===t?n:null):n[r]=o}Ro.forEach((function(r){r[t](e,n,i)})),vn[t](e,n,i),jo[t](e,n,i),Sn[t](e,n,i),function(t,e,n){for(var i in n)if(!qo[i]&&n.hasOwnProperty(i)){var r=n[i];"function"==typeof r&&(r=Do(t,i,r)),e[i]=r}}(e.prototype,n,i)}function Bo(t){var e={};return t.forEach((function(t){return e[t]=!0})),e}Fo={adapt:vn,css:Sn,data:On,template:jo},No=Object.keys(g),Mo=Bo(No.filter((function(t){return!Fo[t]}))),qo=Bo(No.concat(Ro.map((function(t){return t.name}))));var Ho={extend:function(t,e,n){return Vo("extend",t,e,n)},init:function(t,e,n){return Vo("init",t,e,n)},reset:function(t){return Io.filter((function(e){return e.reset&&e.reset(t)})).map((function(t){return t.name}))},order:Io=[].concat(No.filter((function(t){return!Ro[t]&&!Fo[t]})),Ro,Fo.data,Fo.template,Fo.css)},Zo=function(){this.dirtyValue=this.dirtyArgs=!0,this.bound&&"function"==typeof this.owner.bubble&&this.owner.bubble()};var Go=function(){var t;if(1===this.items.length)return this.items[0].detach();return t=document.createDocumentFragment(),this.items.forEach((function(e){var n=e.detach();n&&t.appendChild(n)})),t};var Ko=function(t){var e,n,i,r;if(this.items){for(n=this.items.length,e=0;e<n;e+=1)if((i=this.items[e]).find&&(r=i.find(t)))return r;return null}};var Qo=function(t,e){var n,i,r;if(this.items)for(i=this.items.length,n=0;n<i;n+=1)(r=this.items[n]).findAll&&r.findAll(t,e);return e};var Yo=function(t,e){var n,i,r;if(this.items)for(i=this.items.length,n=0;n<i;n+=1)(r=this.items[n]).findAllComponents&&r.findAllComponents(t,e);return e};var Jo=function(t){var e,n,i,r;if(this.items){for(e=this.items.length,n=0;n<e;n+=1)if((i=this.items[n]).findComponent&&(r=i.findComponent(t)))return r;return null}};var Xo=function(t){var e,n=t.index;e=this.items[n+1]?this.items[n+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this);return e};var ts=function(){if(this.items&&this.items[0])return this.items[0].firstNode();return null};var es=function t(e,n,i,r){return r=r||0,e.map((function(e){var o,s,a;return e.text?e.text:e.fragments?e.fragments.map((function(e){return t(e.items,n,i,r)})).join(""):(o=i+"-"+r++,a=e.keypath&&(s=e.root.viewmodel.wrapped[e.keypath.str])?s.value:e.getValue(),n[o]=a,"${"+o+"}")})).join("")};var ns=function(){var t,e,n,i;this.dirtyArgs&&(e=es(this.items,t={},this.root._guid),n=Vr("["+e+"]",t),i=n?n.value:[this.toString()],this.argsList=i,this.dirtyArgs=!1);return this.argsList};var is=function(){var t=this;do{if(t.pElement)return t.pElement.node}while(t=t.parent);return this.root.detached||this.root.el};var rs=function(){var t,e,n,i;this.dirtyValue&&(e=es(this.items,t={},this.root._guid),n=Vr(e,t),i=n?n.value:this.toString(),this.value=i,this.dirtyValue=!1);return this.value};var os=function(){return b(this.node)},ss=function(t){this.type=1,this.text=t.template};ss.prototype={detach:os,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createTextNode(this.text)),this.node},toString:function(t){return t?pr(this.text):this.text},unrender:function(t){if(t)return this.detach()}};var as=ss,ls=function(){this.registered&&this.root.viewmodel.unregister(this.keypath,this);this.resolver&&this.resolver.unbind()};var us=function(){return this.value};var cs=function(t,e,n){var i;this.ref=e,this.resolved=!1,this.root=t.root,this.parentFragment=t.parentFragment,this.callback=n,null!=(i=It(t.root,e,t.parentFragment))?this.resolve(i):Jt.addUnresolved(this)};cs.prototype={resolve:function(t){this.keypath&&!t&&Jt.addUnresolved(this),this.resolved=!0,this.keypath=t,this.callback(t)},forceResolution:function(){this.resolve(at(this.ref))},rebind:function(t,e){var n;null!=this.keypath&&void 0!==(n=this.keypath.replace(t,e))&&this.resolve(n)},unbind:function(){this.resolved||Jt.removeUnresolved(this)}};var hs=cs,ds=function(t,e,n){this.parentFragment=t.parentFragment,this.ref=e,this.callback=n,this.rebind()},ps={"@keypath":{prefix:"c",prop:["context"]},"@index":{prefix:"i",prop:["index"]},"@key":{prefix:"k",prop:["key","index"]}};function fs(t,e){for(var n,i=0;i<e.prop.length;i++)if(void 0!==(n=t[e.prop[i]]))return n}ds.prototype={rebind:function(){var t,e=this.ref,n=this.parentFragment,i=ps[e];if(!i)throw new Error('Unknown special reference "'+e+'" - valid references are @index, @key and @keypath');if(this.cached)return this.callback(at("@"+i.prefix+fs(this.cached,i)));if(-1!==i.prop.indexOf("index")||-1!==i.prop.indexOf("key"))for(;n;){if(n.owner.currentSubtype===qn&&void 0!==(t=fs(n,i)))return this.cached=n,n.registerIndexRef(this),this.callback(at("@"+i.prefix+t));n=!n.parent&&n.owner&&n.owner.component&&n.owner.component.parentFragment&&!n.owner.component.instance.isolated?n.owner.component.parentFragment:n.parent}else for(;n;){if(void 0!==(t=fs(n,i)))return this.callback(at("@"+i.prefix+t.str));n=n.parent}},unbind:function(){this.cached&&this.cached.unregisterIndexRef(this)}};var ms=ds,gs=function(t,e,n){this.parentFragment=t.parentFragment,this.ref=e,this.callback=n,e.ref.fragment.registerIndexRef(this),this.rebind()};gs.prototype={rebind:function(){var t,e=this.ref.ref;void 0!==(t="k"===e.ref.t?"k"+e.fragment.key:"i"+e.fragment.index)&&this.callback(at("@"+t))},unbind:function(){this.ref.ref.fragment.unregisterIndexRef(this)}};var vs=gs,ys=bs;function bs(t,e){var n,i,r,o,s,a={},l=!1;for(e||(a.refs=n={});t;){if((s=t.owner)&&(i=s.indexRefs)){if(e&&(r=s.getIndexRef(e)))return a.ref={fragment:t,ref:r},a;if(!e)for(o in i)n[(r=i[o]).n]||(l=!0,n[r.n]={fragment:t,ref:r})}!t.parent&&t.owner&&t.owner.component&&t.owner.component.parentFragment&&!t.owner.component.instance.isolated?(a.componentBoundary=!0,t=t.owner.component.parentFragment):t=t.parent}return l?a:void 0}bs.resolve=function(t){var e,n,i={};for(e in t.refs)i[(n=t.refs[e]).ref.n]="k"===n.ref.t?n.fragment.key:n.fragment.index;return i};var ws=function(t,e,n){var i;if("@"===e.charAt(0))return new ms(t,e,n);if(i=ys(t.parentFragment,e))return new vs(t,i,n);return new hs(t,e,n)};var _s=function(t,e){var n,i;if(xs[t])return xs[t];i=[];for(;e--;)i[e]="_"+e;return n=new Function(i.join(","),"return("+t+")"),xs[t]=n,n},xs={};var ks,Es=Function.prototype.bind;(ks=function(t,e,n,i){var r,o=this;r=t.root,this.root=r,this.parentFragment=e,this.callback=i,this.owner=t,this.str=n.s,this.keypaths=[],this.pending=n.r.length,this.refResolvers=n.r.map((function(t,e){return ws(o,t,(function(t){o.resolve(e,t)}))})),this.ready=!0,this.bubble()}).prototype={bubble:function(){var t,e;this.ready&&(this.uniqueString=(t=this.str,e=this.keypaths,t.replace(/_([0-9]+)/g,(function(t,n){var i,r;return+n>=e.length?"_"+n:void 0===(i=e[n])?"undefined":i.isSpecial?"number"==typeof(r=i.value)?r:'"'+r+'"':i.str}))),this.keypath=at("${"+this.uniqueString.replace(/[\.\[\]]/g,"-").replace(/\*/,"#MUL#")+"}"),this.createEvaluator(),this.callback(this.keypath))},unbind:function(){for(var t;t=this.refResolvers.pop();)t.unbind()},resolve:function(t,e){this.keypaths[t]=e,this.bubble()},createEvaluator:function(){var t,e,n,i,r=this;n=this.keypath,this.root.viewmodel.computations[n.str]?this.root.viewmodel.mark(n):(i=_s(this.str,this.refResolvers.length),t=this.keypaths.map((function(t){var e;return"undefined"===t?function(){}:t.isSpecial?(e=t.value,function(){return e}):function(){var e=r.root.viewmodel.get(t,{noUnwrap:!0,fullRootGet:!0});return"function"==typeof e&&(e=function(t,e){var n,i,r;if(t.__ractive_nowrap)return t;if(n=t[i="__ractive_"+e._guid])return n;if(/this/.test(t.toString())){for(r in x(t,i,{value:Es.call(t,e),configurable:!0}),t)t.hasOwnProperty(r)&&(t[i][r]=t[r]);return e._boundFunctions.push({fn:t,prop:i}),t[i]}return x(t,"__ractive_nowrap",{value:t}),t.__ractive_nowrap}(e,r.root)),e}})),e={deps:this.keypaths.filter(Ss),getter:function(){var e=t.map(Cs);return i.apply(null,e)}},this.root.viewmodel.compute(n,e))},rebind:function(t,e){this.refResolvers.forEach((function(n){return n.rebind(t,e)}))}};var As=ks;function Cs(t){return t.call()}function Ss(t){return void 0!==t&&"@"!==t[0]}var Os=function(t,e,n){var i=this;this.resolver=e,this.root=e.root,this.parentFragment=n,this.viewmodel=e.root.viewmodel,"string"==typeof t?this.value=t:t.t===In?this.refResolver=ws(this,t.n,(function(t){i.resolve(t)})):new As(e,n,t,(function(t){i.resolve(t)}))};Os.prototype={resolve:function(t){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.keypath=t,this.value=this.viewmodel.get(t),this.bind(),this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(t,e){this.refResolver&&this.refResolver.rebind(t,e)},setValue:function(t){this.value=t,this.resolver.bubble()},unbind:function(){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.refResolver&&this.refResolver.unbind()},forceResolution:function(){this.refResolver&&this.refResolver.forceResolution()}};var Ts=Os,Ps=function(t,e,n){var i,r,o,s,a=this;this.parentFragment=s=t.parentFragment,this.root=i=t.root,this.mustache=t,this.ref=r=e.r,this.callback=n,this.unresolved=[],(o=It(i,r,s))?this.base=o:this.baseResolver=new hs(this,r,(function(t){a.base=t,a.baseResolver=null,a.bubble()})),this.members=e.m.map((function(t){return new Ts(t,a,s)})),this.ready=!0,this.bubble()};function $s(t){return t.value}function js(t){return null!=t}function Rs(t){t.forceResolution()}Ps.prototype={getKeypath:function(){var t=this.members.map($s);return!t.every(js)||this.baseResolver?null:this.base.join(t.join("."))},bubble:function(){this.ready&&!this.baseResolver&&this.callback(this.getKeypath())},unbind:function(){this.members.forEach(Ut)},rebind:function(t,e){var n;if(this.base){var i=this.base.replace(t,e);i&&i!==this.base&&(this.base=i,n=!0)}this.members.forEach((function(i){i.rebind(t,e)&&(n=!0)})),n&&this.bubble()},forceResolution:function(){this.baseResolver&&(this.base=at(this.ref),this.baseResolver.unbind(),this.baseResolver=null),this.members.forEach(Rs),this.bubble()}};var Ds=Ps;var Ls=function(t,e){this.fragments&&this.fragments.forEach((function(n){return n.rebind(t,e)}));this.resolver&&this.resolver.rebind(t,e)};var Is={getValue:us,init:function(t,e){var n,i,r;i=e.parentFragment,r=e.template,t.root=i.root,t.parentFragment=i,t.pElement=i.pElement,t.template=e.template,t.index=e.index||0,t.isStatic=e.template.s,t.type=e.template.t,t.registered=!1,(n=r.r)&&(t.resolver=ws(t,n,(function(e){t.resolve(e)})));e.template.x&&(t.resolver=new As(t,i,e.template.x,o));e.template.rx&&(t.resolver=new Ds(t,e.template.rx,o));t.template.n!==Fn||t.hasOwnProperty("value")||t.setValue(void 0);function o(e){var n=t.keypath;e!=n&&(t.resolve(e),void 0!==n&&t.fragments&&t.fragments.forEach((function(t){t.rebind(n,e)})))}},resolve:function(t){var e,n,i;if(t&&t.isSpecial)return this.keypath=t,void this.setValue(t.value);this.registered&&(this.root.viewmodel.unregister(this.keypath,this),this.registered=!1,e=!0);this.keypath=t,null!=t&&(n=this.root.viewmodel.get(t),this.root.viewmodel.register(t,this),this.registered=!0);this.setValue(n),e&&(i=this.twowayBinding)&&i.rebound()},rebind:Ls},Ns=function(t){this.type=2,Is.init(this,t)};Ns.prototype={update:function(){this.node.data=null==this.value?"":this.value},resolve:Is.resolve,rebind:Is.rebind,detach:os,unbind:ls,render:function(){return this.node||(this.node=document.createTextNode(w(this.value))),this.node},unrender:function(t){t&&b(this.node)},getValue:Is.getValue,setValue:function(t){var e;this.keypath&&(e=this.root.viewmodel.wrapped[this.keypath.str])&&(t=e.get()),$(t,this.value)||(this.value=t,this.parentFragment.bubble(),this.node&&Jt.addView(this))},firstNode:function(){return this.node},toString:function(t){var e=""+w(this.value);return t?pr(e):e}};var Fs=Ns;var qs=function(t){var e,n,i,r,o,s=this;if(this.shuffling||this.unbound||this.currentSubtype!==qn)return;if(this.shuffling=!0,Jt.scheduleTask((function(){return s.shuffling=!1})),this.parentFragment,r=[],t.forEach((function(t,n){var i,o,a,l;if(t!==n){if(i=s.fragments[n],void 0===e&&(e=n),-1===t)return s.fragmentsToUnrender.push(i),void i.unbind();t-n,o=s.keypath.join(n),a=s.keypath.join(t),i.index=t,(l=i.registeredIndexRefs)&&l.forEach(Ms),i.rebind(o,a),r[t]=i}else r[t]=s.fragments[n]})),i=this.root.viewmodel.get(this.keypath).length,void 0===e){if(this.length===i)return;e=this.length}this.length=this.fragments.length=i,this.rendered&&Jt.addView(this);for({template:this.template.f,root:this.root,owner:this},n=e;n<i;n+=1)(o=r[n])||this.fragmentsToCreate.push(n),this.fragments[n]=o};function Ms(t){t.rebind("","")}var Us=function(){var t=this;return this.docFrag=document.createDocumentFragment(),this.fragments.forEach((function(e){return t.docFrag.appendChild(e.render())})),this.renderedFragments=this.fragments.slice(),this.fragmentsToRender=[],this.rendered=!0,this.docFrag};var zs=function(t){var e,n,i=this;if(this.updating)return;this.updating=!0,this.keypath&&(e=this.root.viewmodel.wrapped[this.keypath.str])&&(t=e.get());this.fragmentsToCreate.length?(n={template:this.template.f||[],root:this.root,pElement:this.pElement,owner:this},this.fragmentsToCreate.forEach((function(t){var e;n.context=i.keypath.join(t),n.index=t,e=new Nh(n),i.fragmentsToRender.push(i.fragments[t]=e)})),this.fragmentsToCreate.length=0):function(t,e){var n={template:t.template.f||[],root:t.root,pElement:t.parentFragment.pElement,owner:t};if(t.hasContext=!0,t.subtype)switch(t.subtype){case Nn:return t.hasContext=!1,Hs(t,e,!1,n);case Fn:return t.hasContext=!1,Hs(t,e,!0,n);case Mn:return Bs(t,n);case 54:return function(t,e,n){return e?Bs(t,n):Zs(t)}(t,e,n);case qn:if(R(e))return Ws(t,t.subtype,!0),Vs(t,e,n)}if(t.ordered=!!P(e),t.ordered)return Ws(t,qn,!1),function(t,e,n){var i,r,o;if((r=e.length)===t.length)return!1;if(r<t.length)t.fragmentsToUnrender=t.fragments.splice(r,t.length-r),t.fragmentsToUnrender.forEach(Ut);else if(r>t.length)for(i=t.length;i<r;i+=1)n.context=t.keypath.join(i),n.index=i,o=new Nh(n),t.fragmentsToRender.push(t.fragments[i]=o);return t.length=r,!0}(t,e,n);if(R(e)||"function"==typeof e)return t.template.i?(Ws(t,qn,!0),Vs(t,e,n)):(Ws(t,Mn,!1),Bs(t,n));return Ws(t,Nn,!1),t.hasContext=!1,Hs(t,e,!1,n)}(this,t)&&(this.bubble(),this.rendered&&Jt.addView(this));this.value=t,this.updating=!1};function Ws(t,e,n){if(e===qn&&t.indexRefs&&t.indexRefs[0]){var i=t.indexRefs[0];(n&&"i"===i.t||!n&&"k"===i.t)&&(n||(t.length=0,t.fragmentsToUnrender=t.fragments.slice(0),t.fragmentsToUnrender.forEach((function(t){return t.unbind()})))),i.t=n?"k":"i"}t.currentSubtype=e}function Vs(t,e,n){var i,r,o,s,a,l;for(o=t.hasKey||(t.hasKey={}),r=t.fragments.length;r--;)(s=t.fragments[r]).key in e||(a=!0,s.unbind(),t.fragmentsToUnrender.push(s),t.fragments.splice(r,1),o[s.key]=!1);for(r=t.fragments.length;r--;)(s=t.fragments[r]).index!==r&&(s.index=r,(l=s.registeredIndexRefs)&&l.forEach(Ks));for(i in r=t.fragments.length,e)o[i]||(a=!0,n.context=t.keypath.join(i),n.key=i,n.index=r++,s=new Nh(n),t.fragmentsToRender.push(s),t.fragments.push(s),o[i]=!0);return t.length=t.fragments.length,a}function Bs(t,e){var n;if(!t.length)return e.context=t.keypath,e.index=0,n=new Nh(e),t.fragmentsToRender.push(t.fragments[0]=n),t.length=1,!0}function Hs(t,e,n,i){var r,o,s,a;if(r=P(e)&&0===e.length,o=!1,!P(e)&&R(e))for(a in o=!0,e){o=!1;break}return(n?r||o||!e:e&&!r&&!o)?t.length?t.length>1?(t.fragmentsToUnrender=t.fragments.splice(1),t.fragmentsToUnrender.forEach(Ut),!0):void 0:(i.index=0,s=new Nh(i),t.fragmentsToRender.push(t.fragments[0]=s),t.length=1,!0):Zs(t)}function Zs(t){if(t.length)return t.fragmentsToUnrender=t.fragments.splice(0,t.fragments.length).filter(Gs),t.fragmentsToUnrender.forEach(Ut),t.length=t.fragmentsToRender.length=0,!0}function Gs(t){return t.rendered}function Ks(t){t.rebind("","")}var Qs=function(t){var e,n,i;for(e="",n=0,i=this.length,n=0;n<i;n+=1)e+=this.fragments[n].toString(t);return e};var Ys=function(){var t=this;this.fragments.forEach(Ut),this.fragmentsToRender.forEach((function(e){return Ct(t.fragments,e)})),this.fragmentsToRender=[],ls.call(this),this.length=0,this.unbound=!0};var Js=function(t){this.fragments.forEach(t?Xs:ta),this.renderedFragments=[],this.rendered=!1};function Xs(t){t.unrender(!0)}function ta(t){t.unrender(!1)}var ea=function(){var t,e,n,i,r,o,s;n=this.renderedFragments;for(;t=this.fragmentsToUnrender.pop();)t.unrender(!0),n.splice(n.indexOf(t),1);for(;t=this.fragmentsToRender.shift();)t.render();this.rendered&&(r=this.parentFragment.getNode());for(s=this.fragments.length,o=0;o<s;o+=1)t=this.fragments[o],(e=n.indexOf(t,o))!==o?(this.docFrag.appendChild(t.detach()),-1!==e&&n.splice(e,1),n.splice(o,0,t)):this.docFrag.childNodes.length&&(i=t.firstNode(),r.insertBefore(this.docFrag,i));this.rendered&&this.docFrag.childNodes.length&&(i=this.parentFragment.findNextNode(this),r.insertBefore(this.docFrag,i));this.renderedFragments=this.fragments.slice()};var na=function(t){this.type=4,this.subtype=this.currentSubtype=t.template.n,this.inverted=this.subtype===Fn,this.pElement=t.pElement,this.fragments=[],this.fragmentsToCreate=[],this.fragmentsToRender=[],this.fragmentsToUnrender=[],t.template.i&&(this.indexRefs=t.template.i.split(",").map((function(t,e){return{n:t,t:0===e?"k":"i"}}))),this.renderedFragments=[],this.length=0,Is.init(this,t)};na.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){var t;if(1===this.fragments.length)return this.fragments[0].detach();return t=document.createDocumentFragment(),this.fragments.forEach((function(e){t.appendChild(e.detach())})),t},find:function(t){var e,n,i;for(n=this.fragments.length,e=0;e<n;e+=1)if(i=this.fragments[e].find(t))return i;return null},findAll:function(t,e){var n,i;for(i=this.fragments.length,n=0;n<i;n+=1)this.fragments[n].findAll(t,e)},findAllComponents:function(t,e){var n,i;for(i=this.fragments.length,n=0;n<i;n+=1)this.fragments[n].findAllComponents(t,e)},findComponent:function(t){var e,n,i;for(n=this.fragments.length,e=0;e<n;e+=1)if(i=this.fragments[e].findComponent(t))return i;return null},findNextNode:function(t){if(this.fragments[t.index+1])return this.fragments[t.index+1].firstNode();return this.parentFragment.findNextNode(this)},firstNode:function(){var t,e,n;if(t=this.fragments.length)for(e=0;e<t;e+=1)if(n=this.fragments[e].firstNode())return n;return this.parentFragment.findNextNode(this)},getIndexRef:function(t){if(this.indexRefs)for(var e=this.indexRefs.length;e--;){var n=this.indexRefs[e];if(n.n===t)return n}},getValue:Is.getValue,shuffle:qs,rebind:function(t,e){Is.rebind.call(this,t,e)},render:Us,resolve:Is.resolve,setValue:zs,toString:Qs,unbind:Ys,unrender:Js,update:ea};var ia=na,ra=function(){var t,e;if(this.docFrag){for(t=this.nodes.length,e=0;e<t;e+=1)this.docFrag.appendChild(this.nodes[e]);return this.docFrag}};var oa=function(t){var e,n,i,r;for(n=this.nodes.length,e=0;e<n;e+=1)if(1===(i=this.nodes[e]).nodeType){if(l(i,t))return i;if(r=i.querySelector(t))return r}return null};var sa=function(t,e){var n,i,r,o,s,a;for(i=this.nodes.length,n=0;n<i;n+=1)if(1===(r=this.nodes[n]).nodeType&&(l(r,t)&&e.push(r),o=r.querySelectorAll(t)))for(s=o.length,a=0;a<s;a+=1)e.push(o[a])};var aa=function(){if(this.rendered&&this.nodes[0])return this.nodes[0];return this.parentFragment.findNextNode(this)};var la,ua,ca={};try{a("table").innerHTML="foo"}catch(t){la=!0,ua={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var ha=function(t,e,n){var i,o,s,a,l,u=[];if(null!=t&&""!==t){for(la&&(o=ua[e.tagName])?((i=da("DIV")).innerHTML=o[0]+t+o[1],"SELECT"===(i=i.querySelector(".x")).tagName&&(s=i.options[i.selectedIndex])):e.namespaceURI===r.svg?((i=da("DIV")).innerHTML='<svg class="x">'+t+"</svg>",i=i.querySelector(".x")):((i=da(e.tagName)).innerHTML=t,"SELECT"===i.tagName&&(s=i.options[i.selectedIndex]));a=i.firstChild;)u.push(a),n.appendChild(a);if("SELECT"===e.tagName)for(l=u.length;l--;)u[l]!==s&&(u[l].selected=!1)}return u};function da(t){return ca[t]||(ca[t]=a(t))}var pa=function(t){var e,n,i;if(!t||"select"!==t.name||!t.binding)return;e=St(t.node.options).filter(fa),t.getAttribute("multiple")?i=e.map((function(t){return t.value})):(n=e[0])&&(i=n.value);void 0!==i&&t.binding.setValue(i);t.bubble()};function fa(t){return t.selected}var ma=function(){if(this.rendered)throw new Error("Attempted to render an item that was already rendered");return this.docFrag=document.createDocumentFragment(),this.nodes=ha(this.value,this.parentFragment.getNode(),this.docFrag),pa(this.pElement),this.rendered=!0,this.docFrag};var ga=function(t){var e;(e=this.root.viewmodel.wrapped[this.keypath.str])&&(t=e.get());t!==this.value&&(this.value=t,this.parentFragment.bubble(),this.rendered&&Jt.addView(this))};var va=function(){return null!=this.value?dr(""+this.value):""};var ya=function(t){this.rendered&&t&&(this.nodes.forEach(b),this.rendered=!1)};var ba=function(){var t,e;if(!this.rendered)return;for(;this.nodes&&this.nodes.length;)(t=this.nodes.pop()).parentNode.removeChild(t);e=this.parentFragment.getNode(),this.nodes=ha(this.value,e,this.docFrag),e.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),pa(this.pElement)};var wa=function(t){this.type=3,Is.init(this,t)};wa.prototype={detach:ra,find:oa,findAll:sa,firstNode:aa,getValue:Is.getValue,rebind:Is.rebind,render:ma,resolve:Is.resolve,setValue:ga,toString:va,unbind:ls,unrender:ya,update:ba};var _a=wa,xa=function(){var t,e=this.node;if(e)return(t=e.parentNode)&&t.removeChild(e),e};var ka=function(){return null};var Ea=function(){return this.node};var Aa=function(t){if(!this.attributes||!this.attributes[t])return;return this.attributes[t].value};var Ca,Sa,Oa,Ta,Pa=/^true|on|yes|1$/i,$a=/^[0-9]+$/,ja=function(){var t=this.useProperty||!this.rendered?this.fragment.getValue():this.fragment.toString();$(t,this.value)||("id"===this.name&&this.value&&delete this.root.nodes[this.value],this.value=t,"value"===this.name&&this.node&&(this.node._ractive.value=t),this.rendered&&Jt.addView(this))};Ca="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),Sa="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),Oa=function(t){for(var e={},n=t.length;n--;)e[t[n].toLowerCase()]=t[n];return e},Ta=Oa(Ca.concat(Sa));var Ra=function(t){var e=t.toLowerCase();return Ta[e]||e},Da=function(t){var e=t.fragment.items;if(1!==e.length)return;if(2===e[0].type)return e[0]};var La=function(t){var e;this.node=t,t.namespaceURI&&t.namespaceURI!==r.html||(e=Ia[this.name]||this.name,void 0!==t[e]&&(this.propertyName=e),(this.isBoolean||this.isTwoway)&&(this.useProperty=!0),"value"===e&&(t._ractive.value=this.value));this.rendered=!0,this.update()},Ia={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor",class:"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName",for:"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"};var Na=function(){var t,e,n,i=this.value;if(!this.locked)for(this.node._ractive.value=i,t=this.node.options,n=t.length;n--;)if(e=t[n],(e._ractive?e._ractive.value:e.value)==i){e.selected=!0;break}};var Fa=function(){var t,e,n,i,r=this.value;T(r)||(r=[r]);t=this.node.options,e=t.length;for(;e--;)n=t[e],i=n._ractive?n._ractive.value:n.value,n.selected=xt(r,i)};var qa=function(){var t=this.node,e=this.value;t.checked=e==t._ractive.value};var Ma=function(){var t,e,n,i,r=this.node;if(t=r.checked,r.value=this.element.getAttribute("value"),r.checked=this.element.getAttribute("value")===this.element.getAttribute("name"),t&&!r.checked&&this.element.binding&&(n=this.element.binding.siblings,i=n.length)){for(;i--;){if(!(e=n[i]).element.node)return;if(e.element.node.checked)return Jt.addRactive(e.root),e.handleChange()}this.root.viewmodel.set(e.keypath,void 0)}};var Ua=function(){var t,e,n=this,i=n.element,r=n.node,o=n.value,s=i.binding;if(t=i.getAttribute("value"),T(o)){for(e=o.length;e--;)if(t==o[e])return void(s.isChecked=r.checked=!0);s.isChecked=r.checked=!1}else s.isChecked=r.checked=o==t};var za=function(){this.node.className=w(this.value)};var Wa=function(){var t=this.node,e=this.value;this.root.nodes[e]=t,t.id=e};var Va=function(){var t,e;t=this.node,void 0===(e=this.value)&&(e="");t.style.setAttribute("cssText",e)};var Ba=function(){var t=this.value;void 0===t&&(t="");this.locked||(this.node.innerHTML=t)};var Ha=function(){var t=this.node,e=this.value;t._ractive.value=e,this.locked||(t.value=null==e?"":e)};var Za=function(){this.locked||(this.node[this.propertyName]=this.value)};var Ga=function(){var t=this,e=t.node,n=t.namespace,i=t.name,r=t.value,o=t.fragment;n?e.setAttributeNS(n,i,(o||r).toString()):this.isBoolean?r?e.setAttribute(i,""):e.removeAttribute(i):null==r?e.removeAttribute(i):e.setAttribute(i,(o||r).toString())};var Ka=function(t){this.init(t)};Ka.prototype={bubble:ja,init:function(t){if(this.type=13,this.element=t.element,this.root=t.root,function(t,e){var n,i;if(-1===(n=e.indexOf(":"))||"xmlns"===(i=e.substr(0,n)))t.name=t.element.namespace!==r.html?Ra(e):e;else if(e=e.substring(n+1),t.name=Ra(e),t.namespace=r[i.toLowerCase()],t.namespacePrefix=i,!t.namespace)throw'Unknown namespace ("'+i+'")'}(this,t.name),this.isBoolean=ir.test(this.name),!t.value||"string"==typeof t.value)return void(this.value=!!this.isBoolean||(t.value||""));this.parentFragment=this.element.parentFragment,this.fragment=new Nh({template:t.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),this.interpolator=Da(this),this.isBindable=!!this.interpolator&&!this.interpolator.isStatic,this.ready=!0},rebind:function(t,e){this.fragment&&this.fragment.rebind(t,e)},render:La,toString:function(){var t=this,e=t.name,n=t.namespacePrefix,i=t.value,r=t.interpolator,o=t.fragment;if("value"===e&&("select"===this.element.name||"textarea"===this.element.name))return;if("value"===e&&void 0!==this.element.getAttribute("contenteditable"))return;if("name"===e&&"input"===this.element.name&&r)return"name={{"+(r.keypath.str||r.ref)+"}}";if(this.isBoolean)return i?e:"";if(o){if(1===o.items.length&&null==o.items[0].value)return"";i=o.toString()}n&&(e=n+":"+e);return i?e+'="'+function(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}(i)+'"':e},unbind:function(){this.fragment&&this.fragment.unbind();"id"===this.name&&delete this.root.nodes[this.value]},update:function(){var t,e,n=this,i=n.name,o=n.element,s=n.node;"id"===i?e=Wa:"value"===i?"select"===o.name&&"value"===i?e=o.getAttribute("multiple")?Fa:Na:"textarea"===o.name?e=Ha:null!=o.getAttribute("contenteditable")?e=Ba:"input"===o.name&&(t=o.getAttribute("type"),e="file"===t?F:"radio"===t&&o.binding&&"name"===o.binding.name?Ma:Ha):this.isTwoway&&"name"===i?"radio"===s.type?e=qa:"checkbox"===s.type&&(e=Ua):"style"===i&&s.style.setAttribute?e=Va:"class"!==i||s.namespaceURI&&s.namespaceURI!==r.html?this.useProperty&&(e=Za):e=za;e||(e=Ga);this.update=e,this.update()}};var Qa,Ya=Ka;"undefined"!=typeof document&&(Qa=a("div"));var Ja=function(t,e){this.element=t,this.root=t.root,this.parentFragment=t.parentFragment,this.attributes=[],this.fragment=new Nh({root:t.root,owner:this,template:[e]})};Ja.prototype={bubble:function(){this.node&&this.update(),this.element.bubble()},rebind:function(t,e){this.fragment.rebind(t,e)},render:function(t){this.node=t,this.isSvg=t.namespaceURI===r.svg,this.update()},unbind:function(){this.fragment.unbind()},update:function(){var t,e,n=this;t=this.fragment.toString(),e=function(t,e){var n=e?"svg":"div";return Qa.innerHTML="<"+n+" "+t+"></"+n+">",St(Qa.childNodes[0].attributes)}(t,this.isSvg),this.attributes.filter((function(t){return function(t,e){var n=t.length;for(;n--;)if(t[n].name===e.name)return!1;return!0}(e,t)})).forEach((function(t){n.node.removeAttribute(t.name)})),e.forEach((function(t){n.node.setAttribute(t.name,t.value)})),this.attributes=e},toString:function(){return this.fragment.toString()}};var Xa=Ja;var tl=function(t){var e,n,i,r;if(this.element=t,this.root=t.root,this.attribute=t.attributes[this.name||"value"],(e=this.attribute.interpolator).twowayBinding=this,n=e.keypath){if("}"===n.str.slice(-1))return H("Two-way binding does not work with expressions (`%s` on <%s>)",e.resolver.uniqueString,t.name,{ractive:this.root}),!1;if(n.isSpecial)return H("Two-way binding does not work with %s",e.resolver.ref,{ractive:this.root}),!1}else{B("The %s being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",e.template.r?"'"+e.template.r+"' reference":"expression",{ractive:this.root}),e.resolver.forceResolution(),n=e.keypath}this.attribute.isTwoway=!0,this.keypath=n,void 0===(i=this.root.viewmodel.get(n))&&this.getInitialValue&&void 0!==(i=this.getInitialValue())&&this.root.viewmodel.set(n,i),(r=function(t){for(;t=t.parent;)if("form"===t.name)return t}(t))&&(this.resetValue=i,r.formBindings.push(this))};tl.prototype={handleChange:function(){var t=this;Jt.start(this.root),this.attribute.locked=!0,this.root.viewmodel.set(this.keypath,this.getValue()),Jt.scheduleTask((function(){return t.attribute.locked=!1})),Jt.end()},rebound:function(){var t,e;(t=this.keypath)!==(e=this.attribute.interpolator.keypath)&&(Ct(this.root._twowayBindings[t.str],this),this.keypath=e,(this.root._twowayBindings[e.str]||(this.root._twowayBindings[e.str]=[])).push(this))},unbind:function(){}},tl.extend=function(t){var e;return A((e=function(t){tl.call(this,t),this.init&&this.init()}).prototype=_(this.prototype),t),e.extend=tl.extend,e};var el=tl;var nl=function(){this._ractive.binding.handleChange()};var il=el.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var t,e=this.element.node,n=!1;this.rendered=!0,t=this.root.lazy,!0===this.element.lazy?t=!0:!1===this.element.lazy?t=!1:j(this.element.lazy)?(t=!1,n=+this.element.lazy):j(t||"")&&(n=+t,t=!1,this.element.lazy=n),this.handler=n?ol:nl,e.addEventListener("change",nl,!1),t||(e.addEventListener("input",this.handler,!1),e.attachEvent&&e.addEventListener("keyup",this.handler,!1)),e.addEventListener("blur",rl,!1)},unrender:function(){var t=this.element.node;this.rendered=!1,t.removeEventListener("change",nl,!1),t.removeEventListener("input",this.handler,!1),t.removeEventListener("keyup",this.handler,!1),t.removeEventListener("blur",rl,!1)}});function rl(){var t;nl.call(this),t=this._ractive.root.viewmodel.get(this._ractive.binding.keypath),this.value=null==t?"":t}function ol(){var t=this._ractive.binding,e=this;t._timeout&&clearTimeout(t._timeout),t._timeout=setTimeout((function(){t.rendered&&nl.call(e),t._timeout=void 0}),t.element.lazy)}var sl=il.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},getValue:function(){return this.element.node.innerHTML}}),al=function(t,e,n){var i=t+e+n;return ll[i]||(ll[i]=[])},ll={};var ul=el.extend({name:"checked",init:function(){this.siblings=al(this.root._guid,"radio",this.element.getAttribute("name")),this.siblings.push(this)},render:function(){var t=this.element.node;t.addEventListener("change",nl,!1),t.attachEvent&&t.addEventListener("click",nl,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",nl,!1),t.removeEventListener("click",nl,!1)},handleChange:function(){Jt.start(this.root),this.siblings.forEach((function(t){t.root.viewmodel.set(t.keypath,t.getValue())})),Jt.end()},getValue:function(){return this.element.node.checked},unbind:function(){Ct(this.siblings,this)}}),cl=el.extend({name:"name",init:function(){this.siblings=al(this.root._guid,"radioname",this.keypath.str),this.siblings.push(this),this.radioName=!0},getInitialValue:function(){if(this.element.getAttribute("checked"))return this.element.getAttribute("value")},render:function(){var t=this.element.node;t.name="{{"+this.keypath.str+"}}",t.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value"),t.addEventListener("change",nl,!1),t.attachEvent&&t.addEventListener("click",nl,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",nl,!1),t.removeEventListener("click",nl,!1)},getValue:function(){var t=this.element.node;return t._ractive?t._ractive.value:t.value},handleChange:function(){this.element.node.checked&&el.prototype.handleChange.call(this)},rebound:function(t,e){var n;el.prototype.rebound.call(this,t,e),(n=this.element.node)&&(n.name="{{"+this.keypath.str+"}}")},unbind:function(){Ct(this.siblings,this)}});function hl(t){return t.isChecked}function dl(t){return t.element.getAttribute("value")}var pl=el.extend({name:"name",getInitialValue:function(){return this.noInitialValue=!0,[]},init:function(){var t,e;this.checkboxName=!0,this.siblings=al(this.root._guid,"checkboxes",this.keypath.str),this.siblings.push(this),this.noInitialValue&&(this.siblings.noInitialValue=!0),this.siblings.noInitialValue&&this.element.getAttribute("checked")&&(t=this.root.viewmodel.get(this.keypath),e=this.element.getAttribute("value"),t.push(e))},unbind:function(){Ct(this.siblings,this)},render:function(){var t,e,n=this.element.node;t=this.root.viewmodel.get(this.keypath),e=this.element.getAttribute("value"),T(t)?this.isChecked=xt(t,e):this.isChecked=t==e,n.name="{{"+this.keypath.str+"}}",n.checked=this.isChecked,n.addEventListener("change",nl,!1),n.attachEvent&&n.addEventListener("click",nl,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",nl,!1),t.removeEventListener("click",nl,!1)},changed:function(){var t=!!this.isChecked;return this.isChecked=this.element.node.checked,this.isChecked===t},handleChange:function(){this.isChecked=this.element.node.checked,el.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(hl).map(dl)}}),fl=el.extend({name:"checked",render:function(){var t=this.element.node;t.addEventListener("change",nl,!1),t.attachEvent&&t.addEventListener("click",nl,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",nl,!1),t.removeEventListener("click",nl,!1)},getValue:function(){return this.element.node.checked}}),ml=el.extend({getInitialValue:function(){var t,e,n,i,r=this.element.options;if(void 0===this.element.getAttribute("value")&&(e=t=r.length,t)){for(;e--;)if(r[e].getAttribute("selected")){n=r[e].getAttribute("value"),i=!0;break}if(!i)for(;++e<t;)if(!r[e].getAttribute("disabled")){n=r[e].getAttribute("value");break}return void 0!==n&&(this.element.attributes.value.value=n),n}},render:function(){this.element.node.addEventListener("change",nl,!1)},unrender:function(){this.element.node.removeEventListener("change",nl,!1)},setValue:function(t){this.root.viewmodel.set(this.keypath,t)},getValue:function(){var t,e,n,i;for(n=(t=this.element.node.options).length,e=0;e<n;e+=1)if(i=t[e],t[e].selected)return i._ractive?i._ractive.value:i.value},forceUpdate:function(){var t=this,e=this.getValue();void 0!==e&&(this.attribute.locked=!0,Jt.scheduleTask((function(){return t.attribute.locked=!1})),this.root.viewmodel.set(this.keypath,e))}}),gl=ml.extend({getInitialValue:function(){return this.element.options.filter((function(t){return t.getAttribute("selected")})).map((function(t){return t.getAttribute("value")}))},render:function(){this.element.node.addEventListener("change",nl,!1),void 0===this.root.viewmodel.get(this.keypath)&&this.handleChange()},unrender:function(){this.element.node.removeEventListener("change",nl,!1)},setValue:function(){throw new Error("TODO not implemented yet")},getValue:function(){var t,e,n,i,r,o;for(t=[],i=(e=this.element.node.options).length,n=0;n<i;n+=1)(r=e[n]).selected&&(o=r._ractive?r._ractive.value:r.value,t.push(o));return t},handleChange:function(){var t,e;return t=this.attribute.value,e=this.getValue(),void 0!==t&&kt(e,t)||ml.prototype.handleChange.call(this),this},forceUpdate:function(){var t=this,e=this.getValue();void 0!==e&&(this.attribute.locked=!0,Jt.scheduleTask((function(){return t.attribute.locked=!1})),this.root.viewmodel.set(this.keypath,e))},updateModel:function(){void 0!==this.attribute.value&&this.attribute.value.length||this.root.viewmodel.set(this.keypath,this.initialValue)}}),vl=el.extend({render:function(){this.element.node.addEventListener("change",nl,!1)},unrender:function(){this.element.node.removeEventListener("change",nl,!1)},getValue:function(){return this.element.node.files}}),yl=il.extend({getInitialValue:function(){},getValue:function(){var t=parseFloat(this.element.node.value);return isNaN(t)?void 0:t}}),bl=function(t){var e,n,i,r,o,s=t.attributes;t.binding&&(t.binding.teardown(),t.binding=null);(t.getAttribute("contenteditable")||s.contenteditable&&wl(s.contenteditable))&&wl(s.value)?n=sl:"input"===t.name?"radio"===(e=t.getAttribute("type"))||"checkbox"===e?(i=wl(s.name),r=wl(s.checked),i&&r&&B("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",{ractive:t.root}),i?n="radio"===e?cl:pl:r&&(n="radio"===e?ul:fl)):"file"===e&&wl(s.value)?n=vl:wl(s.value)&&(n="number"===e||"range"===e?yl:il):"select"===t.name&&wl(s.value)?n=t.getAttribute("multiple")?gl:ml:"textarea"===t.name&&wl(s.value)&&(n=il);if(n&&(o=new n(t))&&o.keypath)return o};function wl(t){return t&&t.isBindable}var _l=function(t,e,n){var i,r,o=this;this.element=t,this.root=t.root,this.parentFragment=t.parentFragment,this.name=e,-1!==e.indexOf("*")&&(U('Only component proxy-events may contain "*" wildcards, <%s on-%s="..."/> is not valid',t.name,e),this.invalid=!0);n.m?(r=n.a.r,this.method=n.m,this.keypaths=[],this.fn=_s(n.a.s,r.length),this.parentFragment=t.parentFragment,this.root,this.refResolvers=[],r.forEach((function(t,e){var n=void 0;(n=xl.exec(t))?o.keypaths[e]={eventObject:!0,refinements:n[1]?n[1].split("."):[]}:o.refResolvers.push(ws(o,t,(function(t){return o.resolve(e,t)})))})),this.fire=kl):("string"!=typeof(i=n.n||n)&&(i=new Nh({template:i,root:this.root,owner:this})),this.action=i,n.d?(this.dynamicParams=new Nh({template:n.d,root:this.root,owner:this.element}),this.fire=Al):n.a&&(this.params=n.a,this.fire=El))},xl=/^event(?:\.(.+))?/;function kl(t){var e,n,i;if("function"!=typeof(e=this.root)[this.method])throw new Error('Attempted to call a non-existent method ("'+this.method+'")');n=this.keypaths.map((function(n){var i,r,o;if(void 0!==n){if(n.eventObject){if(i=t,r=n.refinements.length)for(o=0;o<r;o+=1)i=i[n.refinements[o]]}else i=e.viewmodel.get(n);return i}})),Se.enqueue(e,t),i=this.fn.apply(null,n),e[this.method].apply(e,i),Se.dequeue(e)}function El(t){Oe(this.root,this.getAction(),{event:t,args:this.params})}function Al(t){var e=this.dynamicParams.getArgsList();"string"==typeof e&&(e=e.substr(1,e.length-2)),Oe(this.root,this.getAction(),{event:t,args:e})}var Cl=function(t){var e,n,i,r={};e=this._ractive,n=e.events[t.type],(i=ys(n.element.parentFragment))&&(r=ys.resolve(i));n.fire({node:this,original:t,index:r,keypath:e.keypath.str,context:e.root.viewmodel.get(e.keypath)})};var Sl=function(){var t,n=this.name;if(this.invalid)return;if(t=K("events",this.root,n))this.custom=t(this.node,function(t){Ol[t]||(Ol[t]=function(e){var n=e.node._ractive;e.index=n.index,e.keypath=n.keypath.str,e.context=n.root.viewmodel.get(n.keypath),n.events[t].fire(e)});return Ol[t]}(n));else{if(!("on"+n in this.node||window&&"on"+n in window||e))return void(Tl[n]||H(G(n,"event"),{node:this.node}));this.node.addEventListener(n,Cl,!1)}this.hasListener=!0},Ol={},Tl={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0,touchleave:!0};var Pl=function(t,e,n){this.init(t,e,n)};Pl.prototype={bubble:function(){var t=this.getAction();t&&!this.hasListener?this.listen():!t&&this.hasListener&&this.unrender()},fire:function(t){Oe(this.root,this.getAction(),{event:t})},getAction:function(){return this.action.toString().trim()},init:_l,listen:Sl,rebind:function(t,e){if(this.method)return this.element.parentFragment,void this.refResolvers.forEach(n);"string"!=typeof this.action&&n(this.action);this.dynamicParams&&n(this.dynamicParams);function n(n){n&&n.rebind(t,e)}},render:function(){this.node=this.element.node,this.node._ractive.events[this.name]=this,(this.method||this.getAction())&&this.listen()},resolve:function(t,e){this.keypaths[t]=e},unbind:function(){if(this.method)return void this.refResolvers.forEach(Ut);"string"!=typeof this.action&&this.action.unbind();this.dynamicParams&&this.dynamicParams.unbind()},unrender:function(){this.custom?this.custom.teardown():this.node.removeEventListener(this.name,Cl,!1);this.hasListener=!1}};var $l=Pl,jl=function(t,e){var n,i,r,o=this;this.element=t,this.root=n=t.root,"string"!=typeof(i=e.n||e)&&(i=(r=new Nh({template:i,root:n,owner:t})).toString(),r.unbind(),""===i)||(e.a?this.params=e.a:e.d&&(this.fragment=new Nh({template:e.d,root:n,owner:t}),this.params=this.fragment.getArgsList(),this.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,o.params=this.getArgsList(),o.ready&&o.update()}),this.fn=K("decorators",n,i),this.fn||U(G(i,"decorator")))};jl.prototype={init:function(){var t,e,n;if(t=this.element.node,this.params?(n=[t].concat(this.params),e=this.fn.apply(this.root,n)):e=this.fn.call(this.root,t),!e||!e.teardown)throw new Error("Decorator definition must return an object with a teardown method");this.actual=e,this.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},rebind:function(t,e){this.fragment&&this.fragment.rebind(t,e)},teardown:function(t){this.torndown=!0,this.ready&&this.actual.teardown(),!t&&this.fragment&&this.fragment.unbind()}};var Rl=jl;function Dl(){var t=this;this.dirty||(this.dirty=!0,Jt.scheduleTask((function(){!function(t){var e,n,i,r,o;if(!(e=t.node))return;r=St(e.options),n=t.getAttribute("value"),i=t.getAttribute("multiple"),void 0!==n?(r.forEach((function(t){var e,r;e=t._ractive?t._ractive.value:t.value,(r=i?function(t,e){var n=t.length;for(;n--;)if(t[n]==e)return!0}(n,e):n==e)&&(o=!0),t.selected=r})),o||(r[0]&&(r[0].selected=!0),t.binding&&t.binding.forceUpdate())):t.binding&&t.binding.forceUpdate()}(t),t.dirty=!1}))),this.parentFragment.bubble()}var Ll=function(t){var e,n,i,r,o,s;this.type=7,e=this.parentFragment=t.parentFragment,n=this.template=t.template,this.parent=t.pElement||e.pElement,this.root=i=e.root,this.index=t.index,this.key=t.key,this.name=Ra(n.e),"option"===this.name&&function(t,e){t.select=function(t){if(t)do{if("select"===t.name)return t}while(t=t.parent)}(t.parent),t.select&&(t.select.options.push(t),e.a||(e.a={}),void 0!==e.a.value||e.a.hasOwnProperty("disabled")||(e.a.value=e.f),"selected"in e.a&&void 0!==t.select.getAttribute("value")&&delete e.a.selected)}(this,n);"select"===this.name&&(this.options=[],this.bubble=Dl);"form"===this.name&&(this.formBindings=[]);s=function(t,e){var n,i,r;return i={},void 0!==(n=(r=e.a||{}).twoway)&&(i.twoway=0===n||Pa.test(n)),void 0!==(n=r.lazy)&&(0!==n&&$a.test(n)?i.lazy=parseInt(n):i.lazy=0===n||Pa.test(n)),i}(0,n),this.attributes=function(t,e){var n,i,r=[];for(n in e)"twoway"!==n&&"lazy"!==n&&e.hasOwnProperty(n)&&(i=new Ya({element:t,name:n,value:e[n],root:t.root}),r[n]=i,"value"!==n&&r.push(i));return(i=r.value)&&r.push(i),r}(this,n.a),this.conditionalAttributes=function(t,e){return e?e.map((function(e){return new Xa(t,e)})):[]}(this,n.m),n.f&&(this.fragment=new Nh({template:n.f,root:i,owner:this,pElement:this,cssIds:null}));o=i.twoway,!1===s.twoway?o=!1:!0===s.twoway&&(o=!0);this.twoway=o,this.lazy=s.lazy,o&&(r=bl(this,n.a))&&(this.binding=r,(this.root._twowayBindings[r.keypath.str]||(this.root._twowayBindings[r.keypath.str]=[])).push(r));n.v&&(this.eventHandlers=function(t,e){var n,i,r,o,s=[];for(i in e)if(e.hasOwnProperty(i))for(n=(r=i.split("-")).length;n--;)o=new $l(t,r[n],e[i]),s.push(o);return s}(this,n.v));n.o&&(this.decorator=new Rl(this,n.o));this.intro=n.t0||n.t1,this.outro=n.t0||n.t2};var Il=function(t,e){var n,i,r;this.attributes&&this.attributes.forEach(o);this.conditionalAttributes&&this.conditionalAttributes.forEach(o);this.eventHandlers&&this.eventHandlers.forEach(o);this.decorator&&o(this.decorator);this.fragment&&o(this.fragment);if(r=this.liveQueries)for(this.root,n=r.length;n--;)r[n]._makeDirty();this.node&&(i=this.node._ractive)&&st(i,"keypath",t,e);function o(n){n.rebind(t,e)}};function Nl(){var t=this._ractive.proxy;Jt.start(),t.formBindings.forEach(Fl),Jt.end()}function Fl(t){t.root.viewmodel.set(t.keypath,t.resetValue)}var ql=function(t,e,n){var i,r,o;if(this.element=t,this.root=i=t.root,this.isIntro=n,"string"!=typeof(r=e.n||e)&&(o=new Nh({template:r,root:i,owner:t}),r=o.toString(),o.unbind(),""===r))return;this.name=r,e.a?this.params=e.a:e.d&&(o=new Nh({template:e.d,root:i,owner:t}),this.params=o.getArgsList(),o.unbind());this._fn=K("transitions",i,r),this._fn||H(G(r,"transition"),{ractive:this.root})};var Ml,Ul,zl,Wl=function(t){return t.replace(/-([a-zA-Z])/g,(function(t,e){return e.toUpperCase()}))};t?(Ul={},zl=a("div").style,Ml=function(t){var e,n,i;if(t=Wl(t),!Ul[t])if(void 0!==zl[t])Ul[t]=t;else for(i=t.charAt(0).toUpperCase()+t.substring(1),e=s.length;e--;)if(n=s[e],void 0!==zl[n+i]){Ul[t]=n+i;break}return Ul[t]}):Ml=null;var Vl,Bl,Hl=Ml;t?(Bl=window.getComputedStyle||null.getComputedStyle,Vl=function(t){var e,n,i,r,o;if(e=Bl(this.node),"string"==typeof t)return"0px"===(o=e[Hl(t)])&&(o=0),o;if(!T(t))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(n={},i=t.length;i--;)r=t[i],"0px"===(o=e[Hl(r)])&&(o=0),n[r]=o;return n}):Vl=null;var Zl=Vl,Gl=function(t){var e;this.duration=t.duration,this.step=t.step,this.complete=t.complete,"string"==typeof t.easing?(e=t.root.easing[t.easing])||(H(G(t.easing,"easing")),e=Ql):e="function"==typeof t.easing?t.easing:Ql,this.easing=e,this.start=vt(),this.end=this.start+this.duration,this.running=!0,ie.add(this)};Gl.prototype={tick:function(t){var e,n;return!!this.running&&(t>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(e=t-this.start,n=this.easing(e/this.duration),this.step&&this.step(n),!0))},stop:function(){this.abort&&this.abort(),this.running=!1}};var Kl=Gl;function Ql(t){return t}var Yl,Jl,Xl,tu,eu,nu,iu,ru,ou=new RegExp("^-(?:"+s.join("|")+")-"),su=new RegExp("^(?:"+s.join("|")+")([A-Z])"),au=function(t){return t?(su.test(t)&&(t="-"+t),t.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}))):""},lu={},uu={};t?(void 0!==(Jl=a("div").style).transition?(Xl="transition",tu="transitionend",eu=!0):void 0!==Jl.webkitTransition?(Xl="webkitTransition",tu="webkitTransitionEnd",eu=!0):eu=!1,Xl&&(nu=Xl+"Duration",iu=Xl+"Property",ru=Xl+"TimingFunction"),Yl=function(t,e,n,i,r){setTimeout((function(){var o,s,a,l,u;l=function(){s&&a&&(t.root.fire(t.name+":end",t.node,t.isIntro),r())},o=(t.node.namespaceURI||"")+t.node.tagName,t.node.style[iu]=i.map(Hl).map(au).join(","),t.node.style[ru]=au(n.easing||"linear"),t.node.style[nu]=n.duration/1e3+"s",u=function(e){var n;-1!==(n=i.indexOf(Wl(e.propertyName.replace(ou,""))))&&i.splice(n,1),i.length||(t.node.removeEventListener(tu,u,!1),a=!0,l())},t.node.addEventListener(tu,u,!1),setTimeout((function(){for(var r,c,h,d,p,f=i.length,m=[];f--;)d=i[f],r=o+d,eu&&!uu[r]&&(t.node.style[Hl(d)]=e[d],lu[r]||(c=t.getStyle(d),lu[r]=t.getStyle(d)!=e[d],uu[r]=!lu[r],uu[r]&&(t.node.style[Hl(d)]=c))),eu&&!uu[r]||(void 0===c&&(c=t.getStyle(d)),-1===(h=i.indexOf(d))?B("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",{node:t.node}):i.splice(h,1),p=/[^\d]*$/.exec(e[d])[0],m.push({name:Hl(d),interpolator:Y(parseFloat(c),parseFloat(e[d])),suffix:p}));m.length?new Kl({root:t.root,duration:n.duration,easing:Wl(n.easing||""),step:function(e){var n,i;for(i=m.length;i--;)n=m[i],t.node.style[n.name]=n.interpolator(e)+n.suffix},complete:function(){s=!0,l()}}):s=!0,i.length||(t.node.removeEventListener(tu,u,!1),a=!0,l())}),0)}),n.delay||0)}):Yl=null;var cu,hu,du,pu,fu,mu=Yl;if("undefined"!=typeof document){if(fu={},(cu="hidden")in document)du="";else for(pu=s.length;pu--;)hu=s[pu],(cu=hu+"Hidden")in document&&(du=hu);void 0!==du?(document.addEventListener(du+"visibilitychange",gu),gu()):("onfocusout"in document?(document.addEventListener("focusout",vu),document.addEventListener("focusin",yu)):(window.addEventListener("pagehide",vu),window.addEventListener("blur",vu),window.addEventListener("pageshow",yu),window.addEventListener("focus",yu)),fu.hidden=!1)}function gu(){fu.hidden=document[cu]}function vu(){fu.hidden=!0}function yu(){fu.hidden=!1}var bu,wu,_u,xu=fu;t?(wu=window.getComputedStyle||null.getComputedStyle,bu=function(t,e,n){var i,r=this;if(4===arguments.length)throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");if(xu.hidden)return this.setStyle(t,e),_u||(_u=jt.resolve());"string"==typeof t?(i={})[t]=e:(i=t,n=e),n||(H('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),n=this);var o=new jt((function(t){var e,o,s,a,l,u;if(!n.duration)return r.setStyle(i),void t();for(e=Object.keys(i),o=[],s=wu(r.node),{},l=e.length;l--;)u=e[l],"0px"===(a=s[Hl(u)])&&(a=0),a!=i[u]&&(o.push(u),r.node.style[Hl(u)]=a);o.length?mu(r,i,n,o,t):t()}));return o}):bu=null;var ku=function(t,e,n){this.init(t,e,n)};ku.prototype={init:ql,start:function(){var t,e,n,i=this;if(t=this.node=this.element.node,e=t.getAttribute("style"),this.complete=function(r){n||(!r&&i.isIntro&&function(t,e){e?t.setAttribute("style",e):(t.getAttribute("style"),t.removeAttribute("style"))}(t,e),t._ractive.transition=null,i._manager.remove(i),n=!0)},!this._fn)return void this.complete();this._fn.apply(this.root,[this].concat(this.params))},getStyle:Zl,setStyle:function(t,e){var n;if("string"==typeof t)this.node.style[Hl(t)]=e;else for(n in t)t.hasOwnProperty(n)&&(this.node.style[Hl(n)]=t[n]);return this},animateStyle:bu,processParams:function(t,e){return"number"==typeof t?t={duration:t}:"string"==typeof t?t="slow"===t?{duration:600}:"fast"===t?{duration:200}:{duration:400}:t||(t={}),function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.forEach((function(e){for(var n in e)e.hasOwnProperty(n)&&!(n in t)&&(t[n]=e[n])})),t}({},t,e)}};var Eu,Au,Cu=ku,Su=function(){var t,e,n,i=this,o=this.root;t=function(t){var e,n,i;e=(n=t.getAttribute("xmlns"))?n:"svg"===t.name?r.svg:(i=t.parent)?"foreignObject"===i.name?r.html:i.node.namespaceURI:t.root.el.namespaceURI;return e}(this),e=this.node=a(this.name,t),this.parentFragment.cssIds&&this.node.setAttribute("data-ractive-css",this.parentFragment.cssIds.map((function(t){return"{"+t+"}"})).join(" "));x(this.node,"_ractive",{value:{proxy:this,keypath:Lt(this.parentFragment),events:_(null),root:o}}),this.attributes.forEach((function(t){return t.render(e)})),this.conditionalAttributes.forEach((function(t){return t.render(e)})),this.fragment&&("script"===this.name?(this.bubble=Au,this.node.text=this.fragment.toString(!1),this.fragment.unrender=F):"style"===this.name?(this.bubble=Eu,this.bubble(),this.fragment.unrender=F):this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=F:this.node.appendChild(this.fragment.render()));this.binding&&(this.binding.render(),this.node._ractive.binding=this.binding);this.eventHandlers&&this.eventHandlers.forEach((function(t){return t.render()}));"option"===this.name&&function(t){var e,n,i;if(!t.select)return;if(void 0===(n=t.select.getAttribute("value")))return;if(e=t.getAttribute("value"),t.select.node.multiple&&T(n)){for(i=n.length;i--;)if(e==n[i]){t.node.selected=!0;break}}else t.node.selected=e==n}(this);"img"===this.name?((s=this).attributes.width||s.attributes.height)&&s.node.addEventListener("load",l=function(){var t=s.getAttribute("width"),e=s.getAttribute("height");void 0!==t&&s.node.setAttribute("width",t),void 0!==e&&s.node.setAttribute("height",e),s.node.removeEventListener("load",l,!1)},!1):"form"===this.name?function(t){t.node.addEventListener("reset",Nl,!1)}(this):"input"===this.name||"textarea"===this.name?this.node.defaultValue=this.node.value:"option"===this.name&&(this.node.defaultSelected=this.node.selected);var s,l;this.decorator&&this.decorator.fn&&Jt.scheduleTask((function(){i.decorator.torndown||i.decorator.init()}),!0);o.transitionsEnabled&&this.intro&&(n=new Cu(this,this.intro,!0),Jt.registerTransition(n),Jt.scheduleTask((function(){return n.start()}),!0),this.transition=n);this.node.autofocus&&Jt.scheduleTask((function(){return i.node.focus()}),!0);return function(t){var e,n,i,r,o;e=t.root;do{for(n=e._liveQueries,i=n.length;i--;)r=n[i],(o=n["_"+r])._test(t)&&(t.liveQueries||(t.liveQueries=[])).push(o)}while(e=e.parent)}(this),this.node};Eu=function(){var t=this.node,e=this.fragment.toString(!1);if(window&&window.appearsToBeIELessEqual8&&(t.type="text/css"),t.styleSheet)t.styleSheet.cssText=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}},Au=function(){this.node.type&&"text/javascript"!==this.node.type||B("Script tag was updated. This does not cause the code to be re-evaluated!",{ractive:this.root}),this.node.text=this.fragment.toString(!1)};function Ou(t){var e=t.toString();return e?" "+e:""}var Tu=function(t){this.init(t)};Tu.prototype={bubble:function(){this.parentFragment.bubble()},detach:xa,find:function(t){return this.node?l(this.node,t)?this.node:this.fragment&&this.fragment.find?this.fragment.find(t):void 0:null},findAll:function(t,e){e._test(this,!0)&&e.live&&(this.liveQueries||(this.liveQueries=[])).push(e),this.fragment&&this.fragment.findAll(t,e)},findAllComponents:function(t,e){this.fragment&&this.fragment.findAllComponents(t,e)},findComponent:function(t){if(this.fragment)return this.fragment.findComponent(t)},findNextNode:ka,firstNode:Ea,getAttribute:Aa,init:Ll,rebind:Il,render:Su,toString:function(){var t,e;return this.template.y?"<!DOCTYPE"+this.template.dd+">":(t="<"+this.template.e,t+=this.attributes.map(Ou).join("")+this.conditionalAttributes.map(Ou).join(""),"option"===this.name&&function(t){var e,n,i;if(void 0===(e=t.getAttribute("value"))||!t.select)return!1;if((n=t.select.getAttribute("value"))==e)return!0;if(t.select.getAttribute("multiple")&&T(n))for(i=n.length;i--;)if(n[i]==e)return!0}(this)&&(t+=" selected"),"input"===this.name&&function(t){var e,n,i,r;if(e=t.attributes,n=e.type,i=e.value,r=e.name,!n||"radio"!==n.value||!i||!r.interpolator)return;if(i.value===r.interpolator.value)return!0}(this)&&(t+=" checked"),t+=">","textarea"===this.name&&void 0!==this.getAttribute("value")?t+=pr(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(t+=this.getAttribute("value")||""),this.fragment&&(e="script"!==this.name&&"style"!==this.name,t+=this.fragment.toString(e)),rr.test(this.template.e)||(t+="</"+this.template.e+">"),t)},unbind:function(){this.fragment&&this.fragment.unbind();this.binding&&this.binding.unbind();this.eventHandlers&&this.eventHandlers.forEach(Ut);"option"===this.name&&(t=this).select&&Ct(t.select.options,t);var t;this.attributes.forEach(Ut),this.conditionalAttributes.forEach(Ut)},unrender:function(t){var e,n,i;(i=this.transition)&&i.complete();"option"===this.name?this.detach():t&&Jt.detachWhenReady(this);this.fragment&&this.fragment.unrender(!1);(e=this.binding)&&(this.binding.unrender(),this.node._ractive.binding=null,(n=this.root._twowayBindings[e.keypath.str]).splice(n.indexOf(e),1));this.eventHandlers&&this.eventHandlers.forEach(zt);this.decorator&&Jt.registerDecorator(this.decorator);this.root.transitionsEnabled&&this.outro&&(i=new Cu(this,this.outro,!1),Jt.registerTransition(i),Jt.scheduleTask((function(){return i.start()})));this.liveQueries&&function(t){var e,n;n=t.liveQueries.length;for(;n--;)(e=t.liveQueries[n]).selector,e._remove(t.node)}(this);"form"===this.name&&function(t){t.node.removeEventListener("reset",Nl,!1)}(this)}};var Pu=Tu,$u=/^\s*$/,ju=/^\s*/;function Ru(t,e){var n=ju.exec(e)[0];return null===t||n.length<t.length?n:t}var Du=function(t,e,n){var i;if(i=function(t,e,n){var i=void 0,r=Iu(e,n.owner);if(r)return r;var o=Q("partials",t,e);if(!o)return;"function"==typeof(r=o.partials[e])&&((i=r.bind(o)).isOwner=o.partials.hasOwnProperty(e),r=i.call(t,Co));if(!r&&""!==r)return void B(Z,e,"partial","partial",{ractive:t});if(!Co.isParsed(r)){var s=Co.parse(r,Co.getParseOptions(o));s.p&&B("Partials ({{>%s}}) cannot contain nested inline partials",e,{ractive:t}),(i?o:function(t,e){return t.partials.hasOwnProperty(e)?t:Lu(t.constructor,e)}(o,e)).partials[e]=r=s.t}i&&(r._fn=i);return r.v?r.t:r}(t,e,n||{}))return i;if(i=Co.fromId(e,{noThrow:!0})){void 0!==(a=(s=(o=i).split("\n"))[0])&&$u.test(a)&&s.shift(),void 0!==(l=At(s))&&$u.test(l)&&s.pop(),(u=s.reduce(Ru,null))&&(o=s.map((function(t){return t.replace(u,"")})).join("\n")),i=o;var r=Co.parse(i,Co.getParseOptions(t));return t.partials[e]=r.t}var o,s,a,l,u};function Lu(t,e){if(t)return t.partials.hasOwnProperty(e)?t:Lu(t._Parent,e)}function Iu(t,e){if(e){if(e.template&&e.template.p&&e.template.p[t])return e.template.p[t];if(e.parentFragment&&e.parentFragment.owner)return Iu(t,e.parentFragment.owner)}}var Nu='Could not find template for partial "%s"',Fu=function(t){var e,n;e=this.parentFragment=t.parentFragment,this.root=e.root,this.type=8,this.index=t.index,this.name=t.template.r,this.rendered=!1,this.fragment=this.fragmentToRender=this.fragmentToUnrender=null,Is.init(this,t),this.keypath||((n=Du(this.root,this.name,e))?(ls.call(this),this.isNamed=!0,this.setTemplate(n)):H(Nu,this.name))};Fu.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){return this.fragment.detach()},find:function(t){return this.fragment.find(t)},findAll:function(t,e){return this.fragment.findAll(t,e)},findComponent:function(t){return this.fragment.findComponent(t)},findAllComponents:function(t,e){return this.fragment.findAllComponents(t,e)},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},getPartialName:function(){return this.isNamed&&this.name||void 0===this.value?this.name:this.value},getValue:function(){return this.fragment.getValue()},rebind:function(t,e){this.isNamed||Ls.call(this,t,e),this.fragment&&this.fragment.rebind(t,e)},render:function(){return this.docFrag=document.createDocumentFragment(),this.update(),this.rendered=!0,this.docFrag},resolve:Is.resolve,setValue:function(t){var e;void 0!==t&&t===this.value||(void 0!==t&&(e=Du(this.root,""+t,this.parentFragment)),!e&&this.name&&(e=Du(this.root,this.name,this.parentFragment))&&(ls.call(this),this.isNamed=!0),e||H(Nu,this.name,{ractive:this.root}),this.value=t,this.setTemplate(e||[]),this.bubble(),this.rendered&&Jt.addView(this))},setTemplate:function(t){this.fragment&&(this.fragment.unbind(),this.rendered&&(this.fragmentToUnrender=this.fragment)),this.fragment=new Nh({template:t,root:this.root,owner:this,pElement:this.parentFragment.pElement}),this.fragmentToRender=this.fragment},toString:function(t){var e,n,i,r;return e=this.fragment.toString(t),(n=this.parentFragment.items[this.index-1])&&1===n.type?(i=n.text.split("\n").pop(),(r=/^\s+$/.exec(i))?function(t,e){return e?t.split("\n").map((function(t,n){return n?e+t:t})).join("\n"):t}(e,r[0]):e):e},unbind:function(){this.isNamed||ls.call(this),this.fragment&&this.fragment.unbind()},unrender:function(t){this.rendered&&(this.fragment&&this.fragment.unrender(t),this.rendered=!1)},update:function(){var t,e;this.fragmentToUnrender&&(this.fragmentToUnrender.unrender(!0),this.fragmentToUnrender=null),this.fragmentToRender&&(this.docFrag.appendChild(this.fragmentToRender.render()),this.fragmentToRender=null),this.rendered&&(t=this.parentFragment.getNode(),e=this.parentFragment.findNextNode(this),t.insertBefore(this.docFrag,e))}};var qu=Fu,Mu=function t(e,n){var i,r=Q("components",e,n);if(r&&!(i=r.components[n])._Parent){var o=i.bind(r);if(o.isOwner=r.components.hasOwnProperty(n),!(i=o()))return void B(Z,n,"component","component",{ractive:e});"string"==typeof i&&(i=t(e,i)),i._fn=o,r.components[n]=i}return i};var Uu=function(){var t=this.instance.fragment.detach();return zu.fire(this.instance),t},zu=new wt("detach");var Wu=function(t){return this.instance.fragment.find(t)};var Vu=function(t,e){return this.instance.fragment.findAll(t,e)};var Bu=function(t,e){e._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(t,e)};var Hu=function(t){if(!t||t===this.name)return this.instance;if(this.instance.fragment)return this.instance.fragment.findComponent(t);return null};var Zu=function(){return this.parentFragment.findNextNode(this)};var Gu=function(){if(this.rendered)return this.instance.fragment.firstNode();return null};var Ku,Qu,Yu=function(t,e,n,i){var r=t.root,o=t.keypath;i?r.viewmodel.smartUpdate(o,e,i):r.viewmodel.mark(o)},Ju=[],Xu=["pop","push","reverse","shift","sort","splice","unshift"];Xu.forEach((function(t){x(Ju,t,{value:function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];var r,o,s,a;for(r=Xe(this,t,n),o=Array.prototype[t].apply(this,arguments),Jt.start(),this._ractive.setting=!0,a=this._ractive.wrappers.length;a--;)s=this._ractive.wrappers[a],Jt.addRactive(s.root),Yu(s,this,0,r);return Jt.end(),this._ractive.setting=!1,o}})})),{}.__proto__?(Ku=function(t){t.__proto__=Ju},Qu=function(t){t.__proto__=Array.prototype}):(Ku=function(t){var e,n;for(e=Xu.length;e--;)n=Xu[e],x(t,n,{value:Ju[n],configurable:!0})},Qu=function(t){var e;for(e=Xu.length;e--;)delete t[Xu[e]]}),Ku.unpatch=Qu;var tc,ec,nc,ic=Ku;tc={filter:function(t){return T(t)&&(!t._ractive||!t._ractive.setting)},wrap:function(t,e,n){return new ec(t,e,n)}},(ec=function(t,e,n){this.root=t,this.value=e,this.keypath=at(n),e._ractive||(x(e,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),ic(e)),e._ractive.instances[t._guid]||(e._ractive.instances[t._guid]=0,e._ractive.instances.push(t)),e._ractive.instances[t._guid]+=1,e._ractive.wrappers.push(this)}).prototype={get:function(){return this.value},teardown:function(){var t,e,n,i,r;if(n=(e=(t=this.value)._ractive).wrappers,i=e.instances,e.setting)return!1;if(-1===(r=n.indexOf(this)))throw new Error(nc);if(n.splice(r,1),n.length){if(i[this.root._guid]-=1,!i[this.root._guid]){if(-1===(r=i.indexOf(this.root)))throw new Error(nc);i.splice(r,1)}}else delete t._ractive,ic.unpatch(this.value)}},nc="Something went wrong in a rather interesting way";var rc,oc,sc=tc,ac=/^\s*[0-9]+\s*$/,lc=function(t){return ac.test(t)?[]:{}};try{Object.defineProperty({},"test",{value:0}),rc={filter:function(t,e,n){var i,r;return!!e&&(e=at(e),!((i=n.viewmodel.wrapped[e.parent.str])&&!i.magic)&&((!T(r=n.viewmodel.get(e.parent))||!/^[0-9]+$/.test(e.lastKey))&&(r&&("object"==typeof r||"function"==typeof r))))},wrap:function(t,e,n){return new oc(t,e,n)}},(oc=function(t,e,n){var i,r,o;n=at(n),this.magic=!0,this.ractive=t,this.keypath=n,this.value=e,this.prop=n.lastKey,i=n.parent,this.obj=i.isRoot?t.viewmodel.data:t.viewmodel.get(i),(r=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop))&&r.set&&(o=r.set._ractiveWrappers)?-1===o.indexOf(this)&&o.push(this):function(t,e,n){var i,r,o,s,a,l;if(i=t.obj,r=t.prop,n&&!n.configurable){if("length"===r)return;throw new Error('Cannot use magic mode with property "'+r+'" - object is not configurable')}n&&(o=n.get,s=n.set);function u(t){var n,i;t.value=e,t.updating||(i=t.ractive,n=t.keypath,t.updating=!0,Jt.start(i),i.viewmodel.mark(n),Jt.end(),t.updating=!1)}a=o||function(){return e},(l=function(t){s&&s(t),e=o?o():t,l._ractiveWrappers.forEach(u)})._ractiveWrappers=[t],Object.defineProperty(i,r,{get:a,set:l,enumerable:!0,configurable:!0})}(this,e,r)}).prototype={get:function(){return this.value},reset:function(t){if(!this.updating)return this.updating=!0,this.obj[this.prop]=t,Jt.addRactive(this.ractive),this.ractive.viewmodel.mark(this.keypath,{keepExistingWrapper:!0}),this.updating=!1,!0},set:function(t,e){this.updating||(this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=lc(t),this.updating=!1),this.obj[this.prop][t]=e)},teardown:function(){var t,e,n,i,r;if(this.updating)return!1;(e=(t=Object.getOwnPropertyDescriptor(this.obj,this.prop))&&t.set)&&(-1!==(r=(i=e._ractiveWrappers).indexOf(this))&&i.splice(r,1),i.length||(n=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=n))}}}catch(t){rc=!1}var uc,cc,hc=rc;hc&&(uc={filter:function(t,e,n){return hc.filter(t,e,n)&&sc.filter(t)},wrap:function(t,e,n){return new cc(t,e,n)}},(cc=function(t,e,n){this.value=e,this.magic=!0,this.magicWrapper=hc.wrap(t,e,n),this.arrayWrapper=sc.wrap(t,e,n)}).prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(t){return this.magicWrapper.reset(t)}});var dc=uc,pc=function(t,e){var n,i,r;if(!this.adaptors)return;for(n=this.adaptors.length,i=0;i<n;i+=1)if((r=this.adaptors[i]).filter(e,t,this.ractive))return void((this.wrapped[t]=r.wrap(this.ractive,e,t,mc(t))).value=e)},fc={};function mc(t){var e;return fc[t]||(e=t?t+".":"",fc[t]=function(n,i){var r;return"string"==typeof n?((r={})[e+n]=i,r):"object"==typeof n?e?function(t,e){var n,i={};if(!e)return t;for(n in e+=".",t)t.hasOwnProperty(n)&&(i[e+n]=t[n]);return i}(n,t):n:void 0}),fc[t]}var gc=function(t){var e,n,i=[ht];e=t.length;for(;e--;)for(n=t[e].parent;n&&!n.isRoot;)-1===t.indexOf(n)&&_t(i,n),n=n.parent;return i};var vc=function(t,e,n){if(bc(t,e),n)return;e.wildcardMatches().forEach((function(n){yc(t,n,e)}))};function yc(t,e,n){var i,r,o;e=e.str||e,(r=(i=t.depsMap.patternObservers)&&i[e])&&r.forEach((function(e){o=n.join(e.lastKey),bc(t,o),yc(t,e,o)}))}function bc(t,e){t.patternObservers.forEach((function(t){t.regex.test(e.str)&&t.update(e)}))}var wc=function(){var t,e,n,i=this,r=this,o={};if(!(t=this.changes).length)return;function s(e){var n=e.key;e.viewmodel===r?(r.clearCache(n.str),e.invalidate(),t.push(n),a(n)):e.viewmodel.mark(n)}function a(t){var e,n;r.noCascade.hasOwnProperty(t.str)||((n=r.deps.computed[t.str])&&n.forEach(s),(e=r.depsMap.computed[t.str])&&e.forEach(a))}t.slice().forEach(a),(e=gc(t)).forEach((function(e){var n;-1===t.indexOf(e)&&(n=r.deps.computed[e.str])&&n.forEach(s)})),this.changes=[],this.patternObservers.length&&(e.forEach((function(t){return vc(i,t,!0)})),t.forEach((function(t){return vc(i,t)})));this.deps.observers&&(e.forEach((function(t){return _c(i,null,t,"observers")})),xc(this,t,"observers"));this.deps.default&&(n=[],e.forEach((function(t){return _c(i,n,t,"default")})),n.length&&function(t,e,n){e.forEach((function(e){for(var i=!1,r=0,o=n.length,s=[];r<o;){var a=n[r];if(a===e.keypath){i=!0;break}a.slice(0,e.keypath.length)===e.keypath&&s.push(a),r++}i&&e.setValue(t.get(e.keypath)),s.length&&e.refineValue(s)}))}(this,n,t),xc(this,t,"default"));return t.forEach((function(t){o[t.str]=i.get(t)})),this.implicitChanges={},this.noCascade={},o};function _c(t,e,n,i){var r,o;(r=kc(t,n,i))&&(o=t.get(n),r.forEach((function(t){e&&t.refineValue?e.push(t):t.setValue(o)})))}function xc(t,e,n){var i=[];function r(t){t.forEach(o),t.forEach(s)}function o(e){var r=kc(t,e,n);r&&i.push({keypath:e,deps:r})}function s(e){var i;(i=t.depsMap[n][e.str])&&r(i)}r(e),i.forEach((function(e){var n=t.get(e.keypath);e.deps.forEach((function(t){return t.setValue(n)}))}))}function kc(t,e,n){var i=t.deps[n];return i?i[e.str]:null}var Ec=function(){this.captureGroups.push([])};var Ac=function(t,e){var n,i;e||(i=this.wrapped[t])&&!1!==i.teardown()&&(this.wrapped[t]=null);if(this.cache[t]=void 0,n=this.cacheMap[t])for(;n.length;)this.clearCache(n.pop())};var Cc=function(t,e){this.computation=t,this.viewmodel=t.viewmodel,this.ref=e,this.root=this.viewmodel.ractive,this.parentFragment=this.root.component&&this.root.component.parentFragment};Cc.prototype={resolve:function(t){this.computation.softDeps.push(t),this.computation.unresolvedDeps[t.str]=null,this.viewmodel.register(t,this.computation,"computed")}};var Sc=Cc,Oc=function(t,e){this.key=t,this.getter=e.getter,this.setter=e.setter,this.hardDeps=e.deps||[],this.softDeps=[],this.unresolvedDeps={},this.depValues={},this._dirty=this._firstRun=!0};function Tc(t,e){var n=e.firstKey;return!(n in t.data)&&!(n in t.computations)&&!(n in t.mappings)}Oc.prototype={constructor:Oc,init:function(t){var e,n=this;this.viewmodel=t,this.bypass=!0,e=t.get(this.key),t.clearCache(this.key.str),this.bypass=!1,this.setter&&void 0!==e&&this.set(e),this.hardDeps&&this.hardDeps.forEach((function(e){return t.register(e,n,"computed")}))},invalidate:function(){this._dirty=!0},get:function(){var t,e=this,n=!1;if(this.getting)return V("The "+this.key.str+" computation indirectly called itself. This probably indicates a bug in the computation. It is commonly caused by `array.sort(...)` - if that's the case, clone the array first with `array.slice().sort(...)`"),this.value;if(this.getting=!0,this._dirty){if(this._firstRun||!this.hardDeps.length&&!this.softDeps.length?n=!0:[this.hardDeps,this.softDeps].forEach((function(t){var i,r,o;if(!n)for(o=t.length;o--;)if(i=t[o],!$(r=e.viewmodel.get(i),e.depValues[i.str]))return e.depValues[i.str]=r,void(n=!0)})),n){this.viewmodel.capture();try{this.value=this.getter()}catch(t){B('Failed to compute "%s"',this.key.str),z(t.stack||t),this.value=void 0}t=this.viewmodel.release(),this.updateDependencies(t)&&[this.hardDeps,this.softDeps].forEach((function(t){t.forEach((function(t){e.depValues[t.str]=e.viewmodel.get(t)}))}))}this._dirty=!1}return this.getting=this._firstRun=!1,this.value},set:function(t){if(this.setting)this.value=t;else{if(!this.setter)throw new Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)");this.setter(t)}},updateDependencies:function(t){var e,n,i,r,o;for(e=(n=this.softDeps).length;e--;)i=n[e],-1===t.indexOf(i)&&(r=!0,this.viewmodel.unregister(i,this,"computed"));for(e=t.length;e--;)i=t[e],-1!==n.indexOf(i)||this.hardDeps&&-1!==this.hardDeps.indexOf(i)||(r=!0,Tc(this.viewmodel,i)&&!this.unresolvedDeps[i.str]?(o=new Sc(this,i.str),t.splice(e,1),this.unresolvedDeps[i.str]=o,Jt.addUnresolved(o)):this.viewmodel.register(i,this,"computed"));return r&&(this.softDeps=t.slice()),r}};var Pc=Oc,$c=function(t,e){var n=new Pc(t,e);this.ready&&n.init(this);return this.computations[t.str]=n};var jc={FAILED_LOOKUP:!0},Rc=function(t,e){var n,i,r,o,s,a=this.cache,l=t.str;(e=e||Dc).capture&&(o=At(this.captureGroups))&&(~o.indexOf(t)||o.push(t));if(C.call(this.mappings,t.firstKey))return this.mappings[t.firstKey].get(t,e);if(t.isSpecial)return t.value;void 0===a[l]?((i=this.computations[l])&&!i.bypass?(n=i.get(),this.adapt(l,n)):(r=this.wrapped[l])?n=r.value:t.isRoot?(this.adapt("",this.data),n=this.data):n=function(t,e){var n,i,r,o;n=t.get(e.parent),(o=t.wrapped[e.parent.str])&&(n=o.get());if(null==n)return;(i=t.cacheMap[e.parent.str])?-1===i.indexOf(e.str)&&i.push(e.str):t.cacheMap[e.parent.str]=[e.str];if("object"==typeof n&&!(e.lastKey in n))return t.cache[e.str]=jc;return r=n[e.lastKey],t.adapt(e.str,r,!1),t.cache[e.str]=r,r}(this,t),a[l]=n):n=a[l];!e.noUnwrap&&(r=this.wrapped[l])&&(n=r.get());if(t.isRoot&&e.fullRootGet)for(s in this.mappings)n[s]=this.mappings[s].getValue();return n===jc?void 0:n},Dc={};var Lc=function(){var t;for(t in this.computations)this.computations[t].init(this)};var Ic=function(t,e){var n=this.mappings[t.str]=new Nc(t,e);return n.initViewmodel(this),n};var Nc=function(t,e){this.localKey=t,this.keypath=e.keypath,this.origin=e.origin,this.deps=[],this.unresolved=[],this.resolved=!1};Nc.prototype={forceResolution:function(){this.keypath=this.localKey,this.setup()},get:function(t,e){if(this.resolved)return this.origin.get(this.map(t),e)},getValue:function(){if(this.keypath)return this.origin.get(this.keypath)},initViewmodel:function(t){this.local=t,this.setup()},map:function(t){return void 0===typeof this.keypath?this.localKey:t.replace(this.localKey,this.keypath)},register:function(t,e,n){this.deps.push({keypath:t,dep:e,group:n}),this.resolved&&this.origin.register(this.map(t),e,n)},resolve:function(t){void 0!==this.keypath&&this.unbind(!0),this.keypath=t,this.setup()},set:function(t,e){this.resolved||this.forceResolution(),this.origin.set(this.map(t),e)},setup:function(){var t=this;void 0!==this.keypath&&(this.resolved=!0,this.deps.length&&(this.deps.forEach((function(e){var n=t.map(e.keypath);if(t.origin.register(n,e.dep,e.group),e.dep.setValue)e.dep.setValue(t.origin.get(n));else{if(!e.dep.invalidate)throw new Error("An unexpected error occurred. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");e.dep.invalidate()}})),this.origin.mark(this.keypath)))},setValue:function(t){if(!this.keypath)throw new Error("Mapping does not have keypath, cannot set value. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");this.origin.set(this.keypath,t)},unbind:function(t){var e=this;t||delete this.local.mappings[this.localKey],this.resolved&&(this.deps.forEach((function(t){e.origin.unregister(e.map(t.keypath),t.dep,t.group)})),this.tracker&&this.origin.unregister(this.keypath,this.tracker))},unregister:function(t,e,n){var i,r;if(this.resolved){for(r=(i=this.deps).length;r--;)if(i[r].dep===e){i.splice(r,1);break}this.origin.unregister(this.map(t),e,n)}}};var Fc=function(t,e,n,i){var r,o,s,a;if(this.mark(t),i&&i.compare){s=function(t){if(!0===t)return Mc;if("string"==typeof t)return qc[t]||(qc[t]=function(e){return e[t]}),qc[t];if("function"==typeof t)return t;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}(i.compare);try{r=e.map(s),o=n.map(s)}catch(i){B('merge(): "%s" comparison failed. Falling back to identity checking',t),r=e,o=n}}else r=e,o=n;a=function(t,e){var n,i;return n={},i=0,t.map((function(t,r){var o,s,a;s=i,a=e.length;do{if(-1===(o=e.indexOf(t,s)))return-1;s=o+1}while(n[o]&&s<a);return o===i&&(i+=1),n[o]=!0,o}))}(r,o),this.smartUpdate(t,n,a,e.length!==n.length)},qc={};function Mc(t){return JSON.stringify(t)}function Uc(t,e,n){for(var i,r,o;!e.isRoot;)void 0===(r=(i=t.depsMap[n])[e.parent.str]||(i[e.parent.str]=[]))["_"+(o=e.str)]&&(r["_"+o]=0,r.push(e)),r["_"+o]+=1,e=e.parent}function zc(t,e,n){var i,r,o,s;o=function(){i.set?i.set(e.lastKey,n):(r=i.get(),s())},s=function(){r||(r=lc(e.lastKey),t.set(e.parent,r,{silent:!0})),r[e.lastKey]=n},(i=t.wrapped[e.parent.str])?o():(r=t.get(e.parent),(i=t.wrapped[e.parent.str])?o():s())}var Wc=function(t,e,n){var i,r,o,s=this;r=n.length,n.forEach((function(e,n){-1===e&&s.mark(t.join(n),Bc)})),this.set(t,e,{silent:!0}),(i=this.deps.default[t.str])&&i.filter(Hc).forEach((function(t){return t.shuffle(n,e)}));if(r!==e.length){for(this.mark(t.join("length"),Vc),o=n.touchedFrom;o<e.length;o+=1)this.mark(t.join(o));for(o=e.length;o<r;o+=1)this.mark(t.join(o),Bc)}},Vc={implicit:!0},Bc={noCascade:!0};function Hc(t){return"function"==typeof t.shuffle}function Zc(t,e,n){for(var i;!e.isRoot;)(i=t.depsMap[n][e.parent.str])["_"+e.str]-=1,i["_"+e.str]||(Ct(i,e),i["_"+e.str]=void 0),e=e.parent}var Gc=function(t){var e,n,i=t.adapt,r=t.data,o=t.ractive,s=t.computed,a=t.mappings;for(e in this.ractive=o,this.adaptors=i,this.onchange=t.onchange,this.cache={},this.cacheMap=_(null),this.deps={computed:_(null),default:_(null)},this.depsMap={computed:_(null),default:_(null)},this.patternObservers=[],this.specials=_(null),this.wrapped=_(null),this.computations=_(null),this.captureGroups=[],this.unresolvedImplicitDependencies=[],this.changes=[],this.implicitChanges={},this.noCascade={},this.data=r,this.mappings=_(null),a)this.map(at(e),a[e]);if(r)for(e in r)(n=this.mappings[e])&&void 0===n.getValue()&&n.setValue(r[e]);for(e in s)a&&e in a&&U("Cannot map to a computed property ('%s')",e),this.compute(at(e),s[e]);this.ready=!0};Gc.prototype={adapt:pc,applyChanges:wc,capture:Ec,clearCache:Ac,compute:$c,get:Rc,init:Lc,map:Ic,mark:function(t,e){var n,i=t.str;e&&(e.implicit&&(this.implicitChanges[i]=!0),e.noCascade&&(this.noCascade[i]=!0));(n=this.computations[i])&&n.invalidate();-1===this.changes.indexOf(t)&&this.changes.push(t);var r=!!e&&e.keepExistingWrapper;this.clearCache(i,r),this.ready&&this.onchange()},merge:Fc,register:function(t,e){var n,i,r=void 0===arguments[2]?"default":arguments[2];if(e.isStatic)return;(n=this.mappings[t.firstKey])?n.register(t,e,r):(i=this.deps[r]||(this.deps[r]={}),(i[t.str]||(i[t.str]=[])).push(e),this.depsMap[r]||(this.depsMap[r]={}),t.isRoot||Uc(this,t,r))},release:function(){return this.captureGroups.pop()},reset:function(t){this.data=t,this.clearCache("")},set:function(t,e){var n,i,r,o,s=void 0===arguments[2]?{}:arguments[2];if(!s.noMapping&&(n=this.mappings[t.firstKey]))return n.set(t,e);if(i=this.computations[t.str]){if(i.setting)return;i.set(e),e=i.get()}if($(this.cache[t.str],e))return;(r=this.wrapped[t.str])&&r.reset&&(o=!1!==r.reset(e))&&(e=r.get());i||o||zc(this,t,e);s.silent?this.clearCache(t.str):this.mark(t)},smartUpdate:Wc,teardown:function(){var t,e=this;Object.keys(this.cache).forEach((function(t){return e.clearCache(t)}));for(;t=this.unresolvedImplicitDependencies.pop();)t.teardown()},unregister:function(t,e){var n,i,r,o=void 0===arguments[2]?"default":arguments[2];if(e.isStatic)return;if(n=this.mappings[t.firstKey])return n.unregister(t,e,o);if(i=this.deps[o][t.str],-1===(r=i.indexOf(e)))throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");if(i.splice(r,1),t.isRoot)return;Zc(this,t,o)}};var Kc=Gc;function Qc(t){this.hook=new wt(t),this.inProcess={},this.queue={}}function Yc(t,e){return t[e._guid]||(t[e._guid]=[])}function Jc(t,e){var n=Yc(t.queue,e);for(t.hook.fire(e);n.length;)Jc(t,n.shift());delete t.queue[e._guid]}Qc.prototype={constructor:Qc,begin:function(t){this.inProcess[t._guid]=!0},end:function(t){var e=t.parent;e&&this.inProcess[e._guid]?Yc(this.queue,e).push(t):Jc(this,t),delete this.inProcess[t._guid]}};var Xc=Qc,th=function(t,e){var n,i={};for(n in e)i[n]=nh(t,n,e[n]);return i},eh=/\$\{([^\}]+)\}/g;function nh(t,e,n){var i,r;return"function"==typeof n&&(i=rh(n,t)),"string"==typeof n&&(i=ih(t,n)),"object"==typeof n&&("string"==typeof n.get?i=ih(t,n.get):"function"==typeof n.get?i=rh(n.get,t):U("`%s` computation must have a `get()` method",e),"function"==typeof n.set&&(r=rh(n.set,t))),{getter:i,setter:r}}function ih(t,e){var n,i,r;return n="return ("+e.replace(eh,(function(t,e){return i=!0,'__ractive.get("'+e+'")'}))+");",i&&(n="var __ractive = this; "+n),r=new Function(n),i?r.bind(t):r}function rh(t,e){return/this/.test(t.toString())?t.bind(e):t}var oh=new wt("construct"),sh=new wt("config"),ah=new Xc("init"),lh=0,uh=["adaptors","components","decorators","easing","events","interpolators","partials","transitions"],ch=function(t){var e,n,i=void 0===arguments[1]?{}:arguments[1],r=void 0===arguments[2]?{}:arguments[2];fd.DEBUG&&I();if(dh(t,r),x(t,"data",{get:ph}),oh.fire(t,i),uh.forEach((function(e){t[e]=A(_(t.constructor[e]||null),i[e])})),n=new Kc({adapt:hh(t,t.adapt,i),data:On.init(t.constructor,t,i),computed:th(t,A(_(t.constructor.prototype.computed),i.computed)),mappings:r.mappings,ractive:t,onchange:function(){return Jt.addRactive(t)}}),t.viewmodel=n,n.init(),Ho.init(t.constructor,t,i),sh.fire(t),ah.begin(t),t.template){var o=void 0;(r.cssIds||t.cssId)&&(o=r.cssIds?r.cssIds.slice():[],t.cssId&&o.push(t.cssId)),t.fragment=new Nh({template:t.template,root:t,owner:t,cssIds:o})}if(ah.end(t),e=y(t.el)){var s=t.render(e,t.append);fd.DEBUG_PROMISES&&s.catch((function(e){throw H("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;"),B("An error happened during rendering",{ractive:t}),e.stack&&z(e.stack),e}))}};function hh(t,e,n){var r,o,s;if(r=function(t,e){var n=t.slice(),i=e.length;for(;i--;)~n.indexOf(e[i])||n.push(e[i]);return n}(e=e.map(a),r=Et(n.adapt).map(a)),o="magic"in n?n.magic:t.magic,s="modifyArrays"in n?n.modifyArrays:t.modifyArrays,o){if(!i)throw new Error("Getters and setters (magic mode) are not supported in this browser");s&&r.push(dc),r.push(hc)}return s&&r.push(sc),r;function a(e){return"string"==typeof e&&((e=K("adaptors",t,e))||U(G(e,"adaptor"))),e}}function dh(t,e){t._guid="r-"+lh++,t._subs=_(null),t._config={},t._twowayBindings=_(null),t._animations=[],t.nodes={},t._liveQueries=[],t._liveComponentQueries=[],t._boundFunctions=[],t._observers=[],e.component?(t.parent=e.parent,t.container=e.container||null,t.root=t.parent.root,t.component=e.component,e.component.instance=t,t._inlinePartials=e.inlinePartials):(t.root=t,t.parent=t.container=null)}function ph(){throw new Error("Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead")}function fh(t,e,n){this.parentFragment=t.parentFragment,this.callback=n,this.fragment=new Nh({template:e,root:t.root,owner:this}),this.update()}var mh=fh;fh.prototype={bubble:function(){this.dirty||(this.dirty=!0,Jt.addView(this))},update:function(){this.callback(this.fragment.getValue()),this.dirty=!1},rebind:function(t,e){this.fragment.rebind(t,e)},unbind:function(){this.fragment.unbind()}};var gh=function(t,e,n,i,r){var o,s,a,l,u,c,h={},d={},p={},f=[];for(s=t.parentFragment,a=t.root,A(h,r=r||{}),r.content=i||[],h[""]=r.content,e.defaults.el&&B("The <%s/> component has a default `el` property; it has been disregarded",t.name),l=s;l;){if(16===l.owner.type){u=l.owner.container;break}l=l.parent}return n&&Object.keys(n).forEach((function(e){var i,r,s,a=n[e];if("string"==typeof a)i=Vr(a),d[e]=i?i.value:a;else if(0===a)d[e]=!0;else{if(!T(a))throw new Error("erm wut");1===(s=a).length&&2===s[0].t?(p[e]={origin:t.root.viewmodel,keypath:void 0},r=function(t,e,n){var i;e.r?i=ws(t,e.r,n):e.x?i=new As(t,t.parentFragment,e.x,n):e.rx&&(i=new Ds(t,e.rx,n));return i}(t,a[0],(function(t){t.isSpecial?c?o.set(e,t.value):(d[e]=t.value,delete p[e]):c?o.viewmodel.mappings[e].resolve(t):p[e].keypath=t}))):r=new mh(t,a,(function(t){c?o.set(e,t):d[e]=t})),f.push(r)}})),o=_(e.prototype),ch(o,{el:null,append:!0,data:d,partials:r,magic:a.magic||e.defaults.magic,modifyArrays:a.modifyArrays,adapt:a.adapt},{parent:a,component:t,container:u,mappings:p,inlinePartials:h,cssIds:s.cssIds}),c=!0,t.resolvers=f,o};var vh=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&yh(t.instance,t.root,n,e[n])};function yh(t,e,n,i){"string"!=typeof i&&U("Components currently only support simple events - you cannot include arguments. Sorry!"),t.on(n,(function(){var t,n;return arguments.length&&arguments[0]&&arguments[0].node&&(t=Array.prototype.shift.call(arguments)),n=Array.prototype.slice.call(arguments),Oe(e,i,{event:t,args:n}),!1}))}var bh=function(t,e){var n,i;if(!e)throw new Error('Component "'+this.name+'" not found');n=this.parentFragment=t.parentFragment,i=n.root,this.root=i,this.type=15,this.name=t.template.e,this.index=t.index,this.indexRefBindings={},this.yielders={},this.resolvers=[],gh(this,e,t.template.a,t.template.f,t.template.p),vh(this,t.template.v),(t.template.t0||t.template.t1||t.template.t2||t.template.o)&&B('The "intro", "outro" and "decorator" directives have no effect on components',{ractive:this.instance});!function(t){var e,n;for(e=t.root;e;)(n=e._liveComponentQueries["_"+t.name])&&n.push(t.instance),e=e.parent}(this)};var wh=function(t,e){var n;for(var i in this.resolvers.forEach(r),this.yielders)this.yielders[i][0]&&r(this.yielders[i][0]);(n=this.root._liveComponentQueries["_"+this.name])&&n._makeDirty();function r(n){n.rebind(t,e)}};var _h=function(){var t=this.instance;return t.render(this.parentFragment.getNode()),this.rendered=!0,t.fragment.detach()};var xh=function(){return this.instance.fragment.toString()};var kh=function(){var t=this.instance;this.resolvers.forEach(Ut),function(t){var e,n;e=t.root;do{(n=e._liveComponentQueries["_"+t.name])&&n._remove(t)}while(e=e.parent)}(this),t._observers.forEach(Wt),t.fragment.unbind(),t.viewmodel.teardown(),t.fragment.rendered&&t.el.__ractive_instances__&&Ct(t.el.__ractive_instances__,t);Eh.fire(t)},Eh=new wt("teardown");var Ah=function(t,e){this.init(t,e)};Ah.prototype={detach:Uu,find:Wu,findAll:Vu,findAllComponents:Bu,findComponent:Hu,findNextNode:Zu,firstNode:Gu,init:bh,rebind:wh,render:_h,toString:xh,unbind:kh,unrender:function(t){this.shouldDestroy=t,this.instance.unrender()}};var Ch=Ah,Sh=function(t){this.type=9,this.value=t.template.c};Sh.prototype={detach:os,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createComment(this.value)),this.node},toString:function(){return"\x3c!--"+this.value+"--\x3e"},unrender:function(t){t&&this.node.parentNode.removeChild(this.node)}};var Oh=Sh,Th=function(t){var e,n;this.type=16,this.container=e=t.parentFragment.root,this.component=n=e.component,this.container=e,this.containerFragment=t.parentFragment,this.parentFragment=n.parentFragment;var i=this.name=t.template.n||"",r=e._inlinePartials[i];r||(B('Could not find template for partial "'+i+'"',{ractive:t.root}),r=[]),this.fragment=new Nh({owner:this,root:e.parent,template:r,pElement:this.containerFragment.pElement}),T(n.yielders[i])?n.yielders[i].push(this):n.yielders[i]=[this],Jt.scheduleTask((function(){if(n.yielders[i].length>1)throw new Error("A component template can only have one {{yield"+(i?" "+i:"")+"}} declaration at a time")}))};Th.prototype={detach:function(){return this.fragment.detach()},find:function(t){return this.fragment.find(t)},findAll:function(t,e){return this.fragment.findAll(t,e)},findComponent:function(t){return this.fragment.findComponent(t)},findAllComponents:function(t,e){return this.fragment.findAllComponents(t,e)},findNextNode:function(){return this.containerFragment.findNextNode(this)},firstNode:function(){return this.fragment.firstNode()},getValue:function(t){return this.fragment.getValue(t)},render:function(){return this.fragment.render()},unbind:function(){this.fragment.unbind()},unrender:function(t){this.fragment.unrender(t),Ct(this.component.yielders[this.name],this)},rebind:function(t,e){this.fragment.rebind(t,e)},toString:function(){return this.fragment.toString()}};var Ph=Th,$h=function(t){this.declaration=t.template.a};$h.prototype={init:F,render:F,unrender:F,teardown:F,toString:function(){return"<!DOCTYPE"+this.declaration+">"}};var jh=$h;function Rh(t){return t.toString()}function Dh(t){return t.toString(!0)}function Lh(t){t.unbind&&t.unbind()}var Ih=function(t){this.init(t)};Ih.prototype={bubble:Zo,detach:Go,find:Ko,findAll:Qo,findAllComponents:Yo,findComponent:Jo,findNextNode:Xo,firstNode:ts,getArgsList:ns,getNode:is,getValue:rs,init:function(t){var e=this;this.owner=t.owner,this.parent=this.owner.parentFragment,this.root=t.root,this.pElement=t.pElement,this.context=t.context,this.index=t.index,this.key=t.key,this.registeredIndexRefs=[],this.cssIds="cssIds"in t?t.cssIds:this.parent?this.parent.cssIds:null,this.items=t.template.map((function(n,i){return function(t){if("string"==typeof t.template)return new as(t);switch(t.template.t){case 16:return new Ph(t);case 2:return new Fs(t);case 4:return new ia(t);case 3:return new _a(t);case 7:var e=void 0;return(e=Mu(t.parentFragment.root,t.template.e))?new Ch(t,e):new Pu(t);case 8:return new qu(t);case 9:return new Oh(t);case 18:return new jh(t);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}}({parentFragment:e,pElement:t.pElement,template:n,index:i})})),this.value=this.argsList=null,this.dirtyArgs=this.dirtyValue=!0,this.bound=!0},rebind:function(t,e){this.owner&&!this.owner.hasContext||st(this,"context",t,e);this.items.forEach((function(n){n.rebind&&n.rebind(t,e)}))},registerIndexRef:function(t){var e=this.registeredIndexRefs;-1===e.indexOf(t)&&e.push(t)},render:function(){var t;1===this.items.length?t=this.items[0].render():(t=document.createDocumentFragment(),this.items.forEach((function(e){t.appendChild(e.render())})));return this.rendered=!0,t},toString:function(t){if(!this.items)return"";return this.items.map(t?Dh:Rh).join("")},unbind:function(){if(!this.bound)return;this.items.forEach(Lh),this.bound=!1},unregisterIndexRef:function(t){var e=this.registeredIndexRefs;e.splice(e.indexOf(t),1)},unrender:function(t){this.rendered;this.items.forEach((function(e){return e.unrender(t)})),this.rendered=!1}};var Nh=Ih,Fh=function(t){var e,n,i,r,o;if("object"!=typeof(t=t||{}))throw new Error("The reset method takes either no arguments, or an object containing new data");(n=this.viewmodel.wrapped[""])&&n.reset?!1===n.reset(t)&&this.viewmodel.reset(t):this.viewmodel.reset(t);i=Ho.reset(this),r=i.length;for(;r--;)if(qh.indexOf(i[r])>-1){o=!0;break}if(o){var s=void 0;this.viewmodel.mark(ht),(s=this.component)&&(s.shouldDestroy=!0),this.unrender(),s&&(s.shouldDestroy=!1),this.fragment.template!==this.template&&(this.fragment.unbind(),this.fragment=new Nh({template:this.template,root:this,owner:this})),e=this.render(this.el,this.anchor)}else e=Jt.start(this,!0),this.viewmodel.mark(ht),Jt.end();return Mh.fire(this,t),e},qh=["template","partials","components","decorators","events"],Mh=new wt("reset");var Uh=function(t){var e,n;jo.init(null,this,{template:t}),e=this.transitionsEnabled,this.transitionsEnabled=!1,(n=this.component)&&(n.shouldDestroy=!0);this.unrender(),n&&(n.shouldDestroy=!1);this.fragment.unbind(),this.fragment=new Nh({template:this.template,root:this,owner:this}),this.render(this.el,this.anchor),this.transitionsEnabled=e};var zh=ln("reverse"),Wh=function(t,e){var n,i;if(i=Jt.start(this,!0),R(t))for(t in n=t)n.hasOwnProperty(t)&&(e=n[t],Vh(this,t,e));else Vh(this,t,e);return Jt.end(),i};function Vh(t,e,n){(e=at(ct(e))).isPattern?lt(t,e).forEach((function(e){t.viewmodel.set(e,n)})):t.viewmodel.set(e,n)}var Bh=ln("shift"),Hh=ln("sort"),Zh=ln("splice"),Gh=function(t,e){return dt(this,t,void 0===e?-1:-e)};var Kh=function(){var t;this.fragment.unbind(),this.viewmodel.teardown(),this._observers.forEach(Wt),this.fragment.rendered&&this.el.__ractive_instances__&&Ct(this.el.__ractive_instances__,this);return this.shouldDestroy=!0,t=this.fragment.rendered?this.unrender():jt.resolve(),Qh.fire(this),this._boundFunctions.forEach(Yh),t},Qh=new wt("teardown");function Yh(t){delete t.fn[t.prop]}var Jh=function(t){var e=this;if("string"!=typeof t)throw new TypeError("Bad arguments");var n=void 0;if(/\*/.test(t))return n={},lt(this,at(ct(t))).forEach((function(t){n[t.str]=!e.viewmodel.get(t)})),this.set(n);return this.set(t,!this.get(t))};var Xh=function(){return this.fragment.toString(!0)};var td=function(){var t,e;if(!this.fragment.rendered)return B("ractive.unrender() was called on a Ractive instance that was not rendered"),jt.resolve();t=Jt.start(this,!0),e=!this.component||this.component.shouldDestroy||this.shouldDestroy;for(;this._animations[0];)this._animations[0].stop();return this.fragment.unrender(e),Ct(this.el.__ractive_instances__,this),ed.fire(this),Jt.end(),t},ed=new wt("unrender");var nd=ln("unshift"),id=function(t){var e;return t=at(t)||ht,e=Jt.start(this,!0),this.viewmodel.mark(t),Jt.end(),rd.fire(this,t),e},rd=new wt("update");var od={add:mt,animate:se,detach:ue,find:he,findAll:xe,findAllComponents:ke,findComponent:Ee,findContainer:Ae,findParent:Ce,fire:$e,get:je,insert:De,merge:Ne,observe:He,observeOnce:Ze,off:Qe,on:Ye,once:Je,pop:un,push:cn,render:fn,reset:Fh,resetPartial:function(t,e){var n,i=[];return function e(n,i,r){r&&r.partials[t]||n.forEach((function(n){8===n.type&&n.getPartialName()===t&&i.push(n),n.fragment&&e(n.fragment.items,i,r),T(n.fragments)?e(n.fragments,i,r):T(n.items)?e(n.items,i,r):15===n.type&&n.instance&&e(n.instance.fragment.items,i,n.instance),7===n.type&&(T(n.attributes)&&e(n.attributes,i,r),T(n.conditionalAttributes)&&e(n.conditionalAttributes,i,r))}))}(this.fragment.items,i),this.partials[t]=e,n=Jt.start(this,!0),i.forEach((function(e){e.value=void 0,e.setValue(t)})),Jt.end(),n},resetTemplate:Uh,reverse:zh,set:Wh,shift:Bh,sort:Hh,splice:Zh,subtract:Gh,teardown:Kh,toggle:Jh,toHTML:Xh,toHtml:Xh,unrender:td,unshift:nd,update:id,updateModel:function(t,e){var n,i,r;if("string"!=typeof t||e)for(i in r=[],this._twowayBindings)t&&!at(i).equalsOrStartsWith(t)||r.push.apply(r,this._twowayBindings[i]);else r=this._twowayBindings[t];return n=function(t,e){var n={},i=[];e.forEach((function(t){var e,r;t.element.node&&(t.radioName&&!t.element.node.checked||(t.checkboxName?i[t.keypath.str]||t.changed()||(i.push(t.keypath),i[t.keypath.str]=t):kt(e=t.attribute.value,r=t.getValue())||$(e,r)||(n[t.keypath.str]=r)))})),i.length&&i.forEach((function(t){var e,r;kt((e=i[t.str]).attribute.value,r=e.getValue())||(n[t.str]=r)}));return n}(0,r),this.set(n)}},sd=function(t,e,n){return n||function(t,e){return"function"==typeof e&&/_super/.test(t)}(t,e)?function(){var n,i="_super"in this,r=this._super;return this._super=e,n=t.apply(this,arguments),i&&(this._super=r),n}:t};var ad=function(t){var e={};for(;t;)ld(t,e),ud(t,e),t=t._Parent!==fd&&t._Parent;return e};function ld(t,e){Ro.forEach((function(n){!function(t,e,n){var i,r=Object.keys(t[n]);if(!r.length)return;(i=e[n])||(i=e[n]={});r.filter((function(t){return!(t in i)})).forEach((function(e){return i[e]=t[n][e]}))}(n.useDefaults?t.prototype:t,e,n.name)}))}function ud(t,e){Object.keys(t.prototype).forEach((function(n){if("computed"!==n){var i=t.prototype[n];if(n in e){if("function"==typeof e[n]&&"function"==typeof i&&e[n]._method){var r=void 0,o=i._method;o&&(i=i._method),r=sd(e[n]._method,i),o&&(r._method=r),e[n]=r}}else e[n]=i._method?i._method:i}}))}function cd(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length?e.reduce(hd,this):hd(this)}function hd(t){var e,n,i=void 0===arguments[1]?{}:arguments[1];return i.prototype instanceof fd&&(i=ad(i)),e=function(t){if(!(this instanceof e))return new e(t);ch(this,t)},(n=_(t.prototype)).constructor=e,k(e,{defaults:{value:n},extend:{value:cd,writable:!0,configurable:!0},_Parent:{value:t}}),Ho.extend(t,n,i),On.extend(t,n,i),i.computed&&(n.computed=A(_(t.prototype.computed),i.computed)),e.prototype=n,e}var dd;k(dd=function(t){if(!(this instanceof dd))return new dd(t);ch(this,t)},{DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:cd},getNodeInfo:{value:function(t){var e,n,i={};return t&&(e=t._ractive)?(i.ractive=e.root,i.keypath=e.keypath.str,i.index={},(n=ys(e.proxy.parentFragment))&&(i.index=ys.resolve(n)),i):i}},parse:{value:mo},Promise:{value:jt},svg:{value:o},magic:{value:i},VERSION:{value:"0.7.3"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:v},events:{writable:!0,value:{}},interpolators:{writable:!0,value:X},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}}),dd.prototype=A(od,g),dd.prototype.constructor=dd,dd.defaults=dd.prototype;var pd="function";if(typeof Date.now!==pd||typeof String.prototype.trim!==pd||typeof Object.keys!==pd||typeof Array.prototype.indexOf!==pd||typeof Array.prototype.forEach!==pd||typeof Array.prototype.map!==pd||typeof Array.prototype.filter!==pd||"undefined"!=typeof window&&typeof window.addEventListener!==pd)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");var fd=dd;return fd})),function(t){"use strict";function e(){t(this).attr("size",t(this).val().length)}Ractive.decorators.autosize=function(n){var i=t(n);return i.on("input.autosize change.autosize keyup.autosize",e),e.call(i),{teardown:function(){i.off(".autosize").removeAttr("size")}}}}(jQuery),Ractive.decorators.combine=function(t,e){var n=this,i=[];return e.forEach((function(e){var r=n.decorators[e].call(n,t);if(!r||!r.teardown)throw new Error('Decorator definition "'+e+'" must return an object with a teardown method');i.push(r)})),{teardown:function(){i.forEach((function(t){t.teardown()}))}}};var __plugin="destinationList";Ractive.decorators[__plugin]=function(t,e,n,i,r,o){if(!(e&&n&&r&&o))throw __plugin+": missing one or more required parameters.";i||(i=void 0);var s=":",a=": ",l=jQuery,u=function(t,e,n){return l.map(t.split(e,n),l.trim)},c=function(t){return t.replace(/[\-\[\]\/{}()*+?.\\^$|]/g,"\\$&")};const h=function(t,e,n,i,r){Array.isArray(e)||(e=[e]),void 0===n&&(n=e[0]);const o=r?"":"\\s*",s="("+o+e.map(c).join("|")+o+")+";return t=t.replace(new RegExp(s,"g"),n),i&&(t=t.replace(new RegExp("^"+s+"|"+s+"$","g"),"")),t};var d,p=function(t,e,n){return t.replace(new RegExp(c(e),"g"),n)},f=t._ractive.binding.keypath.str,m=this.get(f);l(l.map(l.isArray(m)?m:[m],(function(n){var i,r,o=n.split(e);if(2!==o.length)return null;if(i=o[0],r=o[1],!i||!r)return null;var s=(l(t).find('[value="'+i+'"]').text()||i)+a+u(r,",").join(", ");return l("<option>").text(s).attr("value",n).attr("selected",!0)[0]}))).appendTo(t);var g=Ractive.decorators.select2;g.type[__plugin]={tags:!0,selectOnClose:!0,closeOnSelect:!0,language:{inputPostalCodes:function(){return"Type in zip/postal code(s)"}},createTag:function(t){var c=u(t.term,s,2),d=c[0],f=c[1],m=null;if(d&&this.$element.children().each((function(){if(l(this).text()===d)return m=l(this).attr("value")||d,!1})),!m)return null;var g=d;if(f&&(f=l.map(f.split(","),(function(t){if(-1!==(t=l.trim(t)).indexOf(n)||void 0!==i&&-1!==t.indexOf(i)){t=p(t,"*","");const e=[n];void 0!==i&&e.push(i),t=h(t,e,r),t=h(t,r,void 0,!0)}return""===(t=h(t,"*",void 0,void 0,!0))?null:t})).join(",")),!f)return null;var v=f;return v=p(v,",",", "),v=p(v,r,o),{id:m+=e+f,text:g+=a+v}},templateSelection:function(t){return l("<span>"+p(t.text,o,'<span class="trs-postcode-range">'+o+"</span>")+"</span>")}},d=g.call(this,t,__plugin);var v=l(t).data("select2"),y=v.selection.$search;return v.$container.on("click",".select2-selection__choice",(function(){var t=l(this).data("data");v.trigger("unselect",{data:t}),y.val(-1===t.text.indexOf(a)?t.text.replace(new RegExp("("+c(s)+")+\\s*$"),"")+a:t.text),y.css("width",.75*(y.val().length+1)+"em"),v.trigger("query",{term:y.val()})})),v.on("results:message",(function(t){if("noResults"===t.message){":"===l.trim(y.val()).substr(-":".length)&&this.trigger("results:message",{message:"inputPostalCodes"})}})),{teardown:function(){d&&(d.teardown(),d=null)}}},function(t,e){"use strict";if("undefined"!=typeof module&&module.exports&&"function"==typeof require)e(require("ractive"),require("jquery"));else if("function"==typeof define&&define.amd)define(["ractive","jquery"],e);else{if(!t.Ractive||!t.jQuery)throw new Error("Could not find Ractive or jQuery! They must be loaded before the ractive-decorators-select2 plugin");e(t.Ractive,t.jQuery)}}("undefined"!=typeof window?window:this,(function(t,e){"use strict";var n;(n=function(t,i){var r,o,s=t._ractive.root||t._ractive.ractive,a=!1,l={};if(i){if(!n.type.hasOwnProperty(i))throw new Error('Ractive Select2 type "'+i+'" is not defined!');"function"==typeof(l=n.type[i])&&(l=l.call(this,t))}var u=l.templateSelection;l.templateSelection=function(t){var e=u&&u(t)||t.text;return t.title||(t.title=" "),e};const c=function(t){t:for(let e=0;e<window.trsTerms.length;e++){const n=window.trsTerms[e];for(let e=0;e<n.children.length;e++){if(!1===t(n.children[e],n,0===e))break t}}};!function(t,n){if(!e(t).data("terms"))return;const i=e.fn.select2.amd.require("select2/data/array");function r(t,e){r.__super__.constructor.call(this,t,e)}e.fn.select2.amd.require("select2/utils").Extend(r,i),r.prototype.query=function(t,e){const n=Math.max(1,t.page||1),i=1===n?1e3:5e3,r=1===n?0:1e3+5e3*(n-2),o=(t.term||"").trim(),s=new RegExp(o.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),"i");const a={results:[],pagination:{more:!1}};let l=0,u=null;c((function(t,e,n){if(n&&(u=null),s.test(t.text)){if(l++,l-r===i+1)return a.pagination.more=!0,!1;if(l<=r)return;u||(u={text:e.text,children:[]},a.results.push(u)),u.children.push(t)}})),e(a)},n.dataAdapter=r,n.ajax=!0}(t,l);var h=function(n){if(!a){a=!0;try{if(""===n)e(t).select2("val","");else if(e.isArray(n)&&n.length>0){const i=function(n,i,r){0===e(t).find('option[value="'+n+'"]').length&&e(t).append(e(document.createElement("option")).attr("value",n).text(i).attr("title",r))};if(e(t).data("terms")){let t=0;c((function(e){if(-1!==n.indexOf(e.id))return i(e.id,e.text),t++,!(t>=n.length)&&void 0}))}n.forEach((function(t){i(t,"#"+t+" (missing)","The referenced item no longer exists.")})),e(t).change(),e(t).select2("val",n)}}finally{a=!1}}};if(e(t).select2(l).on("change",(function(){if(!a){a=!0;try{s.updateModel()}finally{a=!1}}})),t._ractive.binding){var d,p,f,m=t._ractive.binding,g=m.keypath?m.keypath.str:m.model.key;r=s.observe(g,h);for(var v=g.split("."),y=v.length-1;y>0;y--)if(parseInt(v[y])+""===v[y]){p=parseInt(v[y]),d=v.slice(0,y).join(""),f=v.slice(y+1).join(".");break}var b=s.keypath(d).join(p).fullname,w=s.get(b);o=s.observe(d,(function(t){var e=t.indexOf(w);e!==p&&(p=e,r&&r.cancel(),-1!==e&&(r=s.observe(s.keypath(d).join(p).join(f).fullname,h,{init:!0})))}))}return{teardown:function(){e(t).select2("destroy"),r&&r.cancel(),o&&o.cancel()}}}).type={},t.decorators.select2=n}));var sortableDecorator=function(t,e){"use strict";if("undefined"!=typeof module&&module.exports&&"function"==typeof require)e(require("Ractive"));else if("function"==typeof define&&define.amd)define(["Ractive"],e);else{if(!t.Ractive)throw new Error("Could not find Ractive! It must be loaded before the Ractive-decorators-sortable plugin");e(t.Ractive)}}("undefined"!=typeof window?window:this,(function(t){"use strict";var e,n,i,r,o,s,a,l,u,c;return(e=function(t){return jQuery(t).on("focusin",(function(){t.draggable=!1})).on("focusout",(function(){t.draggable=!0})).focusout(),t.addEventListener("dragstart",s,!1),t.addEventListener("dragenter",a,!1),t.addEventListener("dragleave",l,!1),t.addEventListener("drop",l,!1),t.addEventListener("dragover",u,!1),{teardown:function(){t.removeEventListener("dragstart",s,!1),t.removeEventListener("dragenter",a,!1),t.removeEventListener("dragleave",l,!1),t.removeEventListener("drop",l,!1),t.removeEventListener("dragover",u,!1)}}}).targetClass="droptarget",c="The sortable decorator only works with elements that correspond to array members",s=function(e){var s,a=t.getNodeInfo(this);if(-1===(s=(i=a.keypath).lastIndexOf(".")))throw new Error(c);if(r=i.substr(0,s),o=+i.substring(s+1),isNaN(o))throw new Error(c);e.dataTransfer.setData("foo",!0),n=a.ractive},a=function(){var i,s,a,l,u,h;if(this._ractive.root===n){if(-1===(s=(i=t.getNodeInfo(this).keypath).lastIndexOf(".")))throw new Error(c);a=i.substr(0,s),l=+i.substring(s+1),a===r&&(l!==o?(h=(u=n.get(r)).splice(o,1)[0],o=l,u.splice(o,0,h)):this.classList.add(e.targetClass))}},l=function(){this.classList.remove(e.targetClass)},u=function(t){t.preventDefault()},t.decorators.sortable=e,e}));function __trs_hint_init(){const t=jQuery;Ractive.components.Hint=Ractive.extend({isolated:!0,template:"#trs_hint"}),Ractive.components.HintHandle=Ractive.extend({isolated:!0,template:"#trs_hint_handle",toggle:function(){this.component.parentFragment.findComponent("HintContent").toggle()}}),Ractive.components.HintContent=Ractive.extend({isolated:!0,template:"#trs_hint_content",toggle:function(){t(this.fragment.items[0].node).slideToggle("fast").toggleClass("expanded")}})}"undefined"!=typeof module&&module.exports&&(module.exports=sortableDecorator),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Ractive.transitions.slide=e()}(this,(function(){"use strict";var t=function(t,r){var o;r=t.processParams(r,e),t.isIntro?(o=t.getStyle(n),t.setStyle(i)):(t.setStyle(t.getStyle(n)),o=i);t.setStyle("overflowY","hidden"),t.animateStyle(o,r).then(t.complete)},e={duration:300,easing:"easeInOut"},n=["height","borderTopWidth","borderBottomWidth","paddingTop","paddingBottom","marginTop","marginBottom"],i={height:0,borderTopWidth:0,borderBottomWidth:0,paddingTop:0,paddingBottom:0,marginTop:0,marginBottom:0};return t})),Ractive.prototype.keypath=function(t){if(t.hasOwnProperty("fullname"))return t;var e,n=this,i=(t+="").lastIndexOf("."),r=t.substr(0,i),o=t.substring(i+1);return{fullname:t,basename:o,parent:function(){return void 0===e&&(e=r?n.keypath(r):null),e},join:function(t){return t=n.keypath(t),n.keypath(this.fullname+(""!==this.fullname&&""!==t.fullname?".":"")+t.fullname)}}},Ractive.prototype.remove=function(t){var e=((t=this.keypath(t)).parent()||{}).fullname||void 0,n=this.get(e);void 0!==n&&("function"==typeof n.splice?n.splice(t.basename,1):(delete n[t.basename],void 0!==e?(this.set(e,n),this.update(e)):(this.set(n),this.update(e))))},Ractive.prototype.justDo=function(t){var e=this.transitionsEnabled;this.transitionsEnabled=!1;try{t.call(this)}catch(t){throw this.transitionsEnabled=e,t}this.transitionsEnabled=e},Ractive.prototype.modify=function(t,e){t.hasOwnProperty("fullname")&&(t=t.fullname),this.set(t,e(this.get(t)))},window.__trs_admin_js_loaded||(window.__trs_admin_js_loaded=!0,window.woocommerce_admin&&window.trs_admin_js_woocommerce_admin_overrides&&Object.assign(window.woocommerce_admin,window.trs_admin_js_woocommerce_admin_overrides),Ractive.DEBUG=!1,jQuery((function(t){var e,n=JSON.stringify({operation:"add",calculator:{calculator:"children",aggregator:"sum"}}),i=JSON.stringify({meta:{enable:"1",title:"",label:""},conditions:{meta:{grouping:"",capture:0},list:[]},operations:{meta:{grouping:""},list:[JSON.parse(n)]},children:[],_view:{expanded:!0,settings:!0,dragging:!1,showExpanded:!0,showSettings:!0}}),r={"destination-based":{title:"Shipping zones, zip/postal codes",subtitle:"Domestic & international shipping",config:{meta:{label:"destination-based shipping"},operations:{list:[{operation:"add",calculator:{calculator:"children",aggregator:"first"}}]},children:[{meta:{label:"USA",title:"Domestic Shipping"},conditions:{list:[{condition:"destination",operator:"intersect",value:["US"]}]},operations:{list:[{operation:"add",calculator:{calculator:"const",value:"15.25"}}]}},{meta:{label:"Canada, Mexico",title:"Ground Shipping"},conditions:{list:[{condition:"destination",operator:"intersect",value:["CA","MX"]}]},operations:{list:[{operation:"add",calculator:{calculator:"const",value:"22.50"}}]}},{meta:{label:"UK mainland",title:"UK Mainland Shipping"},conditions:{list:[{condition:"destination",operator:"intersect",value:["GB"]},{condition:"destination",operator:"disjoint",value:["GB/zip:BT*","GB/zip:HS*","GB/zip:IM*","GB/zip:IV*","GB/zip:KA27*","GB/zip:KA28*","GB/zip:KW*","GB/zip:PA20 0AA...PA49 9ZZ,PA60 0AA...PA78 9ZZ","GB/zip:PH17 0AA...PH26 9ZZ,PH34 0AA...PH44 9ZZ,PH49 0AA...PH50 9ZZ","GB/zip:PO30 0AA...PO40 9ZZ","GB/zip:TR21 0AA...TR25 9ZZ","GB/zip:ZE*","GB/zip:LL58 0AA...LL62 9ZZ,LL64 0AA...LL78 9ZZ"]}]},operations:{list:[{operation:"add",calculator:{calculator:"const",value:"32.05"}}]}},{meta:{label:"UK other",title:"UK Shipping"},conditions:{list:[{condition:"destination",operator:"intersect",value:["GB"]}]},operations:{list:[{operation:"add",calculator:{calculator:"const",value:"40.45"}}]}},{meta:{label:"other",title:"International Shipping"},operations:{list:[{operation:"add",calculator:{calculator:"const",value:"49.95"}}]}}]}},"weight-based":{title:"Weight-based shipping",subtitle:"Simple rate table",config:{meta:{label:"weight-based shipping",title:"Weight-based Shipping"},operations:{list:[{operation:"add",calculator:{calculator:"children",aggregator:"first"}}]},children:[{meta:{label:"small"},conditions:{list:[{condition:"weight",operator:"lt",value:1}]},operations:{list:[{operation:"add",calculator:{calculator:"const",value:"2.50"}}]}},{meta:{label:"medium"},conditions:{list:[{condition:"weight",operator:"lt",value:2}]},operations:{list:[{operation:"add",calculator:{calculator:"const",value:"3.75"}}]}},{meta:{label:"large"},conditions:{list:[{condition:"weight",operator:"lt",value:10}]},operations:{list:[{operation:"add",calculator:{calculator:"const",value:"9.95"}}]}},{meta:{label:"more"},operations:{list:[{operation:"add",calculator:{calculator:"const",value:"9.95"}},{operation:"add",calculator:{calculator:"weight",cost:"0.50",skip:10}}]}}]}},"destination-weight-based":{title:"Destination + weight",subtitle:"Weight-based shipping depending on order destination",config:{meta:{label:"destination + weight"},operations:{list:[{operation:"add",calculator:{calculator:"children",aggregator:"first"}}]},children:[{meta:{label:"USA",title:"Domestic Shipping"},conditions:{list:[{condition:"destination",operator:"intersect",value:["US"]}]},operations:{list:[{operation:"add",calculator:{calculator:"children",aggregator:"first"}}]},children:[{meta:{label:"small"},conditions:{list:[{condition:"weight",operator:"lt",value:1}]},operations:{list:[{operation:"add",calculator:{calculator:"const",value:"2.50"}}]}},{meta:{label:"medium"},conditions:{list:[{condition:"weight",operator:"lt",value:2}]},operations:{list:[{operation:"add",calculator:{calculator:"const",value:"3.75"}}]}},{meta:{label:"large"},conditions:{list:[{condition:"weight",operator:"lt",value:10}]},operations:{list:[{operation:"add",calculator:{calculator:"const",value:"9.95"}}]}},{meta:{label:"more"},operations:{list:[{operation:"add",calculator:{calculator:"const",value:"9.95"}},{operation:"add",calculator:{calculator:"weight",cost:"0.50",skip:10}}]}}]},{meta:{label:"Canada, Mexico",title:"Ground Shipping"},conditions:{list:[{condition:"destination",operator:"intersect",value:["CA","MX"]}]},operations:{list:[{operation:"add",calculator:{calculator:"children",aggregator:"first"}}]},children:[{meta:{label:"small"},conditions:{list:[{condition:"weight",operator:"lt",value:1}]},operations:{list:[{operation:"add",calculator:{calculator:"const",value:"3.50"}}]}},{meta:{label:"medium"},conditions:{list:[{condition:"weight",operator:"lt",value:2}]},operations:{list:[{operation:"add",calculator:{calculator:"const",value:"4.75"}}]}},{meta:{label:"large"},conditions:{list:[{condition:"weight",operator:"lt",value:10}]},operations:{list:[{operation:"add",calculator:{calculator:"const",value:"10.95"}}]}},{meta:{label:"more"},operations:{list:[{operation:"add",calculator:{calculator:"const",value:"10.95"}},{operation:"add",calculator:{calculator:"weight",cost:"1.50",skip:10}}]}}]},{meta:{label:"other",title:"International Shipping"},operations:{list:[{operation:"add",calculator:{calculator:"children",aggregator:"first"}}]},children:[{meta:{label:"small"},conditions:{list:[{condition:"weight",operator:"lt",value:1}]},operations:{list:[{operation:"add",calculator:{calculator:"const",value:"6.50"}}]}},{meta:{label:"medium"},conditions:{list:[{condition:"weight",operator:"lt",value:2}]},operations:{list:[{operation:"add",calculator:{calculator:"const",value:"7.75"}}]}},{meta:{label:"large"},conditions:{list:[{condition:"weight",operator:"lt",value:10}]},operations:{list:[{operation:"add",calculator:{calculator:"const",value:"13.95"}}]}},{meta:{label:"more"},operations:{list:[{operation:"add",calculator:{calculator:"const",value:"13.95"}},{operation:"add",calculator:{calculator:"weight",cost:"4.50",skip:10}}]}}]}]}},"conditional-free":{title:"Free shipping over a certain subtotal",subtitle:"Conditional free shipping",config:{meta:{label:"Free shipping over a certain subtotal"},operations:{list:[{operation:"add",calculator:{calculator:"children",aggregator:"first"}}]},children:[{meta:{label:"free",title:"Free Shipping"},conditions:{list:[{condition:"price",operator:"gt",value:100}]},operations:{list:[{operation:"add",calculator:{calculator:"free"}}]}},{meta:{label:"paid",title:"Paid Shipping"},operations:{list:[{operation:"add",calculator:{calculator:"const",value:25}}]}}]}},"multiple-options":{title:"Multiple shipping options",subtitle:"Express & regular shipping",config:{meta:{label:"multiple shipping options"},operations:{list:[{operation:"add",calculator:{calculator:"children",aggregator:"all"}}]},children:[{meta:{label:"regular",title:"Regular Shipping"},operations:{list:[{operation:"add",calculator:{calculator:"const",value:"9.50"}}]}},{meta:{label:"express",title:"Express Shipping"},operations:{list:[{operation:"add",calculator:{calculator:"const",value:"15.80"}}]}},{meta:{label:"express with insurance",title:"Express (insured)"},operations:{list:[{operation:"add",calculator:{calculator:"const",value:"19.95"}}]}},{meta:{label:"local pickup",title:"Local Pickup"},operations:{list:[{operation:"add",calculator:{calculator:"free"}}]}}]}},"class-based":{title:"Shipping classes",subtitle:"Class-based shipping",config:{meta:{label:"class-based shipping",title:"Class-based Shipping"},operations:{list:[{operation:"add",calculator:{calculator:"children",aggregator:"sum"}}]},children:[{meta:{label:"posters"},conditions:{list:[{condition:"terms",operator:"any",value:["shipping_class:19"]}]},operations:{list:[{operation:"add",calculator:{calculator:"const",value:"3.50"}}]}},{meta:{label:"t-shirts"},conditions:{list:[{condition:"terms",operator:"any",value:["shipping_class:18"]}]},operations:{list:[{operation:"add",calculator:{calculator:"const",value:"7.50"}}]}},{meta:{label:"hoodies"},conditions:{list:[{condition:"terms",operator:"any",value:["shipping_class:20"]}]},operations:{list:[{operation:"add",calculator:{calculator:"const",value:"9.50"}}]}},{meta:{label:"other"},conditions:{list:[{condition:"terms",operator:"no",value:["shipping_class:18","shipping_class:19","shipping_class:20"]}]},operations:{list:[{operation:"add",calculator:{calculator:"const",value:"15.90"}}]}}]}}},o=function(t,e,n){return t[e]=n,t.showExpanded=t.expanded&&!t.dragging,t.showSettings=t.settings&&!t.dragging,t},s=function(){var t=h[0];return!(t.checkValidity&&!t.checkValidity())||(h.find("[type=submit]").click(),!1)},a={map:function(e,n){return(e=n(e)).children=t.map(e.children||[],(function(t){return a.map(t,n)})),e},visitRulesRecursively:function(e,n){n(e),t.each(e.children||[],(function(t,e){a.visitRulesRecursively(e,n)}))},visitEach:function(e,n){var i=[];t.each(e,(function(t,e){!1===n(e)&&i.push(t)}));for(var r=i.length;r-- >0;){var o=i[r];e.splice(o,1)}},normalize:function(e){return a.map(e,(function(e){return t.extend(!0,{},JSON.parse(i),e)}))},receive:function(e){return a.map(a.normalize(e),(function(e){e.conditions.list=t.map(e.conditions.list,(function(t){return"terms"===t.condition&&(t.subcondition=a.items.wrap(t.subcondition||{},"condition")),t=a.items.wrap(t,"condition")}));for(var i=e.operations.list,r=!1,o=0;o<i.length;o++){var s=i[o];if("add"===s.operation&&"children"===u(s,"calculator.calculator")){r=!0;break}}return r||i.push(JSON.parse(n)),i=t.map(i,(function(t){var e=(t=a.items.wrap(t,"operation"))[t.operation];return e.calculator&&(e.calculator=a.items.wrap(e.calculator,"calculator")),t})),e.operations.list=i,e}))},receiveRootRule:function(t){return t||(t={operations:{list:[{operation:"add",calculator:{calculator:"children",aggregator:"all"}}]}}),(t=a.receive(t)).meta.sequence||(t.meta.sequence=0),t},release:function(e){return e=l(e),a.visitRulesRecursively(e,(function(e){e.meta.enable=!!e.meta.enable,e.conditions.list=t.map(e.conditions.list,(function(t){return"terms"===(t=a.items.flatten(t,"condition")).condition&&(t.subcondition=a.items.flatten(t.subcondition,"condition")),t})),e.operations.list=t.map(e.operations.list,(function(t){return(t=a.items.flatten(t,"operation")).calculator&&(t.calculator=a.items.flatten(t.calculator,"calculator")),t}))})),e},items:{wrap:function(e,n){var i=t.extend({},e);delete i[n];var r={};return r[n]=e[n],r[r[n]]=i,r},flatten:function(e,n){var i={};return i[n]=e[n],i=t.extend(i,e[e[n]])}}},l=function(t){return JSON.parse(JSON.stringify(t))},u=function(e,n){return null!=e&&null!=n&&(t.each((""+n).split("."),(function(t,n){if(null==e)return!1;e=e[n]})),e)},c=t(".trs"),h=c.closest("form"),d=h.find(':input[name$="_rule"]');try{var p=d.val();p&&(e=JSON.parse(p))}catch(t){console.error(t)}h.find(".form-table").toggle(!!(e&&e.children&&e.children.length>0)),function(){e=a.receiveRootRule(e);var n=Ractive.extend({isolated:!1,template:"#trs_conditions",data:function(){return{meta:{grouping:""},list:[],rule:null,isAlwaysSingle:function(t){return t&&-1!==["destination","customer"].indexOf(t.condition)}}},computed:{hideAdd:function(){return this.isLastConditionDummy(this.get("list"))},hideDelete:function(){var t=this.get("list");return t&&1===t.length&&this.isLastConditionDummy(t)},perItemGrouping:function(){return"item"===this.get("meta.grouping")}},oninit:function(){var t=this,e=!0;this.observe("list",(function(n){e&&_.debounce((function(){n.length||t.push("list",{}),n.length>1&&t.get("hideAdd")&&t.pop("list")}),0)();for(var i=this.get("list"),r=!1,o=0;o<i.length;o++)"no"==u(i[o],"terms.operator")&&""!=u(i[o],"terms.subcondition.condition")&&(i[o].terms.subcondition.condition="",r=!0);r&&this.set("list",i)})),this.on({add:function(t){t.original.preventDefault(),e=!1,this.push("list",{}),e=!0},remove:function(t){t.original.preventDefault(),this.remove(t.keypath)}})},isDummyCondition:function(t){return t&&"true"==t.condition},isLastConditionDummy:function(t){return t&&t.length&&this.isDummyCondition(t[t.length-1])}}),i=function(t){return t&&"add"==t.operation&&"free"==u(t,"add.calculator.calculator")},d=function(t,e){return!((!t.children||!t.children.length)&&t.list&&t.list[e]&&"add"==t.list[e].operation&&"children"==u(t.list[e],"add.calculator.calculator"))},p=function(t,e){var n=[];if(!t||!t.list)return n;void 0===e&&(e=t.list.length);for(var i=0;i<e;i++)d(t,i)&&n.push(t.list[i]);return n},f=Ractive.extend({isolated:!1,template:"#trs_operations",data:function(){return{meta:{grouping:""},list:[],isOperationVisible:function(t){return d(this.get(),t)},getVisibleOperationsCount:function(t){return p(this.get(),t).length},hideAdd:function(){var t=this.get("visibleOperations");return t.length&&i(t[t.length-1])},hideDelete:function(t){return i(t)&&1==this.get("visibleOperationsCount")}}},computed:{visibleOperations:function(){return p(this.get())},visibleOperationsCount:function(){return this.get("visibleOperations").length}},oninit:function(){var e,n=this;this.observe("meta list",_.debounce((function(){if(e){var i=n.get(),r=null,o=0,s=0,a=[];t.each(i.list,(function(t,e){var n=u(e,e.operation+".calculator"),r=u(n,"calculator"),l=u(n,r);if(l){if("all"===l.aggregator)s++,"children"===r&&!u(i,"children.length")&&a.push(l);"children"===r&&o++}}));var l=i.meta.grouping?0:1;s>l&&s-a.length<=l&&(t.each(a,(function(t,e){e.aggregator="sum"})),n.set(i),s-=a.length),0===o&&(r="Please keep at least one child rules calculation to make sure child rules will take effect. In other case they will not be processed at all."),s>l&&(r=i.meta.grouping?"Processing multiple packages with multiple rates for each is ambiguous. Please either reset 'Calculate fees' or use a single rate (i.e. anything except 'all').":"Adding two or mote rate sets together is ambiguous. Please keep a single rate set at time and aggregate other ones (i.e. anything except 'all')"),r&&(c=e,h=r,setTimeout((function(){alert(h),delete(c=JSON.parse(c)).children,n.set(c)}),0))}var c,h;e=JSON.stringify(n.get())}),0));var i=!0;this.observe("visibleOperations",(function(t){if(i){var e=this;t.length||e.push("list",{}),t.length>1&&e.get().hideAdd.call(e)&&e.pop("list")}})),this.on({add:function(t){t.original.preventDefault(),i=!1,this.push("list",{}),i=!0},remove:function(t){t.original.preventDefault(),this.remove(t.keypath),this.update()}})}});__trs_hint_init();var m=function(t){return!u(t,"conditions.meta.capture")&&!u(t,"conditions.meta.grouping")&&!u(t,"operations.meta.grouping")},g=new Ractive({el:"#trs",template:"#trs_template",data:{rule:e,snippets:r,showExtended:function(t){return t&&(!m(t)||t._view.extended)},isUnextendable:m},components:{Conditions:n,Operations:f}});g.on({add:function(t,e,n,i){t.original.preventDefault();var s,u=["append","prepend","after","before"],c=["new","clone","snippet"];e=u[Math.max(0,u.indexOf(e))],"clone"===(n=c[Math.max(0,c.indexOf(n))])?s=l(t.context):(i="snippet"===n&&r[i]?a.map(l(r[i].config),(function(t){return t._view=t._view||{},t._view.settings=!1,t._view.showSettings=!1,t})):{},s=a.receive(i));var h=s.meta.label;"clone"===n?h="Copy"+(h?" of "+h:""):h||(this.add("rule.meta.sequence"),h="Rule #"+this.get("rule.meta.sequence")),s.meta.label=h;var d,p,f=t.keypath;if((!f||"rule"!==f&&"rule."!==f.substr(0,5))&&(f=null),f||("after"===e?e="append":"before"===e&&(e="prepend"),f="rule"),-1!==["append","prepend"].indexOf(e))d=this.keypath(f+".children"),this["append"===e?"push":"unshift"](d.fullname,s);else{if(-1===["after","before"].indexOf(e))throw"Invalid insertion position '"+e+"'";d=(f=this.keypath(t.keypath)).parent(),this.get(d.fullname).splice((0|f.basename)+("after"===e?1:0),0,s)}(p=d.parent())&&this.modify(p.join("_view"),(function(t){return o(t,"expanded",!0)}))},remove:function(t,e){t.original.preventDefault();var n=["withchildren","keepchildren"];e=n[Math.max(0,n.indexOf(e))];var i=this.keypath(t.keypath),r=[i.parent().fullname,i.basename,1];"keepchildren"===e&&(r=r.concat(t.context.children)),this.splice.apply(this,r)},toggle:function(t){t.original.preventDefault(),this.modify(t.keypath+"._view",(function(t){return o(t,"expanded",!t.expanded)}))},settings:function(t){if(t.original.target===t.node){t.original.preventDefault();var e=t.keypath+"._view",n=this.get(e);n.settings&&!s()||this.set(e,o(n,"settings",!n.settings))}},extend:function(t){var e=this.get(t.keypath);m(e)?(e._view.extended=!e._view.extended,this.set(t.keypath,e)):alert("In order to hide advanced settings reset them to their default state.")}}),function(){const e=h.find("p.submit"),n=e.find('[type="submit"]').after('<span class="spinner"></span>'),i=t('<div class="trs-messages"></div>').insertAfter(e);var r=function(t,e){t[e?"slideDown":"slideUp"](e?"fast":"slow",e?void 0:function(){t.remove()})},o=function(e,n){var o=t('<div class="'+(e?"updated":"error")+' inline message"><p>   <span class="dismiss dashicons dashicons-dismiss"></span>   <strong>'+t("<span></span>").text(n).text()+"</strong></p></div>");i.append(o),r(o,!0),e&&setTimeout(r.bind(null,o,!1),3e3)},s=0,l=function(){0===s&&e.slideDown("fast"),s++};g.observe("*",l,{init:!1}),h.change(l),i.on("click",".dismiss",(function(){r(t(this).closest(".message"),!1)})),h.on("submit",(function(){let i=g.get("rule");a.visitRulesRecursively(i,(function(e){a.visitEach(e.conditions.list,(function(e){var n=e[e.condition];if(!n)return;"empty"===n.operator&&delete n.value;const i=t.isArray(n.value)&&!n.value.length,r="btw"===n.operator&&""+n.min+n.max=="";return!i&&!r&&void 0}))})),g.update("rule"),i=a.release(i);var r=h[0];if(r.checkValidity&&!r.checkValidity())return!1;n.attr("disabled",!0).addClass("inprogress");var l=s,u=window.trs_admin_js_options.config_update_url,c=window.trs_admin_js_options.form_fields_prefix;const d=h.find('[name="_wpnonce"]:last');var p=h.find('[name="'+c+'enabled"]');return t.ajax({url:u,type:"post",contentType:"application/json",data:JSON.stringify({config:{enabled:p.length?p.is(":checked"):void 0,label:h.find('[name="'+c+'label"]').val(),tax_status:h.find('[name="'+c+'tax_status"]').val(),rule:i},_wpnonce:d.val()}),dataType:"text",success:function(t){o(!0,"Your settings have been saved."),"string"==typeof t&&""!==(t=t.trim())?h.find('[name="_wpnonce"]').val(t):console.error("Response data expected to be a non-empty string. Received instead: ",t),l===s&&(s=0,e.slideUp("fast"))},error:function(t,e,n){var i;i="timeout"===e?"Request timed out. Please check your internet connection and try again.":"["+e+"] ["+t.status+" "+n+"] "+t.responseText,o(!1,i)},complete:function(){n.attr("disabled",!1).removeClass("inprogress")}}),!1}));var u=function(){window.onbeforeunload=function(t){if(0!==s){var e=window.woocommerce_settings_params&&window.woocommerce_settings_params.i18n_nav_warning||"The changes you made will be lost if you navigate away from this page.";return t.returnValue=e,e}}};t(window).on("load",(function(){setTimeout((function(){t(".woo-nav-tab-wrapper a, .submit input").on("click",u)}),0)})),u()}(),window.trsSaveRulesToJson=function(){return JSON.stringify(a.release(g.get("rule")))},window.trsLoadRulesFromJson=function(t){var e=null===t?null:JSON.parse(t);e=a.receiveRootRule(e),g.set("rule",e)},c.trs().dropdown(),c.find(".rules > ul").nestedSortable({handle:".header",items:".rule-item",toleranceElement:"> .content",listType:"ul",cursor:"move",protectRoot:!0,isTree:!0,distance:10,collapsedClass:"collapsed",expandedClass:"expanded",branchClass:"has-children",leafClass:"no-children",placeholder:"placeholder",disableNestingClass:!1,forcePlaceholderSize:!0,list:'<ul class="rule-list"></ul>',helper:function(e,n){var i=n[0]._ractive;return i.root.justDo((function(){this.modify(i.keypath.str+"._view",(function(t){return o(t,"dragging",!0)}))})),t(this).sortable("refreshPositions",!1),t(n).clone()},stop:function(e,n){var i,r,s=n.item[0]._ractive.root,a=n.item[0]._ractive.keypath;i={keypath:a.str,parent:a.parent.str,position:+a.lastKey};var l,u=t(n.item).parent()[0];if(u._ractive)r={keypath:u._ractive.keypath.str,position:t(u).children().index(n.item)};else{var c=t(u).closest(".rule-item")[0];r={keypath:c._ractive.keypath.str+".children",position:0}}var h=i.keypath.split("."),d=(r.keypath+"."+r.position).split(".");if(h.length==d.length)l=!1;else{for(var p=0;h[p]==d[p];)p++;l=+h[p]<+d[p]}var f=function(t,e){e==l&&t.remove(i.keypath)};t(this).sortable("cancel"),t(this).find(".rule-list:empty").remove();var m=s.get(i.keypath);m._view=o(m._view,"dragging",!1),s.justDo((function(){f(this,!1),this.splice(r.keypath,r.position,0,m),f(this,!0)}))},tree:{hasChildren:function(e){var n=t(e).get(0)._ractive,i=n.keypath.str;return""===i||n.root.get(i).children.length>0},expanded:function(e,n){var i=t(e).get(0)._ractive,r=i.keypath.str+"._view",s=i.root.get(r);return void 0!==n&&i.root.justDo((function(){s=o(s,"expanded",!!n),this.set(r,s)})),s.expanded}}})}()})),function(t){"use strict";t.fn.trs=function(){return t.extend(this,t.fn.trs)},t.each({dropdown:t.extend((function(e,n){return e=t.extend({container:".dropdown",handle:".dropdown-handle",menu:".dropdown-menu"},e),n.init(),this.on("click",e.handle,(function(i){i.preventDefault(),n.toggle(t(this).closest(e.container))}))}),{$opened:t(),inited:!1,init:function(){if(!this.inited){this.inited=!0;var e=this;t(document).on("mouseup",(function(){var t=e.$opened;t.data("trs-dont-toggle",t.hasClass("open")),t.removeClass("open")}))}},toggle:function(t){t.data("trs-dont-toggle")?t.data("trs-dont-toggle",!1):(t.toggleClass("open"),t.hasClass("open")&&(this.$opened.data("trs-dont-toggle",!1),this.$opened=t))}})},(function(e,n){t.fn.trs[e]=function(i){var r=t.extend({singleton:!0,chained:!0},n.__plugin),o=this;if(r.singleton){var s="trs.plugin."+e;o=o.not(":data("+s+")").data(s,!0)}var a=n.call(o,i||{},n);return r.chained?this:a}}))}(jQuery));
